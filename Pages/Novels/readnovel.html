<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="readnovel_title">Kho Truyện - LEGNAXE</title>
    <meta name="description" content="Khám phá kho truyện LEGNAXE của NMT, bao gồm các phần về cuộc đại chiến Thiên Đàng và hành trình khám phá Trần Gian, với các phiên bản song ngữ Anh-Việt." data-lang-key="readnovel_meta_description">
    <meta property="og:title" content="Kho Truyện - LEGNAXE" data-lang-key="og_title_readnovel">
    <meta property="og:description" content="Đọc truyện LEGNAXE - một saga sử thi về thiên thần, con người và cuộc chiến vì sự cân bằng vũ trụ. Có sẵn các phiên bản tiếng Việt và tiếng Anh." data-lang-key="og_description_readnovel">
    <meta property="og:image" content="/images/pages/novels/logo-legnaxe.png">
    <meta property="og:url" content="https://ivs.id.vn/Pages/Novels/readnovel.html">
    <meta property="og:type" content="website">
    <meta property="article:section" content="Novel List">
    <meta property="article:author" content="NMT">

    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        primary: '#3b82f6',
                        'primary-dark': '#2563eb',
                        'secondary': '#10b981',
                        'purple-accent': '#8b5cf6',
                        'gray-50': '#f9fafb',
                        'gray-100': '#f3f4f6',
                        'gray-200': '#e5e7eb',
                        'gray-300': '#d1d5db',
                        'gray-400': '#9ca3af',
                        'gray-500': '#6b7280',
                        'gray-600': '#4b5563',
                        'gray-700': '#374151',
                        'gray-800': '#1f2937',
                        'gray-900': '#111827',
                        'blue-200': '#bfdbfe',
                        'blue-400': '#60a5fa',
                        'blue-600': '#2563eb',
                        'blue-700': '#1d4ed8',
                        'red-400': '#f87171',
                        'red-600': '#dc2626',
                        'red-100': '#fee2e2',
                        'red-900': '#7f1d1d',
                    },
                    animation: {
                        'slide-up': 'slideUp 0.5s ease-out',
                    },
                    keyframes: {
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                    },
                },
            },
            darkMode: 'class',
        }
    </script>
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        html {
            scroll-behavior: smooth;
        }
        .section {
            padding: 2rem 1rem;
            margin-bottom: 2rem;
            border-radius: 8px;
        }
        .section-light {
            background-color: #ffffff;
            color: #1f2937;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        .section-dark {
            background-color: #2d3748;
            color: #f7fafc;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        .section h2, .section h3 {
            color: #3b82f6;
        }
        .section p, .section ul {
            line-height: 1.8;
        }
        .section ul {
            list-style: disc;
            margin-left: 1.5rem;
        }
        .section img {
            max-width: 100%;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }
        .image-container {
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .image-container img {
            display: inline-block;
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .gallery-scroll-box {
            display: flex;
            overflow-x: auto;
            gap: 1rem;
            padding: 1rem;
            background-color: #e5e7eb;
            border-radius: 8px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
            scrollbar-color: #3b82f6 #e5e7eb;
        }
        .gallery-scroll-box::-webkit-scrollbar-track {
            background: #e5e7eb;
            border-radius: 10px;
        }
        .gallery-scroll-box::-webkit-scrollbar-thumb {
            background: #3b82f6;
            border-radius: 10px;
        }
        .gallery-item {
            flex-shrink: 0;
            width: 150px;
            height: 150px;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease-in-out;
        }
        .gallery-item img:hover {
            transform: scale(1.05);
        }
        @media (min-width: 640px) {
            .gallery-item {
                width: 180px;
                height: 180px;
            }
        }
        @media (min-width: 768px) {
            .gallery-item {
                width: 200px;
                height: 200px;
            }
        }
        .excerpt {
            font-style: italic;
            padding-left: 1rem;
            border-left: 3px solid #3b82f6;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .novel-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        .novel-card {
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        html.dark .novel-card {
            background-color: #1f2937;
            box-shadow: 0 4px 6px -1px rgba(255, 255, 255, 0.05), 0 2px 4px -2px rgba(255, 255, 255, 0.05);
        }
        .novel-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        html.dark .novel-card:hover {
            box-shadow: 0 10px 15px -3px rgba(255, 255, 255, 0.07), 0 4px 6px -4px rgba(255, 255, 255, 0.07);
        }
        .book-cover {
            width: 100%;
            aspect-ratio: 2 / 3;
            object-fit: cover;
            background-color: #e5e7eb;
        }
        html.dark .book-cover {
            background-color: #374151;
        }
        .card-content {
            padding: 1rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .read-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            text-align: center;
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            background-color: #3b82f6;
            color: #ffffff;
            border: 1px solid transparent;
        }
        .read-button:hover {
            background-color: #2563eb;
        }
        .english-button {
            background-color: #10b981;
            color: #ffffff;
        }
        .english-button:hover {
            background-color: #059669;
        }
        .active-menu-link {
            color: #3b82f6;
            font-weight: 600;
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 0.25rem;
        }
        .read-more-link {
            cursor: pointer;
        }
        .summary-full {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300 ease-in-out font-sans antialiased">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-blue-600 text-white px-4 py-2">Skip to content</a>

    <header id="header-placeholder"></header>

    <main class="w-full pt-20" id="main-content">
        <div class="page-content-container max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

            <h1 class="page-title text-3xl font-bold mb-6 text-gray-900 dark:text-white" data-lang-key="readnovel_title">Kho Truyện - LEGNAXE</h1>

            <div class="search-bar mb-6 border border-gray-300 dark:border-gray-600 rounded-md overflow-hidden bg-white dark:bg-gray-800">
                <input type="text" id="searchInput" placeholder="Tìm kiếm truyện theo tên hoặc mô tả..." data-lang-key="readnovel_search_placeholder" class="w-full p-2 bg-transparent focus:outline-none placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white">
            </div>

            <div class="novel-list">

                <div class="novel-card group bg-white dark:bg-gray-800 shadow-md hover:shadow-lg transition-shadow duration-200">
                    <a href="/Pages/Novels/read-legnaxe_part1_vi.html" class="cover-link" aria-label="Đọc LEGNAXE Phần 1 Tiếng Việt">
                        <picture>
                            <source srcset="/images/pages/novels/legnaxe1vertical.png" type="image/webp">
                            <img src="/images/pages/novels/legnaxe1vertical.png" alt="Bìa truyện LEGNAXE Phần 1" class="book-cover bg-gray-200 dark:bg-gray-700" loading="lazy" onerror="this.onerror=null; this.src='https://placehold.co/400x600/EBF4FF/4A5568?text=LEGNAXE+P1'; this.alt='Lỗi tải ảnh bìa LEGNAXE Phần 1';">
                        </picture>
                    </a>
                    <div class="card-content">
                        <h3 class="text-lg font-semibold line-clamp-1 mb-1 text-gray-900 dark:text-white" data-lang-key="readnovel_legnaxe1_title">LEGNAXE: Phần 1</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-4" data-lang-key="readnovel_legnaxe1_desc">Bí mật cuộc đại chiến Thiên Đàng / <strong>Secrets of Heaven's Great War.</strong></p>

                        <div class="story-item-content">
                            <div class="summary-container text-sm text-gray-600 dark:text-gray-400 leading-relaxed">
                                 <p class="summary-short" data-lang-key="readnovel_legnaxe1_summary_short">
                                    Câu chuyện bắt đầu tại Thiên Đàng, nơi Lucifer, một Tổng lãnh Thiên thần, cảm thấy bất mãn với sự hoàn hảo đơn điệu và đặt nghi vấn về ý nghĩa tồn tại...
                                </p>
                                <div class="summary-full" data-lang-key="readnovel_legnaxe1_summary_full">
                                    <p>Câu chuyện bắt đầu tại Thiên Đàng, nơi Lucifer, một Tổng lãnh Thiên thần, cảm thấy bất mãn với sự hoàn hảo đơn điệu và đặt nghi vấn về ý nghĩa tồn tại. Cuộc nổi loạn của hắn và những kẻ theo sau đã dẫn đến Đại chiến Thiên Đàng, một sự kiện làm rạn nứt sự hài hòa vũ trụ và buộc Đấng Sáng Tạo phải đưa ra những phán quyết định mệnh.</p>
                                </div>
                                 <a href="#" class="read-more-link text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 mt-2 inline-block" data-lang-key="read_more_link">Đọc thêm</a>
                            </div>
                        </div>

                         <div class="flex flex-col sm:flex-row gap-3 mt-auto pt-4 border-t border-gray-200 dark:border-gray-700">
                            <a href="/Pages/Novels/read-legnaxe_part1_vi.html" class="read-button bg-primary hover:bg-primary-dark text-white flex-1 py-2 rounded-md text-sm transition-colors" data-lang-key="read_vi_button">
                                <i class="fas fa-book-open mr-2"></i> Đọc (TV)
                            </a>
                            <a href="/Pages/Novels/read-legnaxe_part1_en.html" class="read-button english-button bg-secondary hover:bg-emerald-600 text-white flex-1 py-2 rounded-md text-sm transition-colors" data-lang-key="read_en_button">
                                <i class="fas fa-book-open mr-2"></i> Read (EN)
                            </a>
                        </div>
                    </div>
                </div>

                <div class="novel-card group bg-white dark:bg-gray-800 shadow-md hover:shadow-lg transition-shadow duration-200">
                    <a href="/Pages/Novels/read-legnaxe_part2_vi.html" class="cover-link" aria-label="Đọc LEGNAXE Phần 2 Tiếng Việt">
                        <picture>
                            <source srcset="/images/pages/novels/legnaxe2vertical.png" type="image/webp">
                            <img src="/images/pages/novels/legnaxe2vertical.png" alt="Bìa truyện LEGNAXE Phần 2" class="book-cover bg-red-100 dark:bg-red-900" loading="lazy" onerror="this.onerror=null; this.src='https://placehold.co/400x600/FFF5F5/7F1D1D?text=LEGNAXE+P2'; this.alt='Lỗi tải ảnh bìa LEGNAXE Phần 2';">
                        </picture>
                    </a>
                    <div class="card-content">
                        <h3 class="text-lg font-semibold line-clamp-1 mb-1 text-gray-900 dark:text-white" data-lang-key="readnovel_legnaxe2_title">LEGNAXE: Phần 2 - Heavenly, Human's Heart</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-4" data-lang-key="readnovel_legnaxe2_desc_short">Hành trình khám phá Trần Gian và trái tim con người...</p>

                        <div class="story-item-content">
                            <div class="summary-container text-sm text-gray-600 dark:text-gray-400 leading-relaxed">
                                <p class="summary-short" data-lang-key="readnovel_legnaxe2_summary_short_full">
                                    Hành trình khám phá Trần Gian và trái tim con người, nơi các thiên thần và con người đối mặt với những thử thách về niềm tin, tình yêu và sự hy sinh...
                                </p>
                                <div class="summary-full" data-lang-key="readnovel_legnaxe2_summary_full_content">
                                    <p>Hành trình khám phá Trần Gian và trái tim con người, nơi các thiên thần sa ngã phải học lại bài học làm người, đối mặt với những cám dỗ, nỗi đau và tìm kiếm ý nghĩa thực sự của sự tồn tại. Câu chuyện đan xen giữa số phận của Healiangel, Lucifer và Michael, những người bị ràng buộc bởi định mệnh và cuộc chiến vì sự cân bằng vũ trụ.</p>
                                </div>
                                 <a href="#" class="read-more-link text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 mt-2 inline-block" data-lang-key="read_more_link">Đọc thêm</a>
                            </div>
                        </div>

                        <p class="text-sm text-gray-700 dark:text-gray-300 mt-4 mb-2" data-lang-key="readnovel_choose_version">
                            Chọn phiên bản để đọc: S1 và S2 diễn biến truyện bắt đầu thay đổi từ Chương 7. Độc giả có thể chọn tuyến truyện chính.
                        </p>
                        <div class="flex flex-wrap gap-3">
                            <a href="/Pages/Novels/read-legnaxe_part2_vi.html" class="read-button bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-md text-center text-sm transition-colors" data-lang-key="read_vi_s1_button">
                                <i class="fas fa-book-open mr-2"></i> Đọc (TV) S1
                            </a>
                            <a href="/Pages/Novels/read-legnaxe_part2_en.html" class="read-button english-button bg-secondary hover:bg-emerald-600 text-white px-4 py-2 rounded-md text-center text-sm transition-colors" data-lang-key="read_en_s1_button">
                                <i class="fas fa-book-open mr-2"></i> Read (EN) S1
                            </a>
                            <a href="/Pages/Novels/read-legnaxe_part2s_vi.html" class="read-button bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-md text-center text-sm transition-colors" data-lang-key="read_vi_s2_button">
                                <i class="fas fa-book-open mr-2"></i> Đọc (TV) S2
                            </a>
                            <a href="/Pages/Novels/read-legnaxe_part2s_en.html" class="read-button english-button bg-secondary hover:bg-emerald-600 text-white px-4 py-2 rounded-md text-center text-sm transition-colors" data-lang-key="read_en_s2_button">
                                <i class="fas fa-book-open mr-2"></i> Read (EN) S2
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="character-section mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
                <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white" data-lang-key="readnovel_characters_title">Khám phá các nhân vật trong LEGNAXE</h2>
                <div class="flex flex-wrap gap-4">
                    <a href="/Pages/Novels/legnaxeintheuniver.html" class="read-button bg-secondary hover:bg-emerald-600 text-white px-4 py-2 rounded-md text-center transition-colors" data-lang-key="readnovel_view_characters_button">
                        <i class="fas fa-users mr-2"></i> Xem Nhân Vật
                    </a>
                </div>
            </div>

        </div>
    </main>

    <footer id="footer-placeholder"></footer>

    <button id="scrollToTopBtn" style="display: none;" class="fixed bottom-5 right-5 z-50 flex items-center justify-center w-12 h-12 rounded-full bg-primary text-white shadow-lg hover:bg-primary-dark transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="/js/loadComponents.js" defer></script>
    <script src="/js/language.js" defer></script>
    <script src="/js/script.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('searchInput');
            const novelCards = document.querySelectorAll('.novel-card');
            const readMoreLinks = document.querySelectorAll('.read-more-link');
            const scrollToTopBtn = document.getElementById('scrollToTopBtn');

            // Search functionality
            searchInput?.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase().trim();
                novelCards.forEach(card => {
                    const titleElement = card.querySelector('h3');
                    const shortDescElement = card.querySelector('.summary-short');
                    const fullSummaryElement = card.querySelector('.summary-full');

                    const title = titleElement ? titleElement.textContent.toLowerCase() : '';
                    const shortDesc = shortDescElement ? shortDescElement.textContent.toLowerCase() : '';
                    const fullSummary = fullSummaryElement ? fullSummaryElement.textContent.toLowerCase() : '';

                    const isVisible = title.includes(searchTerm) || shortDesc.includes(searchTerm) || fullSummary.includes(searchTerm);
                    card.style.display = isVisible ? 'flex' : 'none';
                });
            });

            // Read More Toggle functionality
            readMoreLinks.forEach(link => {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    const summaryContainer = this.closest('.summary-container');
                    if (summaryContainer) {
                        const shortSummary = summaryContainer.querySelector('.summary-short');
                        const fullSummary = summaryContainer.querySelector('.summary-full');
                        const isFullVisible = fullSummary.style.display !== 'none';

                        if (isFullVisible) {
                            fullSummary.style.display = 'none';
                            shortSummary.style.display = 'block';
                            this.textContent = window.translations[window.getCurrentLanguage()]['read_more_link'] || 'Đọc thêm';
                        } else {
                            shortSummary.style.display = 'none';
                            fullSummary.style.display = 'block';
                            this.textContent = window.translations[window.getCurrentLanguage()]['read_less_link'] || 'Thu gọn';
                        }
                    }
                });
            });

            // Scroll to Top Button functionality
            if (scrollToTopBtn) {
                window.addEventListener('scroll', () => {
                    if (window.pageYOffset > 300) {
                        scrollToTopBtn.style.display = 'flex';
                    } else {
                        scrollToTopBtn.style.display = 'none';
                    }
                });

                scrollToTopBtn.addEventListener('click', () => {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }

            // Ensure language system is initialized and translations applied after components load
            window.addEventListener('componentsLoaded', () => {
                if (typeof window.applyTranslations === 'function') {
                    window.applyTranslations();
                }
                // Re-apply read more text after language changes
                readMoreLinks.forEach(link => {
                    const summaryContainer = link.closest('.summary-container');
                    if (summaryContainer && summaryContainer.querySelector('.summary-full').style.display === 'none') {
                        link.textContent = window.translations[window.getCurrentLanguage()]['read_more_link'] || 'Đọc thêm';
                    } else {
                        link.textContent = window.translations[window.getCurrentLanguage()]['read_less_link'] || 'Thu gọn';
                    }
                });
            });
        });
    </script>
</body>
</html>
