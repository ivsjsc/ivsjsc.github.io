<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chọn Truyện Để Đọc - IVS</title>
    <meta name="description" content="Danh sách truyện hấp dẫn từ IVS: LEGNAXE - Bí mật cuộc chiến Thiên Đàng.">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {}
                }
            },
            darkMode: 'class'
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --header-height-initial: 80px;
            --header-height-scrolled: 60px;
            --header-height-mobile: 60px;
        }

        body {
            padding-top: var(--header-height-mobile);
            font-family: 'Inter', sans-serif;
        }

        @media (min-width: 1024px) {
            body { padding-top: var(--header-height-initial); }
        }

        html.dark body { }
        html.dark .page-content-container { }
        html.dark h1.page-title { }
        html.dark .novel-card { }
        html.dark .novel-card h3 { }
        html.dark .novel-card p { }
        html.dark .novel-card a.read-button:not([aria-disabled='true']) { }
        html.dark .novel-card a.read-button.english-button:not([aria-disabled='true']) { }
        html.dark .settings button { }
        html.dark .novel-card a.read-button[aria-disabled='true'] { }

        #header-placeholder {
            min-height: var(--header-height-mobile);
        }
        @media (min-width: 1024px) {
             #header-placeholder { min-height: var(--header-height-initial); }
        }

        .page-content-container 
        

        h1.page-title 
        

        .novel-list 
        

        .novel-card 
        

        .novel-card .cover-link 
        

        .novel-card img.book-cover 
        

        .novel-card .card-content 
        

        .novel-card h3 
        

        .novel-card p 
        

        .novel-card a.read-button 
        
        .novel-card a.read-button.english-button 
        

        .novel-card a.read-button[aria-disabled='true'] 
        

        .settings 
        

        .settings button         
        #footer-placeholder 
    

        .fetch-error-message 
        
        .fetch-error-message.header-error 
             min-height: var(--header-height-mobile);

         @media (min-width: 1024px) {
             .fetch-error-message.header-error { min-height: var(--header-height-initial); }
         }
        .fetch-error-message.footer-error         
        html.dark .fetch-error-message

    </style>
</head>
<body class="antialiased">

    <header id="header-placeholder">
        <div class="fixed top-0 left-0 right-0 z-50 flex items-center justify-center bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 animate-pulse" style="height: var(--header-height-mobile);">
             Đang tải header...
        </div>
    </header>

    <div class="main-content-wrapper flex-grow">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="page-content-container">
                <h1 class="page-title">Chọn Truyện Để Đọc</h1>

                <div class="settings">
                    <button onclick="toggleDarkMode()" aria-label="Chuyển chế độ Sáng/Tối">
                        <i class="fas fa-adjust mr-1"></i>
                        <span class="hidden sm:inline">Sáng/Tối</span>
                    </button>
                </div>

                <div class="novel-list">

                    <div class="novel-card group">
                        <a href="legnaxe_part1_vi.html" class="cover-link" aria-label="Đọc LEGNAXE Phần 1 Tiếng Việt">
                            <picture>
                                <source srcset="images/pages/novels/legnaxe1.webp" type="image/webp">
                                <img src="images/pages/novels/legnaxe1.png" alt="[Image of Bìa LEGNAXE Phần 1]" class="book-cover" loading="lazy" onerror="this.onerror=null; this.src='https://placehold.co/400x600/EBF4FF/4A5568?text=LEGNAXE+P1';">
                            </picture>
                        </a>
                        <div class="card-content">
                            <h3 class="!line-clamp-1">LEGNAXE: Phần 1</h3>
                            <p class="mb-4">Bí mật cuộc đại chiến Thiên Đàng / Secrets of Heaven's Great War.</p>
                            <div class="flex flex-col sm:flex-row gap-3 mt-auto">
                                <a href="legnaxe_part1_vi.html" class="read-button">
                                    <i class="fas fa-book-open"></i> Đọc (TV)
                                </a>
                                <a href="legnaxe_part1_en.html" class="read-button english-button">
                                    <i class="fas fa-book-open"></i> Read (EN)
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="novel-card group">
                         <a href="legnaxe_part2_vi.html" class="cover-link" aria-label="Đọc LEGNAXE Phần 2 Tiếng Việt">
                             <picture>
                                 <source srcset="images/pages/novels/legnaxe2.webp" type="image/webp">
                                 <img src="images/pages/novels/legnaxe2.png" alt="" class="book-cover" loading="lazy" onerror="this.onerror=null; this.src='https://placehold.co/400x600/FFF5F5/7F1D1D?text=LEGNAXE+P2';">
                             </picture>
                         </a>
                         <div class="card-content">
                             <h3 class="!line-clamp-1">LEGNAXE: Phần 2</h3>
                             <p class="mb-4">Hành trình Trần Gian & Trái tim con người / Heavenly, Human’s Heart.</p>
                             <div class="flex flex-col sm:flex-row gap-3 mt-auto">
                                 <a href="legnaxe_part2_vi.html" class="read-button">
                                     <i class="fas fa-book-open"></i> Đọc (TV)
                                 </a>
                                 <a href="#" class="read-button" aria-disabled="true" >
                                     <i class="fas fa-clock mr-1"></i> Read (EN - Soon)
                                 </a>
                             </div>
                         </div>
                    </div>

                    <div class="novel-card group opacity-50"> <a href="#" class="cover-link cursor-default" aria-label="Truyện sắp ra mắt">
                             <picture>
                                 <source srcset="https://placehold.co/400x600/F3E8FF/6B46C1?text=Coming+Soon.webp" type="image/webp">
                                 <img src="https://placehold.co/400x600/F3E8FF/6B46C1?text=Coming+Soon" alt="[Image of Bìa truyện sắp ra mắt]" class="book-cover" loading="lazy" onerror="this.onerror=null; this.src='https://placehold.co/400x600/eee/aaa?text=Image+Error';">
                             </picture>
                         </a>
                         <div class="card-content">
                             <h3 class="!line-clamp-1">Truyện Mới</h3>
                             <p class="mb-4">Một cuộc phiêu lưu kỳ thú khác sắp bắt đầu...</p>
                             <div class="flex flex-col sm:flex-row gap-3 mt-auto">
                                 <a href="#" class="read-button" aria-disabled="true">
                                     <i class="fas fa-clock"></i> Sắp ra mắt
                                 </a>
                                  <a href="#" class="read-button english-button" aria-disabled="true">
                                     <i class="fas fa-clock"></i> Coming Soon
                                 </a>
                             </div>
                         </div>
                     </div>

                </div> </div> </div> </div> <footer id="footer-placeholder">
        <div class="bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-center p-4 animate-pulse">
            Đang tải footer...
        </div>
    </footer>

    <script>
        function toggleDarkMode() {
            const isDarkMode = document.documentElement.classList.toggle("dark");
            localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');
        }

        if (localStorage.getItem('darkMode') === 'enabled' || (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add("dark");
        } else {
             document.documentElement.classList.remove("dark");
        }

        document.addEventListener('DOMContentLoaded', function() {
            const headerPlaceholder = document.getElementById('header-placeholder');
            const footerPlaceholder = document.getElementById('footer-placeholder');
            const headerPath = '_header.html';
            const footerPath = '_footer.html';

            function handleFetchError(error, placeholderElement, type) {
                let errorMessage = `<i class="fas fa-exclamation-triangle mr-2"></i> Lỗi tải ${type}.`;
                let errorDetails = ` (${error.message})`;

                if (error instanceof TypeError && error.message.includes('Failed to parse URL') || error.message.includes('Failed to fetch')) {
                     if(window.location.protocol === 'file:') {
                         errorMessage = `<i class="fas fa-exclamation-circle mr-2"></i> <strong>Không thể tải ${type} trực tiếp từ file.</strong><br>Vui lòng chạy trang web này qua một máy chủ cục bộ (local server) để tính năng fetch hoạt động.`;
                         errorDetails = "";
                     } else {
                          errorMessage = `<i class="fas fa-exclamation-triangle mr-2"></i> Lỗi mạng khi tải ${type}. Vui lòng kiểm tra kết nối và Console (F12).`;
                     }

                } else if (error.message.includes('HTTP error')) {
                     errorMessage = `<i class="fas fa-exclamation-triangle mr-2"></i> Lỗi tải ${type}. Không tìm thấy file hoặc lỗi máy chủ. Vui lòng kiểm tra đường dẫn file và Console (F12).`;
                } else {
                     errorMessage = `<i class="fas fa-exclamation-triangle mr-2"></i> Lỗi không xác định khi tải ${type}. Vui lòng kiểm tra Console (F12).`;
                }

                placeholderElement.innerHTML = `<div class="fetch-error-message ${type}-error">${errorMessage}${errorDetails}</div>`;
            }

            if (headerPlaceholder) {
                fetch(headerPath)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error fetching header! Status: ${response.status} ${response.statusText}`);
                        }
                        return response.text();
                    })
                    .then(data => {
                        headerPlaceholder.innerHTML = data;
                        initializeHeaderScriptsIfNeeded();
                    })
                    .catch(error => {
                        handleFetchError(error, headerPlaceholder, 'header');
                    });
            }

            if (footerPlaceholder) {
                fetch(footerPath)
                    .then(response => {
                        if (!response.ok) {
                             throw new Error(`HTTP error fetching footer! Status: ${response.status} ${response.statusText}`);
                         }
                        return response.text();
                     })
                    .then(data => {
                        footerPlaceholder.innerHTML = data;
                        initializeFooterScriptsIfNeeded();
                     })
                    .catch(error => {
                         handleFetchError(error, footerPlaceholder, 'footer');
                     });
            }

        });

        function initializeHeaderScriptsIfNeeded() {
            try {
                 const mobileMenuButton = document.getElementById('mobile-menu-button');
                 if (mobileMenuButton) {
                 }
             } catch (e) {
             }
        }

        function initializeFooterScriptsIfNeeded() {
             try {
                const footerElement = document.getElementById('footer-placeholder');
                if (footerElement) {
                    const currentYearSpan = footerElement.querySelector('#current-year');
                    if (currentYearSpan) {
                        currentYearSpan.textContent = new Date().getFullYear();
                    }
                }
             } catch (e) {
             }
        }

    </script>

</body>
</html>