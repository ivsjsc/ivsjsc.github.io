<header class="bg-white shadow-md sticky top-0 z-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <div class="flex-shrink-0">
                <a href="/index.html" class="flex items-center">
                    <img class="h-10 w-auto" src="/images/ivs-logo-BrainOnly.png" alt="IVS Logo">
                    <span class="ml-2 text-xl font-bold text-gray-800" data-translate="IVS Academy">IVS Academy</span>
                </a>
            </div>

            <nav class="hidden lg:flex space-x-4 xl:space-x-6">
                <a href="/index.html" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" data-translate="home">Trang chủ</a>

                <div class="relative group">
                    <button type="button" class="text-gray-700 group-hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium inline-flex items-center">
                        <span data-translate="about_us">Về chúng tôi</span>
                        <svg class="ml-2 -mr-1 h-5 w-5 text-gray-400 group-hover:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    <div class="absolute z-10 -ml-4 mt-3 transform px-2 w-screen max-w-xs sm:px-0 lg:ml-0 lg:left-1/2 lg:-translate-x-1/2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 ease-in-out">
                        <div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden">
                            <div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8">
                                <a href="/about.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="about_ivs">Về IVS</a>
                                <a href="/Pages/psb_introduction.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="psb_program">Chương trình PSB</a>
                                <a href="/Pages/careervn.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="careers">Tuyển dụng</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="relative group">
                    <button type="button" class="text-gray-700 group-hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium inline-flex items-center">
                        <span data-translate="services">Dịch vụ</span>
                        <svg class="ml-2 -mr-1 h-5 w-5 text-gray-400 group-hover:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    <div class="absolute z-10 -ml-4 mt-3 transform px-2 w-screen max-w-md sm:px-0 lg:ml-0 lg:left-1/2 lg:-translate-x-1/2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 ease-in-out">
                        <div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden">
                            <div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8 lg:grid-cols-2">
                                <a href="/Pages/ivslanguages.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="ivs_languages">IVS Languages</a>
                                <a href="/Pages/steambyivs.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="steam_by_ivs">STEAM by IVS</a>
                                <a href="/Pages/ivslifeminds.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="ivs_lifeminds">IVS LifeMinds</a>
                                <a href="/Pages/ivsmedia.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="ivs_media">IVS Media</a>
                                <a href="/Pages/ivscelestech.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="ivs_celestech">IVS CelésTech</a>
                                <a href="/Pages/consulting.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="consulting_services">Tư vấn giáo dục</a>
                                 <a href="/Pages/foreign-teacher-services.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="foreign_teacher_services">Cung cấp giáo viên nước ngoài</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="relative group">
                    <button type="button" class="text-gray-700 group-hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium inline-flex items-center">
                        <span data-translate="education_links">Liên kết đào tạo</span>
                        <svg class="ml-2 -mr-1 h-5 w-5 text-gray-400 group-hover:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    <div class="absolute z-10 -ml-4 mt-3 transform px-2 w-screen max-w-xs sm:px-0 lg:ml-0 lg:left-1/2 lg:-translate-x-1/2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 ease-in-out">
                        <div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden">
                            <div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8">
                                <a href="/Pages/lkmamnon.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="kindergarten_links">Mầm non</a>
                                <a href="/Pages/lktieuhoc.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="primary_links">Tiểu học</a>
                                <a href="/Pages/lkthcsthpt.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="secondary_links">THCS & THPT</a>
                                <a href="/Pages/lkttnn.html" class="block p-3 rounded-md hover:bg-gray-50" data-translate="language_center_links">Trung tâm Ngoại ngữ</a>
                            </div>
                        </div>
                    </div>
                </div>

                <a href="/news-archive.html" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" data-translate="news">Tin tức</a>
                <a href="/gallery.html" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" data-translate="gallery">Thư viện</a>
                <a href="/contact.html" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" data-translate="contact">Liên hệ</a>
            </nav>

            <div class="flex items-center">
                <div class="relative mr-2 sm:mr-4">
                    <button type="button" id="language-switcher-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500" aria-expanded="false">
                        <span class="sr-only" data-translate="change_language">Đổi ngôn ngữ</span>
                        <img id="current-lang-flag" src="/images/flags/vi.svg" alt="Vietnamese Flag" class="h-5 w-5">
                    </button>
                    <div id="language-options" class="hidden origin-top-right absolute right-0 mt-2 w-32 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none py-1">
                        <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 language-option" data-lang="vi">
                            <img src="/images/flags/vi.svg" alt="Vietnamese Flag" class="h-4 w-4 mr-2"> <span data-translate="vietnamese">Tiếng Việt</span>
                        </a>
                        <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 language-option" data-lang="en">
                            <img src="/images/flags/en.svg" alt="English Flag" class="h-4 w-4 mr-2"> <span data-translate="english">English</span>
                        </a>
                    </div>
                </div>

                <div class="lg:hidden">
                    <button type="button" id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only" data-translate="open_main_menu">Mở menu chính</span>
                        <svg id="menu-icon-open" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                        <svg id="menu-icon-close" class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="lg:hidden hidden" id="mobile-menu">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
            <a href="/index.html" class="text-gray-700 hover:bg-gray-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium" data-translate="home">Trang chủ</a>

            <div>
                <button type="button" class="w-full text-left text-gray-700 hover:bg-gray-50 hover:text-blue-600 flex items-center justify-between px-3 py-2 rounded-md text-base font-medium mobile-dropdown-toggle">
                    <span data-translate="about_us">Về chúng tôi</span>
                    <svg class="ml-2 h-5 w-5 transform transition-transform duration-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden mt-1 space-y-1 pl-5">
                    <a href="/about.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="about_ivs">Về IVS</a>
                    <a href="/Pages/psb_introduction.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="psb_program">Chương trình PSB</a>
                    <a href="/Pages/careervn.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="careers">Tuyển dụng</a>
                </div>
            </div>

            <div>
                <button type="button" class="w-full text-left text-gray-700 hover:bg-gray-50 hover:text-blue-600 flex items-center justify-between px-3 py-2 rounded-md text-base font-medium mobile-dropdown-toggle">
                    <span data-translate="services">Dịch vụ</span>
                     <svg class="ml-2 h-5 w-5 transform transition-transform duration-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden mt-1 space-y-1 pl-5">
                    <a href="/Pages/ivslanguages.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="ivs_languages">IVS Languages</a>
                    <a href="/Pages/steambyivs.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="steam_by_ivs">STEAM by IVS</a>
                    <a href="/Pages/ivslifeminds.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="ivs_lifeminds">IVS LifeMinds</a>
                    <a href="/Pages/ivsmedia.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="ivs_media">IVS Media</a>
                    <a href="/Pages/ivscelestech.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="ivs_celestech">IVS CelésTech</a>
                    <a href="/Pages/consulting.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="consulting_services">Tư vấn giáo dục</a>
                    <a href="/Pages/foreign-teacher-services.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="foreign_teacher_services">Cung cấp giáo viên nước ngoài</a>
                </div>
            </div>

            <div>
                <button type="button" class="w-full text-left text-gray-700 hover:bg-gray-50 hover:text-blue-600 flex items-center justify-between px-3 py-2 rounded-md text-base font-medium mobile-dropdown-toggle">
                    <span data-translate="education_links">Liên kết đào tạo</span>
                     <svg class="ml-2 h-5 w-5 transform transition-transform duration-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden mt-1 space-y-1 pl-5">
                    <a href="/Pages/lkmamnon.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="kindergarten_links">Mầm non</a>
                    <a href="/Pages/lktieuhoc.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="primary_links">Tiểu học</a>
                    <a href="/Pages/lkthcsthpt.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="secondary_links">THCS & THPT</a>
                    <a href="/Pages/lkttnn.html" class="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-blue-600" data-translate="language_center_links">Trung tâm Ngoại ngữ</a>
                </div>
            </div>

            <a href="/news-archive.html" class="text-gray-700 hover:bg-gray-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium" data-translate="news">Tin tức</a>
            <a href="/gallery.html" class="text-gray-700 hover:bg-gray-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium" data-translate="gallery">Thư viện</a>
            <a href="/contact.html" class="text-gray-700 hover:bg-gray-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium" data-translate="contact">Liên hệ</a>
        </div>
        <div class="border-t border-gray-200 pt-4 pb-3">
             <p class="text-center text-xs text-gray-500" data-translate="ivs_global_statement_short">
                IVS – Tư duy chiến lược, Hành động thực tiễn, Giá trị toàn cầu.
            </p>
        </div>
    </div>
</header>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIconOpen = document.getElementById('menu-icon-open');
    const menuIconClose = document.getElementById('menu-icon-close');

    if (mobileMenuButton) {
        mobileMenuButton.addEventListener('click', () => {
            const expanded = mobileMenuButton.getAttribute('aria-expanded') === 'true' || false;
            mobileMenuButton.setAttribute('aria-expanded', !expanded);
            mobileMenu.classList.toggle('hidden');
            menuIconOpen.classList.toggle('hidden');
            menuIconOpen.classList.toggle('block');
            menuIconClose.classList.toggle('hidden');
            menuIconClose.classList.toggle('block');
        });
    }

    // Mobile dropdown toggles
    const mobileDropdownToggles = document.querySelectorAll('.mobile-dropdown-toggle');
    mobileDropdownToggles.forEach(button => {
        button.addEventListener('click', () => {
            const dropdownContent = button.nextElementSibling;
            const arrowIcon = button.querySelector('svg');
            if (dropdownContent) {
                dropdownContent.classList.toggle('hidden');
            }
            if (arrowIcon) {
                arrowIcon.classList.toggle('rotate-180');
            }
        });
    });

    // Language switcher
    const langButton = document.getElementById('language-switcher-button');
    const langOptions = document.getElementById('language-options');
    const currentLangFlag = document.getElementById('current-lang-flag');
    const languageOptionLinks = document.querySelectorAll('.language-option');

    if (langButton && langOptions) {
        langButton.addEventListener('click', (event) => {
            event.stopPropagation(); // Prevent click from bubbling up to document
            langOptions.classList.toggle('hidden');
        });

        // Hide dropdown if clicked outside
        document.addEventListener('click', (event) => {
            if (!langButton.contains(event.target) && !langOptions.contains(event.target)) {
                langOptions.classList.add('hidden');
            }
        });
    }
    
    // Persist and set language based on localStorage
    const savedLang = localStorage.getItem('language') || 'vi';
    if (currentLangFlag) {
        currentLangFlag.src = `/images/flags/${savedLang}.svg`;
        currentLangFlag.alt = savedLang === 'vi' ? 'Vietnamese Flag' : 'English Flag';
    }

    if (languageOptionLinks.length > 0) {
        languageOptionLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const lang = this.getAttribute('data-lang');
                localStorage.setItem('language', lang);
                if (currentLangFlag) {
                    currentLangFlag.src = `/images/flags/${lang}.svg`;
                    currentLangFlag.alt = lang === 'vi' ? 'Vietnamese Flag' : 'English Flag';
                }
                langOptions.classList.add('hidden');
                // Assuming you have a function to update text content based on language
                if (typeof window.updateLanguageContent === 'function') {
                    window.updateLanguageContent(lang);
                } else {
                    console.warn('window.updateLanguageContent function not found. Page will reload for language change.');
                    location.reload(); // Fallback to reload if dynamic update isn't available
                }
            });
        });
    }
});
</script>
