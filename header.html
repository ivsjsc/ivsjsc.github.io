<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IVS JSC Header - Orange Theme - Fixed Visibility</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- Theme Variables (Orange Header Theme) --- */
        :root {
            --header-bg: #f97316; /* orange-600 */
            --header-hover-bg: #ea580c; /* orange-700 */
            --header-text: white;
            --submenu-bg: white;
            --submenu-text: #1f2937; /* gray-800 */
            --submenu-hover-bg: #f3f4f6; /* gray-100 */
            --submenu-hover-text: #2563eb; /* blue-600 */
            --submenu-border: #e5e7eb; /* gray-200 */
            --mobile-menu-bg: #f9fafb; /* gray-50 */
            --mobile-menu-text: #374151; /* gray-700 */
            --mobile-menu-hover-bg: #ffedd5; /* orange-100 (Mobile hover) */
            --mobile-menu-hover-text: #c2410c; /* orange-700 */
            --mobile-menu-border: #e5e7eb; /* gray-200 */
            --cta-bg: #2563eb; /* blue-600 (Nút CTA màu xanh) */
            --cta-hover-bg: #1d4ed8; /* blue-700 */
            --cta-text: white;
            --header-height-initial: 4rem; /* 64px */
            --header-height-shrink: 3.5rem; /* 56px */
            --logo-height-initial: 2.5rem; /* 40px */
            --logo-height-shrink: 2rem; /* 32px */
        }

        /* Áp dụng background header */
        #navbar {
            background-color: var(--header-bg);
            height: var(--header-height-initial);
        }

        /* --- Main Menu Item Styling --- */
        .main-menu-item .nav-link {
            color: var(--header-text);
            white-space: nowrap;
            transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
            padding: 0.5rem 0.75rem; /* py-2 px-3 */
            font-size: 0.875rem; /* text-sm */
            font-weight: 600; /* font-semibold */
            border-radius: 0.375rem; /* rounded-md */
            line-height: 1.25rem; /* leading-5 */
        }
        /* Arrow color in desktop dropdown buttons */
        .main-menu-item > button svg {
            color: #fdba74; /* orange-300 */
            transition: color 0.15s ease-in-out;
        }
        .main-menu-item > button.group:hover svg {
            color: white; /* Arrow color on button hover */
        }
         /* Hover effect cho main menu items */
         .main-menu-item > a.nav-link:hover,
         .main-menu-item > button.nav-link:hover {
             background-color: var(--header-hover-bg);
         }

        /* --- Desktop Submenu Styles (Dùng CSS Variable) --- */
        .submenu {
            background-color: var(--submenu-bg);
            border: 1px solid var(--submenu-border);
            position: absolute;
            z-index: 50;
            margin-top: 0.25rem; /* mt-1 */
            border-radius: 0.375rem; /* rounded-md */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); /* shadow-lg */
            padding-top: 0.25rem; /* py-1 */
            padding-bottom: 0.25rem;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px) scale(0.95);
            transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease;
        }
        /* Hiển thị submenu khi hover group cha */
        .main-menu-item:hover > .submenu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }
        /* Link và Button trong Submenu */
        .submenu a, .submenu button {
            color: var(--submenu-text);
            padding: 0.5rem 1rem; /* py-2 px-4 */
            display: block;
            width: 100%;
            text-align: left;
            font-size: 0.875rem; /* text-sm */
            border-radius: 0.375rem; /* rounded-md inside submenu */
            transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
            background: none; /* Đảm bảo không có nền mặc định */
            border: none; /* Đảm bảo không có border mặc định */
            cursor: pointer;
        }
        .submenu a:hover, .submenu button:hover {
            background-color: var(--submenu-hover-bg);
            color: var(--submenu-hover-text);
        }
        .submenu hr { border-color: var(--submenu-border); }

        /* Nested Submenu (CSS Variable & Tailwind group/sub hover) */
        .sub-submenu-container { position: relative; }
        .sub-submenu-container > button svg { color: #6b7280; /* gray-500 */}
        .sub-submenu-container > button:hover svg { color: var(--submenu-hover-text); }
        .sub-submenu {
            position: absolute;
            top: -0.25rem; /* slightly overlap parent item */
            left: 100%;
            margin-left: 0.25rem; /* ml-1 */
            background-color: var(--submenu-bg);
            border: 1px solid var(--submenu-border);
            border-radius: 0.375rem; /* rounded-md */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); /* shadow-lg */
            padding-top: 0.25rem; /* py-1 */
            padding-bottom: 0.25rem;
            z-index: 60;
            opacity: 0;
            visibility: hidden;
            transform: translateX(-10px) scale(0.95);
            transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease;
            /* Visibility controlled by Tailwind group-hover/sub in HTML */
        }
         /* Hiển thị sub-submenu khi hover group/sub cha */
         .sub-submenu-container:hover > .sub-submenu {
             opacity: 1;
             visibility: visible;
             transform: translateX(0) scale(1);
         }
        /* Link và Button trong Sub-Submenu */
        .sub-submenu a, .sub-submenu button {
            color: var(--submenu-text); /* Consistent text color */
             padding: 0.5rem 1rem;
             font-size: 0.875rem;
             border-radius: 0.375rem;
        }
        .sub-submenu a:hover, .sub-submenu button:hover {
            background-color: var(--submenu-hover-bg);
            color: var(--submenu-hover-text);
        }

        /* --- Mobile Menu Styles --- */
        #mobile-menu-panel {
            background-color: var(--mobile-menu-bg);
            color: var(--mobile-menu-text);
            border-left: 1px solid var(--mobile-menu-border);
        }
        #mobile-header, #mobile-footer {
             border-color: var(--mobile-menu-border);
        }
        #mobile-menu-panel .nav-link,
        #mobile-menu-panel .mobile-submenu-toggle {
            padding: 0.65rem 1rem; /* Adjusted padding */
            display: block;
            width: 100%;
            text-align: left;
            border-radius: 0.375rem; /* rounded-md */
            transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
            font-size: 0.9375rem; /* Slightly larger base font */
        }
        #mobile-menu-panel .nav-link:hover,
        #mobile-menu-panel .mobile-submenu-toggle:hover {
            background-color: var(--mobile-menu-hover-bg);
            color: var(--mobile-menu-hover-text);
        }
        /* Nút toggle chính trong mobile menu */
        #mobile-menu-panel .mobile-menu-item > button.mobile-submenu-toggle {
            font-weight: 500; /* font-medium */
        }
        /* Link/button trong submenu mobile */
        #mobile-menu-panel .mobile-submenu a,
        #mobile-menu-panel .mobile-submenu button {
            font-size: 0.875rem; /* text-sm */
            color: #4b5563; /* gray-600 */
            padding: 0.5rem 1rem; /* py-2 px-4 */
             border-radius: 0.375rem;
        }
         #mobile-menu-panel .mobile-submenu a:hover,
         #mobile-menu-panel .mobile-submenu button:hover {
              background-color: var(--mobile-menu-hover-bg);
              color: var(--mobile-menu-hover-text);
         }
         /* Link/button trong sub-submenu mobile */
         #mobile-menu-panel .mobile-submenu .mobile-submenu a,
         #mobile-menu-panel .mobile-submenu .mobile-submenu button {
              font-size: 0.8125rem; /* smaller */
              color: #6b7280; /* gray-500 */
              padding: 0.4rem 1rem; /* py-1.5 px-4 */
               border-radius: 0.375rem;
         }
          #mobile-menu-panel .mobile-submenu .mobile-submenu a:hover,
          #mobile-menu-panel .mobile-submenu .mobile-submenu button:hover {
               background-color: var(--mobile-menu-hover-bg);
               color: var(--mobile-menu-hover-text);
          }

        #mobile-menu-panel hr { border-color: var(--mobile-menu-border); }

        /* Mobile arrow styling */
        .mobile-menu-item .submenu-arrow {
            transition: transform 0.3s ease-in-out;
            color: #9ca3af; /* gray-400 */
        }
        .mobile-menu-item button:hover .submenu-arrow {
            color: var(--mobile-menu-hover-text);
        }
        .mobile-menu-item.open > button .submenu-arrow {
            transform: rotate(90deg);
            color: var(--mobile-menu-hover-text); /* Keep arrow colored when open */
        }
        /* Mobile submenu transition */
        .mobile-submenu {
            transition: max-height 0.3s ease-in-out;
            overflow: hidden;
            max-height: 0;
            margin-top: 0.25rem; /* mt-1 */
            background-color: #f9fafb; /* gray-50 or slightly different */
            border-radius: 0.375rem; /* rounded-md */
        }
         /* JS sẽ thêm class 'open' vào .mobile-menu-item để mở */
         .mobile-menu-item.open > .mobile-submenu {
              max-height: 1000px; /* Set a large max-height to allow transition */
         }
        /* Nested mobile submenu style */
         .mobile-submenu .mobile-submenu {
             padding-left: 0.75rem; /* pl-3 */
             margin-left: 0.5rem; /* ml-2 */
             border-left: 2px solid #fed7aa; /* orange-200 border */
             background-color: white; /* Slightly different background */
         }

        /* --- Language Dropdown Styles --- */
        .language-dropdown-content { display: none; } /* Hidden by default */
        .language-dropdown.open .language-dropdown-content { display: block; } /* JS adds 'open' */

        /* Desktop Language Dropdown */
        #desktop-language-dropdown .language-dropdown-content {
            background-color: var(--submenu-bg);
            border: 1px solid var(--submenu-border);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05); /* Lighter shadow */
            border-radius: 0.375rem;
        }
        #desktop-language-dropdown .lang-button {
            color: var(--submenu-text);
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            border-radius: 0.375rem; /* Add border-radius */
        }
        #desktop-language-dropdown .lang-button:hover {
            background-color: var(--submenu-hover-bg);
            color: var(--submenu-hover-text);
        }
        /* Style for disabled (active) language button - Desktop */
        #desktop-language-dropdown .lang-button:disabled {
            background-color: var(--submenu-hover-bg); /* gray-100 */
            color: var(--submenu-hover-text); /* blue-600 */
            opacity: 1;
            cursor: default;
            font-weight: 500; /* medium */
        }
        #desktop-language-dropdown .dropdown-toggle svg {
            transition: transform 0.2s ease-in-out;
        }
        #desktop-language-dropdown.open .dropdown-toggle svg {
            transform: rotate(180deg);
        }

        /* Mobile Language Dropdown */
        #mobile-footer { background-color: #f3f4f6; } /* gray-100 footer */
        #mobile-language-dropdown .language-dropdown-content {
            position: static; /* Not absolute in mobile panel */
            box-shadow: none;
            margin-top: 0.5rem; /* space above */
            background-color: white;
            border-radius: 0.375rem;
            border: 1px solid var(--mobile-menu-border);
            padding: 0.5rem 0;
        }
        #mobile-language-dropdown .dropdown-toggle {
            color: var(--mobile-menu-text);
            font-weight: 500; /* medium */
            font-size: 0.9375rem;
        }
        #mobile-language-dropdown .dropdown-toggle:hover {
            background-color: var(--mobile-menu-hover-bg);
            color: var(--mobile-menu-hover-text);
        }
        #mobile-language-dropdown .lang-button {
            color: var(--submenu-text);
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            border-radius: 0.375rem; /* Add border-radius */
        }
        #mobile-language-dropdown .lang-button:hover {
            background-color: var(--submenu-hover-bg);
            color: var(--submenu-hover-text);
        }
        /* Style for disabled (active) language button - Mobile */
        #mobile-language-dropdown .lang-button:disabled {
            background-color: var(--mobile-menu-hover-bg); /* orange-100 */
            color: var(--mobile-menu-hover-text); /* orange-700 */
            opacity: 1;
            cursor: default;
            font-weight: 500; /* medium */
        }

        /* --- Header Shrink Styles --- */
        #navbar {
             transition: height 0.3s ease-in-out, background-color 0.3s ease-in-out; /* Add height transition */
        }
        #navbar.shrink {
             height: var(--header-height-shrink);
             box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); /* shadow-md */
             /* Optionally change background on shrink */
             /* background-color: #c2410c; */ /* darker orange */
        }
        #navbar .logo-img {
             transition: height 0.3s ease-in-out;
             height: var(--logo-height-initial);
        }
         #navbar.shrink .logo-img {
              height: var(--logo-height-shrink);
         }
         /* Adjust padding/font-size of links on shrink */
         #navbar.shrink .nav-link {
              padding-top: 0.375rem; /* py-1.5 */
              padding-bottom: 0.375rem;
              font-size: 0.8125rem; /* Slightly smaller text */
         }
         /* Adjust main flex container height on shrink */
         #navbar.shrink > nav > div { /* Targets the direct child div inside nav */
             height: var(--header-height-shrink);
         }

         /* --- Active Menu Item Highlighting (Added by JS) --- */
         /* Desktop Active Link/Button */
         .main-menu-item > a.nav-link.active-menu-item,
         .main-menu-item > button.nav-link.active-menu-item {
             background-color: var(--header-hover-bg) !important; /* Use hover color for active */
             /* box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); */
         }
         /* Desktop Active Parent Button */
         .main-menu-item > button.nav-link.active-parent-item {
              background-color: var(--header-hover-bg) !important;
              /* font-weight: 700; */ /* Optional: make parent bold too */
         }
         /* Desktop Active Submenu Link */
         .submenu a.active-menu-item,
         .submenu button.active-menu-item {
              background-color: #e0f2fe !important; /* light-blue-100 */
              color: #0ea5e9 !important; /* light-blue-500 */
              font-weight: 600 !important; /* semibold */
         }
         /* Desktop Active Sub-Submenu Parent Button */
         .sub-submenu-container > button.active-parent-item {
              background-color: var(--submenu-hover-bg) !important; /* gray-100 */
              color: var(--submenu-hover-text) !important; /* blue-600 */
         }

         /* Mobile Active Link/Button */
         #mobile-menu-panel .nav-link.active-menu-item,
         #mobile-menu-panel .mobile-submenu-toggle.active-menu-item {
              background-color: #fed7aa !important; /* orange-200 */
              color: #9a3412 !important; /* orange-800 */
              font-weight: 600 !important;
         }
         /* Mobile Active Parent Button */
         #mobile-menu-panel .mobile-submenu-toggle.active-parent-item {
              background-color: var(--mobile-menu-hover-bg) !important; /* orange-100 */
              color: var(--mobile-menu-hover-text) !important; /* orange-700 */
              font-weight: 600 !important; /* Make parent semibold */
         }
         /* Mobile Active Submenu Link */
         #mobile-menu-panel .mobile-submenu a.active-menu-item,
         #mobile-menu-panel .mobile-submenu button.active-menu-item {
              background-color: #fed7aa !important; /* orange-200 */
              color: #9a3412 !important; /* orange-800 */
              font-weight: 600 !important;
         }
          /* Mobile Active Sub-Submenu Link */
         #mobile-menu-panel .mobile-submenu .mobile-submenu a.active-menu-item,
         #mobile-menu-panel .mobile-submenu .mobile-submenu button.active-menu-item {
              background-color: #fecaca !important; /* red-200 - Adjust if needed */
              color: #b91c1c !important; /* red-700 - Adjust if needed */
              font-weight: 600 !important;
         }

    </style>
</head>
<body class="bg-gray-100 pt-[var(--header-height-initial)]">

<header id="navbar" class="text-white shadow-md fixed top-0 left-0 right-0 z-50 transition-all duration-300">
    <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-[var(--header-height-initial)] transition-all duration-300">
            <div class="flex-shrink-0">
                <a href="index.html" class="flex items-center">
                    <img class="w-auto rounded-md logo-img" src="images/logo/logo1.png" alt="IVS JSC Logo" data-lang-key="logo_alt" onerror="this.onerror=null; this.src='images/logo/logo.png'; this.onerror=null; this.src='https://placehold.co/150x40/ffffff/F97316?text=IVS+Logo';">
                </a>
            </div>

            <div class="lg:flex lg:items-center lg:space-x-4 xl:space-x-6 lg:flex-nowrap">
                <ul id="menu-items" class="flex items-center space-x-1 xl:space-x-2">
                    <li class="main-menu-item">
                        <a href="index.html" class="nav-link" data-lang-key="menu_home">Trang chủ</a>
                    </li>
                    <li class="relative main-menu-item group">
                        <button type="button" aria-haspopup="true" aria-expanded="false" class="nav-link inline-flex items-center">
                            <span data-lang-key="menu_about">Giới thiệu</span>
                            <svg class="ml-1 h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
                        </button>
                        <div class="submenu w-56">
                            <a href="about.html" data-lang-key="menu_about_ivs">Về IVS JSC</a>
                            <a href="summercamp.html" data-lang-key="menu_summer_camp">Trại hè Quốc tế</a>
                            <a href="hocbong.html" data-lang-key="menu_scholarships">Học bổng</a>
                            <a href="hay-noi.html" data-lang-key="menu_hay_noi_club">Chương trình "Hãy Nói"</a>
                        </div>
                    </li>
                    <li class="relative main-menu-item group">
                        <button type="button" aria-haspopup="true" aria-expanded="false" class="nav-link inline-flex items-center">
                            <span data-lang-key="menu_training">Đào tạo</span>
                            <svg class="ml-1 h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
                        </button>
                        <div class="submenu w-64">
                            <div class="relative sub-submenu-container group/sub">
                                <button type="button" aria-haspopup="true" aria-expanded="false" class="w-full inline-flex items-center justify-between">
                                    <span data-lang-key="menu_educational_link">Liên kết giáo dục</span>
                                    <svg class="ml-1 h-4 w-4 rotate-[-90deg]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
                                </button>
                                <div class="sub-submenu w-56 hidden group-hover/sub:block">
                                    <a href="lkmamnon.html" data-lang-key="menu_link_preschool">Mầm non</a>
                                    <a href="lktieuhoc.html" data-lang-key="menu_link_primary">Tiểu học</a>
                                    <a href="lkthcsthpt.html" data-lang-key="menu_link_secondary">THCS & THPT</a>
                                    <a href="lkttnn.html" data-lang-key="menu_link_language_center">Trung tâm Ngoại ngữ</a>
                                </div>
                            </div>
                            <div class="relative sub-submenu-container group/sub">
                                <button type="button" aria-haspopup="true" aria-expanded="false" class="w-full inline-flex items-center justify-between">
                                    <span data-lang-key="menu_training_center">Tại trung tâm</span>
                                    <svg class="ml-1 h-4 w-4 rotate-[-90deg]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
                                </button>
                                <div class="sub-submenu w-56 hidden group-hover/sub:block">
                                    <a href="ivslanguages.html" data-lang-key="menu_training_language">Đào tạo ngoại ngữ</a>
                                    <a href="ivslifeminds.html" data-lang-key="menu_training_lifeskills">Đào tạo kỹ năng sống</a>
                                </div>
                            </div>
                            <div class="relative sub-submenu-container group/sub">
                                 <button type="button" aria-haspopup="true" aria-expanded="false" class="w-full inline-flex items-center justify-between">
                                     <span data-lang-key="menu_training_teacher">Đào tạo giáo viên</span>
                                     <svg class="ml-1 h-4 w-4 rotate-[-90deg]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
                                 </button>
                                 <div class="sub-submenu w-56 hidden group-hover/sub:block">
                                     <a href="teachertrain.html" data-lang-key="menu_training_teacher_vn">Giáo viên VN</a>
                                     <a href="fteachertrain.html" data-lang-key="menu_training_teacher_foreign">Giáo viên nước ngoài</a>
                                 </div>
                             </div>
                            <hr class="my-1">
                            <a href="bosungchungchi.html" data-lang-key="menu_training_teacher_cert">Bổ sung chứng chỉ NVSP</a>
                            <a href="english-placement.html" data-lang-key="menu_placement_test">Kiểm tra trình độ</a>
                        </div>
                    </li>
                    <li class="relative main-menu-item group">
                        <button type="button" aria-haspopup="true" aria-expanded="false" class="nav-link inline-flex items-center">
                             <span data-lang-key="menu_cooperation">Hợp tác</span>
                             <svg class="ml-1 h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
                        </button>
                         <div class="submenu w-64">
                            <a href="lien-ket-quoc-te.html" data-lang-key="menu_international_link">Liên kết Quốc tế</a>
                            <a href="lienminhiivsa.html" data-lang-key="menu_iivsa_alliance">Liên minh IIVSA</a>
                            <a href="hop-tac-dau-tu.html" data-lang-key="menu_investment_cooperation">Hợp tác Đầu tư</a>
                            <a href="philoinhuan.html" data-lang-key="menu_non_profit">Tổ chức Phi lợi nhuận</a>
                            <a href="tai-tro.html" data-lang-key="menu_sponsorship">Tài trợ</a>
                        </div>
                    </li>
                    <li class="relative main-menu-item group">
                         <button type="button" aria-haspopup="true" aria-expanded="false" class="nav-link inline-flex items-center">
                             <span data-lang-key="menu_services">Dịch vụ</span>
                             <svg class="ml-1 h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
                        </button>
                         <div class="submenu w-56">
                             <a href="tuvan.html" data-lang-key="menu_edu_consulting">Tư vấn Giáo dục</a>
                             <a href="thanhlaptrungtam.html" data-lang-key="menu_center_establishment">Thành lập Trung tâm</a>
                             <a href="webdesign.html" data-lang-key="menu_web_design">Thiết kế Web</a>
                             <a href="rnd-curriculum.html" data-lang-key="menu_design_edu">Thiết kế Học liệu</a>
                        </div>
                    </li>
                     <li class="relative main-menu-item group">
                         <button type="button" aria-haspopup="true" aria-expanded="false" class="nav-link inline-flex items-center">
                            <span data-lang-key="menu_healths">Sức khỏe</span>
                            <svg class="ml-1 h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
                        </button>
                         <div class="submenu w-56">
                            <a href="health-yensao.html" data-lang-key="menu_health_yensao">Yến sào Thanh Yến</a>
                            <a href="health-luvyoga.html" data-lang-key="menu_health_luvyoga">LuvYoga Lộc Hòa </a>
                        </div>
                    </li>
                    <li class="relative main-menu-item group">
                         <button type="button" aria-haspopup="true" aria-expanded="false" class="nav-link inline-flex items-center">
                            <span data-lang-key="menu_library">Thư viện</span>
                             <svg class="ml-1 h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
                        </button>
                         <div class="submenu w-56">
                             <a href="tailieugd.html" data-lang-key="menu_library_docs">Tài liệu giáo dục</a>
                             <a href="ivsmedia.html" data-lang-key="menu_library_media">IVSMedia</a>
                        </div>
                    </li>
                    <li class="relative main-menu-item group">
                         <button type="button" aria-haspopup="true" aria-expanded="false" class="nav-link inline-flex items-center">
                             <span data-lang-key="menu_recruitment">Tuyển dụng</span>
                             <svg class="ml-1 h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
                        </button>
                        <div class="submenu w-64">
                            <a href="careervn.html" data-lang-key="menu_recruitment_vn">Tuyển dụng nội địa (VN)</a>
                            <a href="careerf.html" data-lang-key="menu_recruitment_intl">Tuyển dụng quốc tế (Intl)</a>
                        </div>
                    </li>
                    <li class="main-menu-item">
                        <a href="contact.html" class="nav-link" data-lang-key="menu_contact">Liên hệ</a>
                    </li>
                </ul>

                <div class="flex items-center space-x-3 ml-4">
                    <button type="button" class="text-white p-2 rounded-full hover:bg-[var(--header-hover-bg)] focus:bg-[var(--header-hover-bg)] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[var(--header-bg)] focus:ring-orange-400 transition duration-150 ease-in-out">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        <span class="sr-only" data-lang-key="search">Tìm kiếm</span>
                    </button>
                     <a href="dangkytuvan.html" class="text-white px-4 py-1.5 rounded-full text-sm font-semibold transition duration-300 whitespace-nowrap hover:bg-[var(--cta-hover-bg)] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[var(--header-bg)] focus:ring-blue-400" style="background-color: var(--cta-bg); color: var(--cta-text);">
                        Đăng Ký Tư vấn
                     </a>
                     <div id="desktop-language-dropdown" class="language-dropdown relative border-l border-orange-400 pl-3 ml-1">
                        <button id="desktop-lang-toggle" type="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle text-sm font-semibold focus:outline-none inline-flex items-center px-2 py-1 rounded-md text-white hover:bg-[var(--header-hover-bg)] focus:bg-[var(--header-hover-bg)] focus:ring-2 focus:ring-offset-2 focus:ring-offset-[var(--header-bg)] focus:ring-orange-400 transition-colors duration-150">
                            <span id="desktop-current-lang">VN</span>
                             <svg class="ml-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                         </button>
                         <div id="desktop-lang-options" class="language-dropdown-content absolute right-0 mt-2 w-20 z-50">
                            <button type="button" class="lang-option lang-button block w-full text-left" data-lang="vi">VN</button>
                            <button type="button" class="lang-option lang-button block w-full text-left" data-lang="en">EN</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:hidden flex items-center">
                <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-orange-200 hover:text-white hover:bg-[var(--header-hover-bg)] focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-controls="mobile-menu-panel" aria-expanded="false">
                     <span class="sr-only" data-lang-key="open_main_menu">Mở menu chính</span>
                    <svg id="icon-menu" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                    </svg>
                    <svg id="icon-close" class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                         <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                     </svg>
                 </button>
             </div>
        </div>
    </nav>

    <div class="lg:hidden hidden fixed inset-0 bg-gray-800 bg-opacity-75 z-40 transition-opacity duration-300 ease-in-out opacity-0" id="mobile-menu-overlay"></div>

    <div id="mobile-menu-panel" class="lg:hidden hidden fixed top-0 right-0 h-full w-72 max-w-[80%] shadow-xl z-50 transform translate-x-full transition-transform duration-300 ease-in-out flex flex-col">
         <div id="mobile-header" class="pt-4 pb-3 px-4 border-b flex justify-between items-center flex-shrink-0">
             <a href="index.html" class="flex items-center">
                 <img class="h-8 w-auto rounded-sm" src="images/logo/logo.png" alt="IVS JSC Logo Mobile" data-lang-key="logo_alt" onerror="this.onerror=null; this.src='https://placehold.co/120x32/ea580c/ffffff?text=IVS';">
             </a>
             <button id="mobile-close-button" type="button" class="p-1 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500">
                 <span class="sr-only">Đóng menu</span>
                 <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                     <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                 </svg>
             </button>
         </div>
         <div class="px-2 pt-2 pb-3 space-y-1 overflow-y-auto flex-grow">
             <a href="index.html" class="nav-link block text-base font-medium" data-lang-key="menu_home">Trang chủ</a>
             <div class="mobile-menu-item">
                 <button type="button" aria-expanded="false" class="nav-link w-full flex justify-between items-center text-base mobile-submenu-toggle">
                     <span data-lang-key="menu_about">Giới thiệu</span>
                     <svg class="ml-1 h-5 w-5 transform submenu-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.19 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                 </button>
                 <div class="mobile-submenu pl-4 space-y-1">
                     <a href="about.html" class="nav-link block" data-lang-key="menu_about_ivs">Về IVS JSC</a>
                     <a href="summercamp.html" class="nav-link block" data-lang-key="menu_summer_camp">Trại hè Quốc tế</a>
                     <a href="hocbong.html" class="nav-link block" data-lang-key="menu_scholarships">Học bổng</a>
                     <a href="hay-noi.html" class="nav-link block" data-lang-key="menu_hay_noi_club">Chương trình "Hãy Nói"</a>
                 </div>
             </div>
              <div class="mobile-menu-item">
                 <button type="button" aria-expanded="false" class="nav-link w-full flex justify-between items-center text-base mobile-submenu-toggle">
                     <span data-lang-key="menu_training">Đào tạo</span>
                     <svg class="ml-1 h-5 w-5 transform submenu-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.19 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                 </button>
                 <div class="mobile-submenu pl-4 space-y-1">
                     <div class="mobile-menu-item">
                          <button type="button" aria-expanded="false" class="nav-link w-full flex justify-between items-center mobile-submenu-toggle">
                             <span data-lang-key="menu_educational_link">Liên kết giáo dục</span>
                             <svg class="ml-1 h-5 w-5 transform submenu-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.19 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                          </button>
                          <div class="mobile-submenu space-y-1">
                             <a href="lkmamnon.html" class="nav-link block" data-lang-key="menu_link_preschool">Mầm non</a>
                             <a href="lktieuhoc.html" class="nav-link block" data-lang-key="menu_link_primary">Tiểu học</a>
                             <a href="lkthcsthpt.html" class="nav-link block" data-lang-key="menu_link_secondary">THCS & THPT</a>
                             <a href="lkttnn.html" class="nav-link block" data-lang-key="menu_link_language_center">Trung tâm Ngoại ngữ</a>
                         </div>
                     </div>
                      <div class="mobile-menu-item">
                         <button type="button" aria-expanded="false" class="nav-link w-full flex justify-between items-center mobile-submenu-toggle">
                             <span data-lang-key="menu_training_center">Tại trung tâm</span>
                             <svg class="ml-1 h-5 w-5 transform submenu-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.19 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                         </button>
                          <div class="mobile-submenu space-y-1">
                             <a href="ivslanguages.html" class="nav-link block" data-lang-key="menu_training_language">Đào tạo ngoại ngữ</a>
                             <a href="ivslifeminds.html" class="nav-link block" data-lang-key="menu_training_lifeskills">Đào tạo kỹ năng sống</a>
                         </div>
                     </div>
                     <div class="mobile-menu-item">
                          <button type="button" aria-expanded="false" class="nav-link w-full flex justify-between items-center mobile-submenu-toggle">
                              <span data-lang-key="menu_training_teacher">Đào tạo giáo viên</span>
                              <svg class="ml-1 h-5 w-5 transform submenu-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.19 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                          </button>
                          <div class="mobile-submenu space-y-1">
                              <a href="teachertrain.html" class="nav-link block" data-lang-key="menu_training_teacher_vn">Giáo viên VN</a>
                              <a href="fteachertrain.html" class="nav-link block" data-lang-key="menu_training_teacher_foreign">Giáo viên nước ngoài</a>
                          </div>
                     </div>
                     <hr class="my-2">
                     <a href="bosungchungchi.html" class="nav-link block" data-lang-key="menu_training_teacher_cert">Bổ sung chứng chỉ NVSP</a>
                     <a href="english-placement.html" class="nav-link block" data-lang-key="menu_placement_test">Kiểm tra trình độ</a>
                 </div>
             </div>
             <div class="mobile-menu-item">
                  <button type="button" aria-expanded="false" class="nav-link w-full flex justify-between items-center text-base mobile-submenu-toggle">
                     <span data-lang-key="menu_cooperation">Hợp tác</span>
                     <svg class="ml-1 h-5 w-5 transform submenu-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.19 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                 </button>
                 <div class="mobile-submenu pl-4 space-y-1">
                      <a href="lien-ket-quoc-te.html" class="nav-link block" data-lang-key="menu_international_link">Liên kết Quốc tế</a>
                     <a href="lienminhiivsa.html" class="nav-link block" data-lang-key="menu_iivsa_alliance">Liên minh IIVSA</a>
                     <a href="hop-tac-dau-tu.html" class="nav-link block" data-lang-key="menu_investment_cooperation">Hợp tác Đầu tư</a>
                     <a href="philoinhuan.html" class="nav-link block" data-lang-key="menu_non_profit">Tổ chức Phi lợi nhuận</a>
                     <a href="tai-tro.html" class="nav-link block" data-lang-key="menu_sponsorship">Tài trợ</a>
                 </div>
             </div>
             <div class="mobile-menu-item">
                 <button type="button" aria-expanded="false" class="nav-link w-full flex justify-between items-center text-base mobile-submenu-toggle">
                     <span data-lang-key="menu_services">Dịch vụ</span>
                     <svg class="ml-1 h-5 w-5 transform submenu-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.19 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                 </button>
                 <div class="mobile-submenu pl-4 space-y-1">
                      <a href="tuvan.html" class="nav-link block" data-lang-key="menu_edu_consulting">Tư vấn Giáo dục</a>
                     <a href="thanhlaptrungtam.html" class="nav-link block" data-lang-key="menu_center_establishment">Thành lập Trung tâm</a>
                     <a href="webdesign.html" class="nav-link block" data-lang-key="menu_web_design">Thiết kế Web</a>
                     <a href="rnd-curriculum.html" class="nav-link block" data-lang-key="menu_design_edu">Thiết kế Học liệu</a>
                 </div>
             </div>
             <div class="mobile-menu-item">
                 <button type="button" aria-expanded="false" class="nav-link w-full flex justify-between items-center text-base mobile-submenu-toggle">
                     <span data-lang-key="menu_healths">Sức khỏe</span>
                     <svg class="ml-1 h-5 w-5 transform submenu-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.19 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                 </button>
                 <div class="mobile-submenu pl-4 space-y-1">
                     <a href="health-yensao.html" class="nav-link block" data-lang-key="menu_health_yensao">Yến sào Thanh Yến</a>
                     <a href="health-luvyoga.html" class="nav-link block" data-lang-key="menu_health_luvyoga">LuvYoga Lộc Hòa </a>
                 </div>
             </div>
             <div class="mobile-menu-item">
                 <button type="button" aria-expanded="false" class="nav-link w-full flex justify-between items-center text-base mobile-submenu-toggle">
                     <span data-lang-key="menu_library">Thư viện</span>
                     <svg class="ml-1 h-5 w-5 transform submenu-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.19 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                 </button>
                 <div class="mobile-submenu pl-4 space-y-1">
                      <a href="tailieugd.html" class="nav-link block" data-lang-key="menu_library_docs">Tài liệu giáo dục</a>
                     <a href="ivsmedia.html" class="nav-link block" data-lang-key="menu_library_media">IVSMedia</a>
                 </div>
             </div>
             <div class="mobile-menu-item">
                  <button type="button" aria-expanded="false" class="nav-link w-full flex justify-between items-center text-base mobile-submenu-toggle">
                      <span data-lang-key="menu_recruitment">Tuyển dụng</span>
                      <svg class="ml-1 h-5 w-5 transform submenu-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.19 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                  </button>
                 <div class="mobile-submenu pl-4 space-y-1">
                     <a href="careervn.html" class="nav-link block" data-lang-key="menu_recruitment_vn">Tuyển dụng nội địa (VN)</a>
                     <a href="careerf.html" class="nav-link block" data-lang-key="menu_recruitment_intl">Tuyển dụng quốc tế (Intl)</a>
                 </div>
             </div>
             <a href="contact.html" class="nav-link block text-base font-medium" data-lang-key="menu_contact">Liên hệ</a>
        </div>
         <div id="mobile-footer" class="px-4 py-3 border-t flex-shrink-0">
             <div id="mobile-language-dropdown" class="language-dropdown relative w-full">
                 <button id="mobile-lang-toggle" type="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle w-full flex justify-between items-center px-3 py-2 rounded-md text-base focus:outline-none">
                     <span id="mobile-current-lang">VN</span>
                     <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                 </button>
                 <div id="mobile-lang-options" class="language-dropdown-content hidden">
                     <button type="button" class="lang-option lang-button block w-full text-left" data-lang="vi">VN</button>
                     <button type="button" class="lang-option lang-button block w-full text-left" data-lang="en">EN</button>
                 </div>
             </div>
             </div>
    </div>
</header>

<main class="container mx-auto p-8">
    <h1 class="text-3xl font-bold mb-4">Nội dung trang ở đây</h1>
    <p class="mb-2">Đây là nội dung mẫu để minh họa chức năng header và padding của body.</p>
    <p class="mb-2">Cuộn xuống để xem hiệu ứng thu nhỏ header.</p>
    <div class="h-[200vh] bg-gray-200 mt-4 rounded flex items-center justify-center">
        <p class="text-gray-500">Khu vực nội dung rất cao</p>
    </div>
</main>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // --- Elements ---
        const navbar = document.getElementById('navbar');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenuPanel = document.getElementById('mobile-menu-panel');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        const mobileCloseButton = document.getElementById('mobile-close-button');
        const menuIcon = document.getElementById('icon-menu');
        const closeIcon = document.getElementById('icon-close');

        const desktopLangDropdown = document.getElementById('desktop-language-dropdown');
        const desktopLangToggle = document.getElementById('desktop-lang-toggle');
        const mobileLangDropdown = document.getElementById('mobile-language-dropdown');
        const mobileLangToggle = document.getElementById('mobile-lang-toggle');
        const langButtons = document.querySelectorAll('.lang-button');

        // --- Mobile Menu Toggle ---
        function toggleMobileMenu(open) {
             if (!mobileMenuPanel || !mobileMenuOverlay || !menuIcon || !closeIcon || !mobileMenuButton) return;
            const isOpen = typeof open === 'boolean' ? open : mobileMenuButton.getAttribute('aria-expanded') === 'false';

            if (isOpen) {
                mobileMenuPanel.classList.remove('hidden');
                mobileMenuOverlay.classList.remove('hidden');
                requestAnimationFrame(() => {
                    mobileMenuPanel.classList.remove('translate-x-full');
                    mobileMenuOverlay.classList.remove('opacity-0');
                    mobileMenuButton.setAttribute('aria-expanded', 'true');
                    menuIcon?.classList.add('hidden');
                    closeIcon?.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                });
            } else {
                mobileMenuPanel.classList.add('translate-x-full');
                mobileMenuOverlay.classList.add('opacity-0');
                mobileMenuButton.setAttribute('aria-expanded', 'false');
                menuIcon?.classList.remove('hidden');
                closeIcon?.classList.add('hidden');
                document.body.style.overflow = '';

                 const overlayTransitionHandler = () => {
                    if (mobileMenuButton.getAttribute('aria-expanded') === 'false') {
                        mobileMenuOverlay.classList.add('hidden');
                        mobileMenuPanel.classList.add('hidden');
                    }
                     mobileMenuOverlay.removeEventListener('transitionend', overlayTransitionHandler);
                 };
                 mobileMenuOverlay.removeEventListener('transitionend', overlayTransitionHandler);
                 mobileMenuOverlay.addEventListener('transitionend', overlayTransitionHandler, { once: true });

                 setTimeout(() => {
                    if (mobileMenuButton.getAttribute('aria-expanded') === 'false' && !mobileMenuOverlay.classList.contains('hidden')) {
                         console.warn("Mobile menu close fallback timer triggered.");
                         mobileMenuOverlay.classList.add('hidden');
                         mobileMenuPanel.classList.add('hidden');
                     }
                }, 350);
            }
        }

        if(mobileMenuButton) mobileMenuButton.addEventListener('click', () => toggleMobileMenu());
        if(mobileCloseButton) mobileCloseButton.addEventListener('click', () => toggleMobileMenu(false));
        if(mobileMenuOverlay) mobileMenuOverlay.addEventListener('click', () => toggleMobileMenu(false));

        if(mobileMenuPanel) {
            mobileMenuPanel.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', (e) => {
                    // Only close if it's a direct link within the main panel, not inside a submenu
                    if (!link.closest('.mobile-submenu')) {
                       toggleMobileMenu(false);
                    }
                 });
             });
        }

        // --- Mobile Submenu Toggle ---
        const mobileSubmenuToggles = document.querySelectorAll('#mobile-menu-panel .mobile-submenu-toggle');
        mobileSubmenuToggles.forEach(button => {
             const parentItem = button.closest('.mobile-menu-item');
             if (parentItem) {
                  const submenu = parentItem.querySelector(':scope > .mobile-submenu');
                  if (submenu) {
                       submenu.style.maxHeight = '0';
                       button.setAttribute('aria-expanded', 'false');
                  }
             }

            button.addEventListener('click', function(e) {
                e.stopPropagation();
                const parentItem = this.closest('.mobile-menu-item');
                if (!parentItem) return;
                const submenu = parentItem.querySelector(':scope > .mobile-submenu');
                if (!submenu) return;

                 const isOpen = parentItem.classList.contains('open');

                // Close siblings first
                const parentList = parentItem.parentNode;
                 if (parentList) {
                     Array.from(parentList.children).forEach(sibling => {
                          if (sibling !== parentItem && sibling.classList.contains('mobile-menu-item') && sibling.classList.contains('open')) {
                               sibling.classList.remove('open');
                               const siblingSubmenu = sibling.querySelector(':scope > .mobile-submenu');
                               if (siblingSubmenu) siblingSubmenu.style.maxHeight = '0';
                               sibling.querySelector('.mobile-submenu-toggle')?.setAttribute('aria-expanded', 'false');
                          }
                     });
                 }

                // Toggle current
                parentItem.classList.toggle('open', !isOpen);
                this.setAttribute('aria-expanded', !isOpen);

                if (!isOpen) {
                    submenu.style.maxHeight = submenu.scrollHeight + "px";
                     // Add timeout to reset max-height after transition for potential content changes
                     setTimeout(() => {
                         if (parentItem.classList.contains('open')) { // Check if still open
                             submenu.style.maxHeight = 'none'; // Allow content to dictate height
                         }
                     }, 300); // Match transition duration
                } else {
                    submenu.style.maxHeight = '0';
                    submenu.querySelectorAll('.mobile-menu-item.open').forEach(nestedOpenItem => {
                         nestedOpenItem.classList.remove('open');
                         const nestedSub = nestedOpenItem.querySelector(':scope > .mobile-submenu');
                         if (nestedSub) nestedSub.style.maxHeight = '0';
                         nestedOpenItem.querySelector('.mobile-submenu-toggle')?.setAttribute('aria-expanded', 'false');
                    });
                }
            });
        });

        // --- Language Dropdown Logic ---
        function toggleDropdown(dropdownElement, forceState) {
            if (!dropdownElement) return;
            const currentlyOpen = dropdownElement.classList.contains('open');
            const open = typeof forceState === 'boolean' ? forceState : !currentlyOpen;
            const toggleButton = dropdownElement.querySelector('.dropdown-toggle');

            dropdownElement.classList.toggle('open', open);
            if (toggleButton) {
                toggleButton.setAttribute('aria-expanded', open.toString());
            }
        }

        if(desktopLangToggle) {
            desktopLangToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleDropdown(desktopLangDropdown);
            });
        }

        if(mobileLangToggle) {
            mobileLangToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleDropdown(mobileLangDropdown);
            });
        }

        // Language Selection Logic
        langButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.stopPropagation();
                const selectedLang = this.getAttribute('data-lang');
                setLanguage(selectedLang); // Use a function to handle setting language
                // Close dropdowns
                if(desktopLangDropdown) toggleDropdown(desktopLangDropdown, false);
                if(mobileLangDropdown) toggleDropdown(mobileLangDropdown, false);
            });
        });

        // Close dropdowns on outside click
        window.addEventListener('click', function(event) {
            if (desktopLangDropdown && !desktopLangDropdown.contains(event.target)) {
                 toggleDropdown(desktopLangDropdown, false);
             }
            if (mobileLangDropdown && mobileLangDropdown.classList.contains('open') && !mobileLangDropdown.contains(event.target)) {
                  toggleDropdown(mobileLangDropdown, false);
             }
        });

        // --- Function to Set Language (UI Update + Placeholder for Logic) ---
        function setLanguage(lang) {
             const desktopCurrentLang = document.getElementById('desktop-current-lang');
             const mobileCurrentLang = document.getElementById('mobile-current-lang');
             if (desktopCurrentLang) desktopCurrentLang.textContent = lang.toUpperCase();
             if (mobileCurrentLang) mobileCurrentLang.textContent = lang.toUpperCase();
             langButtons.forEach(btn => {
                 btn.disabled = (btn.getAttribute('data-lang') === lang);
             });
             console.log('Selected language:', lang);
             // !!! Placeholder for actual language switching logic !!!
             // switchLanguage(lang); // This function would handle loading translations etc.
             // alert(`Language set to: ${lang.toUpperCase()}. Implement actual switching logic.`);
             // Update body attribute for potential CSS targeting
             document.documentElement.lang = lang;
         }

        // --- Set Initial Language State ---
        setLanguage('vi'); // Set default language on load

        // --- Header Shrink on Scroll ---
        let lastScrollTop = 0;
         window.addEventListener('scroll', function() {
             let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
             if (navbar) {
                 if (scrollTop > 50) {
                     navbar.classList.add('shrink');
                 } else {
                     navbar.classList.remove('shrink');
                 }
             }
             lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
         }, false);

         // --- Active Menu Highlighting (Placeholder - Needs real logic) ---
         function highlightActiveMenu() {
             const currentPage = window.location.pathname.split('/').pop() || 'index.html'; // Simple example
             const menuLinks = document.querySelectorAll('#navbar a.nav-link'); // Select all relevant links

             menuLinks.forEach(link => {
                 const linkPage = link.getAttribute('href').split('/').pop() || 'index.html';
                 const parentLi = link.closest('.main-menu-item, .mobile-menu-item');
                 const parentButton = link.closest('.submenu, .mobile-submenu')?.previousElementSibling; // Button controlling the submenu

                 // Reset active classes
                 link.classList.remove('active-menu-item');
                 parentLi?.classList.remove('active-parent'); // Custom class for parent LI if needed
                 parentButton?.classList.remove('active-parent-item'); // For button highlight

                 if (linkPage === currentPage) {
                     link.classList.add('active-menu-item');

                     // Highlight parent button if inside a submenu
                     if (parentButton && parentButton.matches('button.nav-link')) {
                          parentButton.classList.add('active-parent-item');
                          // Also highlight the top-level parent if nested deeper
                          const topLevelButton = parentButton.closest('.main-menu-item')?.querySelector('button.nav-link');
                          topLevelButton?.classList.add('active-parent-item');
                     } else if (parentLi && parentLi.classList.contains('main-menu-item')) {
                          // If it's a top-level link/button itself
                          const directButton = parentLi.querySelector(':scope > button.nav-link');
                          if (directButton === link || parentLi.querySelector(':scope > a.nav-link') === link) {
                              link.classList.add('active-menu-item'); // Re-apply if it's the button itself
                          }
                     }

                     // --- Mobile Menu Specific Highlighting ---
                     if (link.closest('#mobile-menu-panel')) {
                         let current = link;
                         while(current && current !== mobileMenuPanel) {
                              const parentMenuItem = current.closest('.mobile-menu-item');
                              if (parentMenuItem) {
                                   const toggle = parentMenuItem.querySelector(':scope > .mobile-submenu-toggle');
                                   if (toggle) {
                                        toggle.classList.add('active-parent-item');
                                        // Optionally auto-open parent submenus on page load if active item is inside
                                        // parentMenuItem.classList.add('open');
                                        // const sub = parentMenuItem.querySelector(':scope > .mobile-submenu');
                                        // if(sub) sub.style.maxHeight = sub.scrollHeight + 'px';
                                   }
                                   current = parentMenuItem.parentElement; // Move up
                              } else {
                                   break; // Exit loop if no more parent items found
                              }
                         }
                     }
                 }
             });
         }
         highlightActiveMenu(); // Call on page load

    });
</script>

</body>
</html>
