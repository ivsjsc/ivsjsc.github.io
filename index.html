<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="page_title_index">IVS JSC - Giáo dục, Công nghệ, Sức khỏe, Hợp tác Quốc tế</title>
    <meta name="description" content="IVS JSC - Tổ chức tiên phong tại Việt Nam trong lĩnh vực giáo dục (IVS Academy, IVS Kindergarten), EdTech (IVS Celestech), sức khỏe cộng đồng và hợp tác quốc tế." data-lang-key="meta_description_index">
    <meta name="keywords" content="IVS JSC, giáo dục, công nghệ giáo dục, EdTech, STEAM, sức khỏe, hợp tác quốc tế, Đồng Nai, IVS Academy, IVS Celestech, đào tạo ngoại ngữ, kỹ năng sống, IVS Games, memory match" data-lang-key="meta_keywords_index">
    <meta property="og:title" content="IVS JSC - Giáo dục, Công nghệ, Sức khỏe, Hợp tác Quốc tế" data-lang-key="og_title_index">
    <meta property="og:description" content="Khám phá các giải pháp toàn diện về đào tạo ngoại ngữ, STEAM, kỹ năng sống, EdTech, chăm sóc sức khỏe, trò chơi giáo dục và cơ hội hợp tác cùng IVS JSC." data-lang-key="og_description_index">
    <meta property="og:image" content="/images/logo/logo-192.png">
    <meta property="og:url" content="https://ivsacademy.edu.vn/index.html">
    <meta property="og:type" content="website">
    <meta name="author" content="IVS JSC">

    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/images/logo/logo-192.png">
    <link rel="manifest" href="/manifest.json">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"></noscript>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.tailwindcss.com?plugins=typography,forms,aspect-ratio"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        montserrat: ['Montserrat', 'sans-serif'], // Font for Memory Match game
                    },
                    colors: {
                        'primary': '#004080', 
                        'primary-dark': '#003366',
                        'secondary': '#ffc107', 
                        'secondary-dark': '#e0a800',
                        'header-orange': '#F97316', 
                        'ivs-neutral-900': '#111827',
                        'ivs-neutral-800': '#1f2937',
                        'ivs-neutral-700': '#374151',
                        'ivs-neutral-600': '#4B5563',
                        'ivs-neutral-500': '#6b7280',
                        'ivs-neutral-400':'#9ca3af',
                        'ivs-neutral-300': '#D1D5DB',
                        'ivs-neutral-200': '#e5e7eb',
                        'ivs-neutral-100': '#f3f4f6',
                        'ivs-neutral-50': '#f9fafb',
                        'purple-accent': '#8b5cf6',
                        'warning': '#f59e0b',
                        'blue-50': '#eff6ff',
                        'blue-100': '#dbeafe',
                        'blue-200': '#bfdbfe',
                        'blue-400': '#60a5fa',
                        'blue-500': '#3b82f6',
                        'blue-600': '#2563eb', 
                        'blue-700': '#1d4ed8',
                        'blue-800': '#1e40af',
                        'blue-900':'#1e3a8a',
                        'purple-100': '#f3e8ff',
                        'purple-500': '#a855f7',
                        'purple-600': '#9333ea',
                        'purple-700': '#7e2d87',
                        'purple-900':'#581c87',
                        'green-100': '#dcfce7',
                        'green-400':'#4ade80',
                        'green-500': '#22c55e',
                        'green-600': '#16a34a',
                        'green-900': '#14532d',
                        'yellow-100': '#fef9c3',
                        'yellow-400': '#facc15',
                        'yellow-500': '#eab308',
                        'yellow-600': '#ca8a04',
                        'yellow-900': '#713f12',
                        'red-100': '#fee2e2',
                        'red-400': '#f87171',
                        'red-500': '#ef4444',
                        'red-600': '#dc2626',
                        'red-900': '#7f1d1d',
                        'indigo-100': '#e0e7ff',
                        'indigo-400': '#818cf8',
                        'indigo-500': '#6366f1',
                        'indigo-600': '#4f46e5',
                        'indigo-900': '#312e81',
                        'teal-100': '#ccfbf1',
                        'teal-400': '#2dd4bf',
                        'teal-500': '#14b8a6',
                        'teal-900': '#0f766e',
                        'pink-100': '#fce7f3',
                        'pink-400': '#f472b6',
                        'pink-500': '#ec4899',
                        'pink-900': '#831843',
                        'orange-400': '#fb923c',
                        'orange-700':'#c2410c',
                        'slate-700': '#334155',
                        'slate-800': '#1e293b',
                        // Memory Game Specific Colors (can be adjusted)
                        'game-bg': '#f0f7ff',
                        'game-card-back': '#FFD700', // Gold
                        'game-card-text': '#003366', // IVS Dark Blue
                        'game-matched': '#28a745', // Green
                        'game-timer': '#c0392b' // Red
                    }
                }
            },
            plugins: [],
        }
    </script>

    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css"> 
    <link rel="stylesheet" href="/dist/output.css">
    <style>
        :root {
            --primary-color: #004080;
            --primary-dark-color: #003366;
            --secondary-color: #ffc107;
            --secondary-dark-color: #e0a800;
            --ivs-neutral-800-color: #1f2937;
            --ivs-neutral-700-color: #374151;
            --ivs-neutral-300-color: #D1D5DB;
            --ivs-neutral-200-color: #e5e7eb;
            --ivs-neutral-50-color: #f9fafb;
        }
        .hero-text-shadow {
            text-shadow: 1px 1px 3px rgba(0,0,0,0.6); 
        }
        .hero-content {
            position: relative;
            z-index: 2; 
            padding: 2rem 1rem; 
        }
        @media (min-width: 768px) {
            .hero-content {
                padding: 4rem 1rem;
            }
        }
         .hero-section-banner {
            min-height: 60vh; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
         @media (min-width: 768px) {
            .hero-section-banner {
                min-height: 70vh;
            }
        }
        .service-card, .testimonial-card, .education-level-card {
            transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
        }
        .service-card:hover, .testimonial-card:hover, .education-level-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1050;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s linear 0.3s, opacity 0.3s ease;
        }
        .modal.show {
            visibility: visible;
            opacity: 1;
            transition-delay: 0s;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            text-align: center;
            max-width: 400px;
            width: calc(100% - 2rem);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
         .dark .modal-content {
            background-color: var(--ivs-neutral-800-color);
        }
        .modal.show .modal-content {
            transform: scale(1);
        }
        .modal-content button {
            margin-top: 1.5rem;
        }
        .button-primary {
            background-color: var(--primary-color);
            color: white;
            padding: 0.65rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.3s ease;
            cursor: pointer;
            border: none;
        }
        .button-primary:hover {
            background-color: var(--primary-dark-color);
        }
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }
        .chatbot-button {
            width: 50px; 
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px; 
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, background-color 0.3s ease;
        }
        @media (min-width: 768px) {
             .chatbot-button {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
        }
        .chatbot-button:hover {
            transform: scale(1.05);
            background-color: var(--primary-dark-color);
        }
        .chatbot-window {
            width: calc(100vw - 40px); 
            max-width: 350px; 
            height: 70vh; 
            max-height: 500px;
            background-color: var(--ivs-neutral-50-color);
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            margin-bottom: 10px; 
            transform: translateY(10px);
            opacity: 0;
            visibility: hidden;
            transition: transform 0.3s ease, opacity 0.3s ease, visibility 0s linear 0.3s;
        }
        .chatbot-window.open {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
            transition-delay: 0s;
        }
        .chatbot-header {
            background-color: var(--primary-color);
            color: white;
            padding: 0.75rem 1rem; 
            font-size: 1rem; 
            font-weight: 600;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chatbot-header .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.25rem; 
            cursor: pointer;
            padding: 0.25rem;
        }
        .chatbot-messages {
            flex-grow: 1;
            padding: 0.75rem;
            overflow-y: auto;
            background-color: #ffffff;
            border-bottom: 1px solid var(--ivs-neutral-200-color);
        }
        .dark .chatbot-messages {
            background-color: var(--ivs-neutral-700-color);
            border-bottom-color: var(--ivs-neutral-600-color);
        }
        .message {
            margin-bottom: 0.5rem; 
            padding: 0.5rem 0.75rem; 
            border-radius: 8px; 
            max-width: 80%;
            word-wrap: break-word;
            line-height: 1.4; 
            font-size: 0.875rem; 
        }
        .message.user {
            background-color: theme('colors.blue-200');
            color: theme('colors.ivs-neutral-800');
            align-self: flex-end;
            margin-left: auto;
        }
        .dark .message.user {
            background-color: theme('colors.blue-500');
            color: white;
        }
        .message.bot {
            background-color: theme('colors.ivs-neutral-200');
            color: theme('colors.ivs-neutral-800');
            align-self: flex-start;
            margin-right: auto;
        }
         .dark .message.bot {
            background-color: theme('colors.ivs-neutral-600');
            color: theme('colors.ivs-neutral-100');
        }
        .chatbot-input-area {
            display: flex;
            padding: 0.75rem;
            background-color: var(--ivs-neutral-50-color);
            border-bottom-left-radius: 12px;
            border-bottom-right-radius: 12px;
        }
         .dark .chatbot-input-area {
             background-color: var(--ivs-neutral-700-color);
         }
        .chatbot-input-area input {
            flex-grow: 1;
            padding: 0.6rem; 
            border: 1px solid var(--ivs-neutral-300-color);
            border-radius: 6px; 
            margin-right: 0.5rem; 
            font-size: 0.875rem; 
            outline: none;
            transition: border-color 0.2s ease;
        }
        .dark .chatbot-input-area input {
            background-color: var(--ivs-neutral-600-color);
            border-color: var(--ivs-neutral-500-color);
            color: var(--ivs-neutral-100-color);
        }
        .chatbot-input-area input:focus {
            border-color: var(--primary-color);
        }
        .chatbot-input-area button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 0.6rem 1rem; 
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 0.875rem;
        }
        .chatbot-input-area button:hover {
            background-color: var(--primary-dark-color);
        }
        .chatbot-input-area button:disabled {
            background-color: theme('colors.ivs-neutral-400');
            cursor: not-allowed;
        }
        .ivs-games-cta-btn {
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease !important;
        }
        .ivs-games-cta-btn:hover {
            transform: translateY(-3px) scale(1.03) !important;
            box-shadow: 0 6px 12px rgba(0, 64, 128, 0.2) !important;
        }

        /* Styles for Embedded Memory Match Game */
        #ivs-memory-game-container {
            background-color: rgba(255, 255, 255, 0.9); /* Light overlay for readability */
            border-radius: 16px;
            box-shadow: 0 12px 30px rgba(0,0,0,0.1);
            padding: 20px; /* Reduced padding for mobile */
            width: 100%;
            max-width: 600px; /* Max width for the game container */
            margin: 2rem auto; /* Center it and add some margin */
        }
        .dark #ivs-memory-game-container {
            background-color: rgba(31, 41, 55, 0.9); /* dark:bg-gray-800 with opacity */
        }

        .game-board {
            display: grid;
            gap: 8px; /* Smaller gap for mobile */
            margin: 15px auto; /* Adjusted margin */
            width: 100%;
        }
        .game-card {
            aspect-ratio: 1 / 1;
            border-radius: 8px; /* Smaller radius */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.3s ease;
            transform-style: preserve-3d;
            position: relative;
            perspective: 1000px; /* Adjusted perspective */
            word-break: break-word;
            hyphens: auto;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1); /* Softer shadow */
        }
        .game-card:hover {
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            transform: translateY(-2px) scale(1.01);
        }
        .game-card .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            padding: 5px; /* Smaller padding */
            box-sizing: border-box;
            text-align: center;
            overflow-wrap: break-word;
            word-wrap: break-word;
        }
        .game-card .card-front {
            background-image: url('/images/games/ivsplaycard.png');
            background-size: cover;
            background-position: center;
        }
        .game-card .card-back {
            background: linear-gradient(135deg, var(--game-card-back) 0%, #fffae0 100%); /* Using CSS var */
            color: var(--game-card-text);
            transform: rotateY(180deg);
            font-weight: 600;
            font-size: 1rem; /* Adjusted font size for cards */
            line-height: 1.2;
        }
        @media (min-width: 480px) {
            .game-card .card-back { font-size: 1.2rem; }
        }

        .game-card.is-flipped {
            transform: rotateY(180deg);
            box-shadow: 0 5px 10px rgba(0,0,0,0.15);
        }
        .game-card.is-matched {
            background-color: var(--game-matched);
            cursor: default;
            opacity: 0.6; /* Slightly more visible */
            box-shadow: none;
        }
        .game-card.is-matched .card-front, .game-card.is-matched .card-back {
            background: var(--game-matched) !important;
            color: white;
        }
        .game-info, .game-difficulty-selector, .game-scoreboard-container { /* Prefixed game-specific classes */
            margin-bottom: 15px;
            font-size: 0.875rem; /* Smaller base font */
        }
        .game-info span, .game-difficulty-selector span, .game-scoreboard-container span {
            font-weight: 500;
            color: var(--game-card-text);
        }
        .dark .game-info span, .dark .game-difficulty-selector span, .dark .game-scoreboard-container span {
            color: var(--ivs-neutral-200);
        }
        .game-info .timer {
            color: var(--game-timer);
            font-weight: 700;
        }
        .game-btn-action, .game-btn-difficulty, .game-btn-language { /* Prefixed */
            background-color: var(--game-card-back);
            color: var(--game-card-text);
            border: none;
            padding: 10px 15px; /* Adjusted padding */
            border-radius: 6px;
            font-size: 0.875rem; /* Smaller font */
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.25s ease, transform 0.15s ease, box-shadow 0.25s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .game-btn-action:hover, .game-btn-difficulty:hover, .game-btn-language:hover {
            background-color: #f1c40f; /* Darker gold */
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .game-btn-difficulty.active {
            background-color: var(--game-card-text);
            color: var(--game-card-back);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }
        .game-message-overlay, .game-name-input-overlay, .game-pause-overlay { /* Prefixed */
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.88); /* Darker overlay */
            display: flex; align-items: center; justify-content: center;
            z-index: 1001; /* Ensure above chatbot */
            padding: 15px;
            backdrop-filter: blur(4px);
        }
        .game-message-content, .game-name-input-content, .game-pause-content { /* Prefixed */
            background-color: white;
            padding: 20px 25px; /* Adjusted padding */
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            color: var(--game-card-text);
            max-width: 90%;
            width: 380px;
        }
        .dark .game-message-content, .dark .game-name-input-content, .dark .game-pause-content {
            background-color: var(--ivs-neutral-700);
            color: var(--ivs-neutral-100);
        }
        .game-message-content h2, .game-name-input-content h2, .game-pause-content h2 {
            font-size: 1.5rem; /* Adjusted size */
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            margin-bottom: 10px;
        }
        .game-message-content p, .game-name-input-content p, .game-pause-content p {
            font-size: 0.95rem; /* Adjusted size */
            margin-bottom: 15px;
            line-height: 1.5;
        }
        .game-name-input-content input[type="text"] { /* Prefixed */
            width: calc(100% - 20px); /* Adjusted width */
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #bdc3c7;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        .dark .game-name-input-content input[type="text"] {
            background-color: var(--ivs-neutral-600);
            border-color: var(--ivs-neutral-500);
            color: var(--ivs-neutral-100);
        }
        .game-scoreboard-list li { /* Prefixed */
            display: flex;
            justify-content: space-between;
            padding: 6px 3px; /* Adjusted padding */
            border-bottom: 1px solid #e0e6ed;
            font-size: 0.85rem; /* Smaller font for scoreboard */
        }
         .dark .game-scoreboard-list li { border-bottom-color: var(--ivs-neutral-600); }
        .game-scoreboard-list li:last-child { border-bottom: none; }
        /* Ensure game elements are above main page elements if necessary */
        #ivs-memory-game-container { z-index: 10; position:relative; }
    </style>
</head>
<body class="bg-ivs-neutral-100 dark:bg-ivs-neutral-800 text-ivs-neutral-800 dark:text-ivs-neutral-200 antialiased font-sans" id="page-index">
    
    <header id="header-placeholder" data-loading-text="Đang tải menu..."></header>

    <div id="loading-spinner" class="fixed inset-0 flex items-center justify-center bg-gray-200/75 dark:bg-gray-900/75 z-[1100] hidden">
        <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"></div>
    </div>

    <div id="custom-modal" class="modal">
        <div class="modal-content">
            <p id="modal-message" class="text-lg font-medium text-ivs-neutral-800 dark:text-ivs-neutral-100"></p>
            <button id="modal-close-button" class="button-primary">Đóng</button>
        </div>
    </div>

    <main class="container mx-auto px-4 sm:px-0 py-8">
        <section 
            class="hero-section-banner relative text-center overflow-hidden shadow-xl bg-ivs-neutral-700 dark:bg-ivs-neutral-800 rounded-lg"> 
            <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('/images/logo/webbanner.png');" onerror="this.style.backgroundImage='url(https://placehold.co/1920x600/1f2937/ffffff?text=IVS+Banner)'; this.classList.add('bg-ivs-neutral-700');"></div>
            <div class="hero-content text-white">
                <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-4 hero-text-shadow" data-lang-key="hero_title_index_main">IVS JSC</h1>
                <p class="text-md sm:text-lg md:text-xl mb-6 sm:mb-8 hero-text-shadow italic" data-lang-key="hero_slogan_index">"Nâng tầm Tri thức - Kiến tạo Tương lai"</p>
                <div class="flex flex-col sm:flex-row sm:justify-center gap-3 sm:gap-4">
                    <a href="news-archive.html" class="bg-header-orange hover:bg-orange-700 text-white font-semibold py-2.5 px-6 sm:py-3 sm:px-8 rounded-lg text-sm sm:text-base md:text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md" data-lang-key="hero_button_news">IVS News - Tin tức</a>
                    <a href="about.html" class="bg-primary hover:bg-primary-dark text-white font-semibold py-2.5 px-6 sm:py-3 sm:px-8 rounded-lg text-sm sm:text-base md:text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md" data-lang-key="button_learn_more_about_us">Về Chúng Tôi</a>
                </div>
            </div>
        </section>

        <section class="py-8 bg-primary text-white text-center rounded-lg shadow-lg my-8 mx-auto max-w-full md:max-w-7xl" data-aos="fade-up">
            <div class="container mx-auto px-4 sm:px-6">
                <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold mb-3 sm:mb-4" data-lang-key="teacher_hub_cta_title">Bạn là giáo viên? Đăng ký ngay!</h2>
                <a href="apps/ivs-global-teacher-hub.html" class="inline-block bg-secondary hover:bg-secondary-dark text-primary-dark font-bold py-2.5 px-6 sm:py-3 sm:px-8 rounded-lg text-base sm:text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md" data-lang-key="teacher_hub_cta_button">Ứng tuyển tại đây</a>
            </div>
        </section>
        
        <section class="py-12 md:py-16 bg-white dark:bg-gray-900 rounded-lg my-8" data-aos="fade-up" aria-labelledby="ivs-games-section-title">
            <div class="container mx-auto px-4">
                <div class="text-center mb-10 md:mb-12">
                    <h2 id="ivs-games-section-title" class="text-2xl md:text-3xl lg:text-4xl font-bold text-primary dark:text-secondary mb-3 sm:mb-4" data-lang-key="index_ivsgames_title">
                        <i class="fas fa-puzzle-piece mr-2"></i>Khám Phá Thế Giới IVS Games
                    </h2>
                    <p class="text-base md:text-lg text-gray-600 dark:text-gray-300 max-w-xl md:max-w-2xl mx-auto" data-lang-key="index_ivsgames_subtitle">
                        Trải nghiệm học tập tương tác và sáng tạo qua các trò chơi giáo dục độc quyền từ IVS. Nâng cao kiến thức, rèn luyện kỹ năng một cách thú vị!
                    </p>
                </div>
                <div class="bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 dark:from-blue-700 dark:via-indigo-700 dark:to-purple-800 rounded-xl shadow-2xl overflow-hidden p-6 md:p-10 lg:p-12 flex flex-col md:flex-row items-center" data-aos="zoom-in-up">
                    <div class="md:w-1/2 mb-6 md:mb-0 md:pr-8 text-center md:text-left">
                        <h3 class="text-2xl md:text-3xl font-bold text-white mb-3 sm:mb-4" data-lang-key="index_ivsgames_cta_highlight">Học Mà Chơi, Chơi Mà Học!</h3>
                        <p class="text-blue-100 dark:text-blue-200 mb-6 sm:mb-8 text-sm md:text-base" data-lang-key="index_ivsgames_cta_desc">
                            IVS Games mang đến một phương pháp tiếp cận giáo dục mới mẻ, giúp bạn tiếp thu kiến thức hiệu quả và giải trí lành mạnh. Bắt đầu với IVS Memory Match và nhiều trò chơi khác sắp ra mắt!
                        </p>
                        <a href="games/ivsgames.html" 
                           class="ivs-games-cta-btn inline-block bg-secondary hover:bg-secondary-dark text-primary-dark font-bold py-2.5 px-6 sm:py-3 sm:px-8 rounded-lg text-base sm:text-lg shadow-lg transform hover:scale-105"
                           data-lang-key="index_ivsgames_cta_button">
                           <i class="fas fa-gamepad mr-2"></i>Khám phá IVS Games Arcade
                        </a>
                    </div>
                    <div class="md:w-1/2">
                        <img src="images/games/ivsgames.png" 
                             alt="Minh họa IVS Games" 
                             class="rounded-lg shadow-xl w-full h-auto object-cover max-h-64 md:max-h-full"
                             loading="lazy"
                             onerror="this.src='https://placehold.co/500x350/1f2937/FFFFFF?text=IVS+Games'; this.alt='Hình ảnh IVS Games'">
                    </div>
                </div>
            </div>
        </section>

        <!-- Embedded IVS Memory Match Game Section -->
        <section id="embedded-memory-game-section" class="py-12 md:py-16 bg-ivs-neutral-100 dark:bg-ivs-neutral-900/70 rounded-lg my-8" data-aos="fade-up">
            <div class="container mx-auto px-4 max-w-2xl text-center"> 
                <h2 class="text-2xl md:text-3xl font-bold text-primary dark:text-secondary mb-4 sm:mb-6" data-lang-key="memory_game_direct_play_title_index">
                    <i class="fas fa-brain mr-2"></i>Chơi IVS Memory Match Ngay!
                </h2>
                <p class="text-sm md:text-base text-ivs-neutral-600 dark:text-ivs-neutral-300 mb-6 md:mb-8" data-lang-key="memory_game_direct_play_desc_index">
                    Rèn luyện trí nhớ và học từ vựng Anh-Việt với trò chơi lật thẻ vui nhộn. Chọn độ khó và bắt đầu!
                </p>
                <div id="ivs-memory-game-container" class="font-sans">
                    <header class="ivs-blue text-white p-3 sm:p-4 rounded-t-lg mb-3 sm:mb-4 text-center">
                        <h1 class="text-base sm:text-lg md:text-xl font-bold font-montserrat" data-translate-game="headerTitle">IVS Memory Match: Eng-Vie</h1>
                    </header>
            
                    <div class="game-difficulty-selector mb-3 sm:mb-4 text-center">
                        <h3 class="text-sm sm:text-base font-semibold text-ivs-neutral-700 dark:text-ivs-neutral-200 mb-2" data-translate-game="selectDifficulty">Select Difficulty:</h3>
                        <div class="flex justify-center gap-2">
                            <button id="game-difficulty-easy" class="game-btn-difficulty text-xs sm:text-sm" data-difficulty="easy" data-translate-game="easy">Easy</button>
                            <button id="game-difficulty-medium" class="game-btn-difficulty active text-xs sm:text-sm" data-difficulty="medium" data-translate-game="medium">Medium</button>
                            <button id="game-difficulty-hard" class="game-btn-difficulty text-xs sm:text-sm" data-difficulty="hard" data-translate-game="hard">Hard</button>
                        </div>
                    </div>
            
                    <div class="game-info grid grid-cols-2 sm:grid-cols-4 gap-2 items-center p-2 sm:p-3 bg-ivs-neutral-100 dark:bg-ivs-neutral-700 rounded-lg text-center text-xs sm:text-sm">
                        <div><span data-translate-game="level">Level</span>: <span id="game-level-display">1</span></div>
                        <div class="sm:text-center"><i class="fas fa-stopwatch mr-1"></i><span data-translate-game="time">Time</span>: <span id="game-time-display" class="timer">00:00</span></div>
                        <div class="sm:text-center"><span data-translate-game="flips">Flips</span>: <span id="game-flips-count">0</span></div>
                        <div class="sm:text-right"><span data-translate-game="totalScore">Total Score</span>: <span id="game-total-score-display">0</span></div>
                    </div>
            
                    <div id="game-board" class="game-board">
                    </div>
            
                    <div class="controls-area text-center mt-3 sm:mt-4">
                        <button id="game-pause-resume-button" class="game-btn-action text-xs sm:text-sm"><i class="fas fa-pause mr-1"></i><span data-translate-game="pause">Pause</span></button>
                        <button id="game-reset-level-button" class="game-btn-action text-xs sm:text-sm"><i class="fas fa-redo mr-1"></i><span data-translate-game="restartLevel">Restart Level</span></button>
                        <button id="game-language-switcher-button" class="game-btn-language ml-2 text-xs sm:text-sm">VI/EN</button>
                    </div>
            
                    <footer class="text-center p-2 sm:p-3 mt-3 sm:mt-4 bg-ivs-neutral-50 dark:bg-ivs-neutral-700/50 rounded-b-lg">
                        <p class="text-xs text-gray-400 dark:text-gray-500" data-translate-game="copyright"><i class="fa-solid fa-copyright"></i> 2025 IVS JSC. All rights reserved.</p>
                    </footer>
                </div>
                <div id="game-scoreboard-wrapper" class="mt-6 md:mt-8">
                     <div class="game-scoreboard-container main-container" style="max-width: 400px; margin-left:auto; margin-right:auto;"> <!-- Copied from game, adjusted max-width -->
                        <h3 class="text-base sm:text-lg font-semibold text-ivs-neutral-700 dark:text-ivs-neutral-200"><i class="fas fa-trophy text-yellow-500"></i> <span data-translate-game="top5Scoreboard">Top 5 Scoreboard</span> <i class="fas fa-trophy text-yellow-500"></i></h3>
                        <ol id="game-scoreboard-list" class="game-scoreboard-list">
                        </ol>
                    </div>
                </div>
            </div>
        </section>
        <!-- End Embedded IVS Memory Match Game Section -->


        <section class="py-12 md:py-20 bg-ivs-neutral-50 dark:bg-ivs-neutral-800/30 rounded-lg my-8" data-aos="fade-up">
            <div class="container mx-auto px-4">
                <h2 class="text-center text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800 dark:text-gray-100 mb-10 md:mb-12" data-lang-key="index_section_title_key_areas_updated">Lĩnh vực Hoạt động Chính</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 max-w-6xl mx-auto">
                    <div class="service-card bg-white p-6 rounded-xl shadow-lg flex flex-col items-center text-center dark:bg-slate-800 dark:border-slate-700" data-aos="zoom-in-up" data-aos-delay="100">
                        <div class="bg-blue-100 dark:bg-blue-900/50 p-3 sm:p-4 rounded-full mb-4 sm:mb-6">
                            <i class="fas fa-graduation-cap text-2xl sm:text-3xl text-blue-500 dark:text-blue-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-xl sm:text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-2 sm:mb-3" data-lang-key="service_title_affiliated_education">Giáo dục Liên kết & Phát triển Chương trình</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-xs sm:text-sm mb-4 sm:mb-6 flex-grow" data-lang-key="service_desc_affiliated_education">Cung cấp các chương trình đào tạo liên kết đa dạng, phát triển học liệu và ứng dụng giải pháp EdTech tiên tiến cho mọi cấp học.</p>
                        <a href="education.html" class="mt-auto bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 sm:px-6 rounded-md transition-colors text-sm sm:text-base" data-lang-key="button_explore_education_programs">Khám phá Giáo dục</a>
                    </div>
                    <div class="service-card bg-white p-6 rounded-xl shadow-lg flex flex-col items-center text-center dark:bg-slate-800 dark:border-slate-700" data-aos="zoom-in-up" data-aos-delay="200">
                        <div class="bg-green-100 dark:bg-green-900/50 p-3 sm:p-4 rounded-full mb-4 sm:mb-6">
                            <i class="fas fa-briefcase text-2xl sm:text-3xl text-green-500 dark:text-green-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-xl sm:text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-2 sm:mb-3" data-lang-key="service_title_business_consulting">Tư vấn Quản trị & Giải pháp Doanh nghiệp</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-xs sm:text-sm mb-4 sm:mb-6 flex-grow" data-lang-key="service_desc_business_consulting">Giải pháp toàn diện cho doanh nghiệp: từ thủ tục hành chính, thuế, website, thiết kế học liệu, đến các dịch vụ hỗ trợ vận hành chuyên nghiệp.</p>
                        <a href="solutions.html" class="mt-auto bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 sm:px-6 rounded-md transition-colors text-sm sm:text-base" data-lang-key="button_explore_business_services">Dịch vụ Doanh nghiệp</a>
                    </div>
                    <div class="service-card bg-white p-6 rounded-xl shadow-lg flex flex-col items-center text-center dark:bg-slate-800 dark:border-slate-700" data-aos="zoom-in-up" data-aos-delay="300">
                        <div class="bg-yellow-100 dark:bg-yellow-900/50 p-3 sm:p-4 rounded-full mb-4 sm:mb-6">
                            <i class="fas fa-globe-americas text-2xl sm:text-3xl text-yellow-500 dark:text-yellow-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-xl sm:text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-2 sm:mb-3" data-lang-key="service_title_international_cooperation">Liên kết Quốc tế & Hội nhập Toàn cầu</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-xs sm:text-sm mb-4 sm:mb-6 flex-grow" data-lang-key="service_desc_international_cooperation">Du học các cấp đến mọi Châu Lục, Học bổng Du học, Trao đổi học sinh - Sinh viên. Cộng đồng Hỗ trợ sinh viên.</p>
                        <a href="/Pages/foreign-teacher-services.html" class="mt-auto bg-yellow-500 hover:bg-amber-600 text-white font-medium py-2 px-4 sm:px-6 rounded-md transition-colors text-sm sm:text-base" data-lang-key="button_explore_international_coop">Hợp tác Quốc tế</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-12 md:py-20 bg-white dark:bg-gray-900 rounded-lg my-8" data-aos="fade-up" aria-labelledby="legal-consulting-section">
            <div class="container mx-auto px-4">
                <h2 id="legal-consulting-section-heading" class="text-center text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800 dark:text-gray-100 mb-10 md:mb-12" data-lang-key="index_featured_legal_title">Dịch vụ Nổi bật: Tư vấn Pháp lý Chuyên sâu</h2>
                <div class="grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-8 max-w-4xl mx-auto">
                    <div class="service-card bg-gray-50 p-6 sm:p-8 rounded-xl shadow-lg flex flex-col items-center text-center dark:bg-slate-800 dark:border-slate-700" data-aos="zoom-in-up" data-aos-delay="100">
                        <div class="bg-blue-100 dark:bg-blue-900/50 p-3 sm:p-4 rounded-full mb-4 sm:mb-6">
                            <i class="fas fa-gavel text-2xl sm:text-3xl text-blue-500 dark:text-blue-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-xl sm:text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-2 sm:mb-3" data-lang-key="legal_consulting_hero_title">Tư Vấn Pháp Lý Chuyên Sâu</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-xs sm:text-sm mb-4 sm:mb-6 flex-grow" data-lang-key="index_featured_legal_desc">IVS JSC cung cấp dịch vụ tư vấn pháp lý chuyên sâu, đồng hành cùng cá nhân và doanh nghiệp trong việc hiểu rõ, phòng ngừa rủi ro và đưa ra các quyết định pháp lý chiến lược.</p>
                        <a href="/Pages/legal_consulting.html" class="mt-auto bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 sm:px-6 rounded-md transition-colors text-sm sm:text-base" data-lang-key="index_featured_legal_button">Tìm hiểu Dịch vụ Pháp lý</a>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="py-12 md:py-20 bg-white dark:bg-gray-900 rounded-lg my-8" data-aos="fade-up" aria-labelledby="education-programs-section-heading">
            <div class="container mx-auto px-4">
                <h2 id="education-programs-section-heading" class="text-center text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800 dark:text-gray-100 mb-10 md:mb-12" data-lang-key="index_section_title_education_programs_detail">Chương Trình Đào Tạo Chi Tiết</h2>
                <div id="education-programs-container" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 max-w-5xl mx-auto">
                    <a href="/Pages/lkmamnon.html" class="education-level-card group block bg-gray-50 dark:bg-slate-800 dark:border-slate-700 p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-in-out text-center" data-aos="fade-up" data-aos-delay="100">
                        <div class="mx-auto flex items-center justify-center h-16 w-16 sm:h-20 sm:w-20 rounded-full bg-blue-100 dark:bg-blue-900/50 group-hover:bg-blue-200 dark:group-hover:bg-blue-800/70 transition-colors duration-300 mb-3 sm:mb-4">
                            <i class="fas fa-child text-2xl sm:text-3xl text-blue-500 dark:text-blue-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-sm sm:text-lg font-semibold text-gray-700 dark:text-gray-200 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300" data-lang-key="small_button_preschool">Mầm non</h3>
                    </a>
                    <a href="/Pages/lktieuhoc.html" class="education-level-card group block bg-gray-50 dark:bg-slate-800 dark:border-slate-700 p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-in-out text-center" data-aos="fade-up" data-aos-delay="150">
                        <div class="mx-auto flex items-center justify-center h-16 w-16 sm:h-20 sm:w-20 rounded-full bg-green-100 dark:bg-green-900/50 group-hover:bg-green-200 dark:group-hover:bg-green-800/70 transition-colors duration-300 mb-3 sm:mb-4">
                            <i class="fas fa-school text-2xl sm:text-3xl text-green-500 dark:text-green-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-sm sm:text-lg font-semibold text-gray-700 dark:text-gray-200 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors duration-300" data-lang-key="small_button_primary">Tiểu học</h3>
                    </a>
                    <a href="/Pages/lkthcsthpt.html" class="education-level-card group block bg-gray-50 dark:bg-slate-800 dark:border-slate-700 p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-in-out text-center" data-aos="fade-up" data-aos-delay="200">
                        <div class="mx-auto flex items-center justify-center h-16 w-16 sm:h-20 sm:w-20 rounded-full bg-purple-100 dark:bg-purple-900/50 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/70 transition-colors duration-300 mb-3 sm:mb-4">
                            <i class="fas fa-user-graduate text-2xl sm:text-3xl text-purple-500 dark:text-purple-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-sm sm:text-lg font-semibold text-gray-700 dark:text-gray-200 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors duration-300" data-lang-key="small_button_secondary">THCS/THPT</h3>
                    </a>
                    <a href="/Pages/ivslanguages.html" class="education-level-card group block bg-gray-50 dark:bg-slate-800 dark:border-slate-700 p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-in-out text-center" data-aos="fade-up" data-aos-delay="250">
                        <div class="mx-auto flex items-center justify-center h-16 w-16 sm:h-20 sm:w-20 rounded-full bg-red-100 dark:bg-red-900/50 group-hover:bg-red-200 dark:group-hover:bg-red-800/70 transition-colors duration-300 mb-3 sm:mb-4">
                            <i class="fas fa-language text-2xl sm:text-3xl text-red-500 dark:text-red-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-sm sm:text-lg font-semibold text-gray-700 dark:text-gray-200 group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors duration-300" data-lang-key="small_button_language_center">TT Anh Ngữ</h3>
                    </a>
                    <a href="/Pages/ivslifeminds.html" class="education-level-card group block bg-gray-50 dark:bg-slate-800 dark:border-slate-700 p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-in-out text-center" data-aos="fade-up" data-aos-delay="300">
                        <div class="mx-auto flex items-center justify-center h-16 w-16 sm:h-20 sm:w-20 rounded-full bg-yellow-100 dark:bg-yellow-900/50 group-hover:bg-yellow-200 dark:group-hover:bg-yellow-800/70 transition-colors duration-300 mb-3 sm:mb-4">
                            <i class="fas fa-brain text-2xl sm:text-3xl text-yellow-500 dark:text-yellow-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-sm sm:text-lg font-semibold text-gray-700 dark:text-gray-200 group-hover:text-yellow-600 dark:group-hover:text-yellow-400 transition-colors duration-300" data-lang-key="small_button_lifeskills">Kỹ năng sống</h3>
                    </a>
                    <a href="/Pages/steambyivs.html" class="education-level-card group block bg-gray-50 dark:bg-slate-800 dark:border-slate-700 p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-in-out text-center" data-aos="fade-up" data-aos-delay="350">
                        <div class="mx-auto flex items-center justify-center h-16 w-16 sm:h-20 sm:w-20 rounded-full bg-indigo-100 dark:bg-indigo-900/50 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-800/70 transition-colors duration-300 mb-3 sm:mb-4">
                            <i class="fas fa-rocket text-2xl sm:text-3xl text-indigo-500 dark:text-indigo-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-sm sm:text-lg font-semibold text-gray-700 dark:text-gray-200 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors duration-300" data-lang-key="small_button_steam">STEAM</h3>
                    </a>
                    <a href="/Blogs/talktask-ivsuniversitieshcmc.html" class="education-level-card group block bg-gray-50 dark:bg-slate-800 dark:border-slate-700 p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-in-out text-center" data-aos="fade-up" data-aos-delay="400">
                        <div class="mx-auto flex items-center justify-center h-16 w-16 sm:h-20 sm:w-20 rounded-full bg-teal-100 dark:bg-teal-900/50 group-hover:bg-teal-200 dark:group-hover:bg-teal-800/70 transition-colors duration-300 mb-3 sm:mb-4">
                            <i class="fas fa-globe text-2xl sm:text-3xl text-teal-500 dark:text-teal-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-sm sm:text-lg font-semibold text-gray-700 dark:text-gray-200 group-hover:text-teal-600 dark:group-hover:text-teal-400 transition-colors duration-300" data-lang-key="small_button_international">Sinh viên Quốc tế</h3>
                    </a>
                    <a href="/Blogs/letstalkdongnai.html" class="education-level-card group block bg-gray-50 dark:bg-slate-800 dark:border-slate-700 p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-in-out text-center" data-aos="fade-up" data-aos-delay="450">
                        <div class="mx-auto flex items-center justify-center h-16 w-16 sm:h-20 sm:w-20 rounded-full bg-pink-100 dark:bg-pink-900/50 group-hover:bg-pink-200 dark:group-hover:bg-pink-800/70 transition-colors duration-300 mb-3 sm:mb-4">
                            <i class="fas fa-comments text-2xl sm:text-3xl text-pink-500 dark:text-pink-400" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-sm sm:text-lg font-semibold text-gray-700 dark:text-gray-200 group-hover:text-pink-600 dark:group-hover:text-pink-400 transition-colors duration-300" data-lang-key="small_button_consulting">Hãy Nói - Tiếng Nói Tuổi Trẻ</h3>
                    </a>
                </div>
            </div>
        </section>
        
        <section class="py-16 bg-gray-50 dark:bg-gray-800/30" data-aos="fade-up" aria-labelledby="why-choose-ivs-section-heading"> 
            <div class="container mx-auto px-4 sm:px-6 md:px-12">
                <h2 id="why-choose-ivs-section-heading" class="text-center text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800 dark:text-gray-100 mb-10 md:mb-12" data-lang-key="index_section_title_why_us">Tại Sao Chọn IVS JSC?</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8 text-center">
                    <div data-aos="fade-right" data-aos-delay="100">
                        <div class="bg-header-orange text-white rounded-full w-14 h-14 sm:w-16 sm:h-16 flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg">
                            <i class="fas fa-award text-xl sm:text-2xl" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-lg sm:text-xl font-semibold text-gray-700 dark:text-gray-200 mb-1 sm:mb-2" data-lang-key="why_us_quality">Chất lượng Vượt trội</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-xs sm:text-sm" data-lang-key="why_us_quality_desc">Đội ngũ chuyên gia giàu kinh nghiệm, chương trình chuẩn quốc tế.</p>
                    </div>
                    <div data-aos="fade-right" data-aos-delay="200">
                        <div class="bg-secondary text-white rounded-full w-14 h-14 sm:w-16 sm:h-16 flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg">
                            <i class="fas fa-cogs text-xl sm:text-2xl" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-lg sm:text-xl font-semibold text-gray-700 dark:text-gray-200 mb-1 sm:mb-2" data-lang-key="why_us_tech">Giải pháp Toàn diện</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-xs sm:text-sm" data-lang-key="why_us_tech_desc_updated">Từ giáo dục, EdTech đến tư vấn và hỗ trợ vận hành doanh nghiệp.</p>
                    </div>
                    <div data-aos="fade-left" data-aos-delay="300">
                        <div class="bg-primary text-white rounded-full w-14 h-14 sm:w-16 sm:h-16 flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg">
                            <i class="fas fa-lightbulb text-xl sm:text-2xl" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-lg sm:text-xl font-semibold text-gray-700 dark:text-gray-200 mb-1 sm:mb-2" data-lang-key="why_us_env">Môi trường Sáng tạo</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-xs sm:text-sm" data-lang-key="why_us_env_desc">Khuyến khích tư duy đột phá, bình đẳng và tôn trọng sự khác biệt.</p>
                    </div>
                    <div data-aos="fade-left" data-aos-delay="400">
                        <div class="bg-warning text-white rounded-full w-14 h-14 sm:w-16 sm:h-16 flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg">
                            <i class="fas fa-handshake text-xl sm:text-2xl" aria-hidden="true"></i> 
                        </div>
                        <h3 class="text-lg sm:text-xl font-semibold text-gray-700 dark:text-gray-200 mb-1 sm:mb-2" data-lang-key="why_us_partnership">Đối tác Tin cậy</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-xs sm:text-sm" data-lang-key="why_us_partnership_desc">Đồng hành cùng phát triển, mang lại giá trị bền vững.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-16 bg-white dark:bg-gray-900 rounded-lg my-8" data-aos="fade-up" aria-labelledby="news-events-section-heading">
            <div class="container mx-auto px-4">
                <h2 id="news-events-section-heading" class="text-2xl md:text-3xl lg:text-4xl font-bold text-center text-gray-800 dark:text-gray-100 mb-8 md:mb-10" data-lang-key="index_news_title">Tin Tức & Sự Kiện</h2>
                <div id="news-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <p class="text-gray-500 dark:text-gray-400 col-span-full text-center" data-lang-key="loading_news">Đang tải tin tức...</p>
                </div>
                <div class="text-center mt-10">
                    <a href="news-archive.html" class="bg-gray-700 hover:bg-gray-800 dark:bg-slate-700 dark:hover:bg-slate-600 text-white font-semibold py-2.5 px-6 sm:py-3 sm:px-8 rounded-lg text-sm sm:text-base md:text-md transition duration-300 ease-in-out" data-lang-key="button_all_news">Xem tất cả tin tức</a>
                </div>
            </div>
        </section>
        
        <section class="py-12 md:py-16 bg-gray-100 dark:bg-gray-800/50 section-spacing rounded-lg my-8" data-aos="fade-up" aria-labelledby="testimonials-section-heading">
            <div class="container mx-auto px-4 max-w-7xl">
                <h2 id="testimonials-section-heading" class="text-xl md:text-2xl lg:text-3xl font-semibold text-neutral-700 dark:text-gray-100 mb-8 text-center" data-aos="fade-up" data-lang-key="webdesign_testimonials_heading">Khách hàng & Đối tác nói gì về IVS JSC</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                    <div class="testimonial-card shadow-xl border border-blue-100 dark:border-gray-700 text-gray-900 dark:text-white flex flex-col bg-white dark:bg-slate-800 p-6 rounded-lg" data-aos="zoom-in" data-aos-delay="100">
                        <i class="fas fa-quote-left text-2xl sm:text-3xl text-blue-500 dark:text-blue-400 mb-3 sm:mb-4" aria-hidden="true"></i>
                        <p class="text-gray-600 dark:text-gray-300 italic mb-3 sm:mb-4 flex-grow text-sm sm:text-base" data-lang-key="testimonial_1_text"> Phụ huynh: "Chương trình học tại IVS Academy linh động và thực tế. Có thể tinh chỉnh theo bất cứ nhu càu học tập, giảng dạy nào, nhờ Đội ngũ giảng viên cực kỳ chất lượng, và tư duy nhạy bén trong giáo dục. Con trai chúng Là con lai lần đầu tiên về Việt Nam, nhưng phải theo học chương trình bên đó và IVS kết hợp với chương trình đào tạo của trường mà cậu bé lớp 1 này đang theo học ở Mỹ để dạy bé trong vòng 3 tháng, điều đó thật tuyệt vời."</p>
                        <div class="mt-auto pt-3 sm:pt-4 border-t border-gray-200 dark:border-gray-700">
                            <p class="font-semibold text-gray-700 dark:text-gray-200 text-sm sm:text-base" data-lang-key="testimonial_1_name">Bé Thomas - Quốc tịch Mỹ</p>
                            <p class="text-xs sm:text-sm text-gray-500 dark:text-gray-400" data-lang-key="testimonial_1_title">Học viên đặc biệt của IVS</p>
                        </div>
                    </div>
                    <div class="testimonial-card shadow-xl border border-blue-100 dark:border-gray-700 flex flex-col bg-white dark:bg-slate-800 p-6 rounded-lg" data-aos="zoom-in" data-aos-delay="200">
                        <i class="fas fa-quote-left text-2xl sm:text-3xl text-green-500 dark:text-green-400 mb-3 sm:mb-4" aria-hidden="true"></i>
                        <p class="text-gray-600 dark:text-gray-300 italic mb-3 sm:mb-4 flex-grow text-sm sm:text-base" data-lang-key="testimonial_2_text">"Nhờ giải pháp EdTech của IVS Celestech, trường chúng tôi đã cải thiện đáng kể việc quản lý học sinh và nâng cao chất lượng giảng dạy. Đây thực sự là một bước tiến lớn trong công tác giáo dục."</p>
                        <div class="mt-auto pt-3 sm:pt-4 border-t border-gray-200 dark:border-gray-700">
                            <p class="font-semibold text-gray-700 dark:text-gray-200 text-sm sm:text-base" data-lang-key="testimonial_2_name">Nguyễn Thị Lan</p>
                            <p class="text-xs sm:text-sm text-gray-500 dark:text-gray-400" data-lang-key="testimonial_2_title">Hiệu trưởng Trường Tiểu học Ánh Dương</p>
                        </div>
                    </div>
                    <div class="testimonial-card shadow-xl border border-blue-100 dark:border-gray-700 flex flex-col bg-white dark:bg-slate-800 p-6 rounded-lg" data-aos="zoom-in" data-aos-delay="300">
                        <i class="fas fa-quote-left text-2xl sm:text-3xl text-purple-500 dark:text-purple-400 mb-3 sm:mb-4" aria-hidden="true"></i>
                        <p class="text-gray-600 dark:text-gray-300 italic mb-3 sm:mb-4 flex-grow text-sm sm:text-base" data-lang-key="testimonial_3_text">"Hợp tác với IVS JSC trong dự án giáo dục quốc tế đã giúp chúng tôi tiếp cận được nhiều cơ hội mới và đạt được những thành tựu đáng kể. Đội ngũ làm việc rất chuyên nghiệp và tận tâm."</p>
                        <div class="mt-auto pt-3 sm:pt-4 border-t border-gray-200 dark:border-gray-700">
                            <p class="font-semibold text-gray-700 dark:text-gray-200 text-sm sm:text-base" data-lang-key="testimonial_3_name">Lê Văn Hùng</p>
                            <p class="text-xs sm:text-sm text-gray-500 dark:text-gray-400" data-lang-key="testimonial_3_title">Trưởng phòng Hợp tác Quốc tế, Công ty Giáo dục Việt</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="py-16 sm:py-20 bg-primary dark:bg-blue-700 text-white rounded-lg my-8" data-aos="zoom-in" aria-labelledby="cta-section-heading">
            <div class="container mx-auto px-4 sm:px-6 text-center">
                <h2 id="cta-section-heading" class="text-2xl md:text-3xl lg:text-4xl font-bold mb-4 sm:mb-6" data-lang-key="cta_main_title">Sẵn sàng Nâng tầm Tri thức & Kiến tạo Tương lai?</h2>
                <p class="text-base sm:text-lg md:text-xl mb-6 sm:mb-8 max-w-xl md:max-w-2xl mx-auto" data-lang-key="cta_main_subtitle">Hãy kết nối với IVS JSC ngay hôm nay để khám phá các giải pháp giáo dục và công nghệ hàng đầu, cùng những cơ hội hợp tác phát triển bền vững.</p>
                <div class="space-y-3 sm:space-y-0 sm:space-x-3 md:space-x-4">
                    <a href="contact.html?action=consult" class="inline-block bg-white text-primary hover:bg-gray-100 dark:text-blue-600 dark:hover:bg-gray-200 font-bold py-2.5 px-6 sm:py-3 sm:px-8 rounded-lg text-sm sm:text-base md:text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md" data-lang-key="cta_button_consult">Đăng ký Tư vấn</a>
                    <a href="contact.html" class="inline-block border-2 border-white text-white hover:bg-white hover:text-primary dark:hover:text-blue-600 font-bold py-2.5 px-6 sm:py-3 sm:px-8 rounded-lg text-sm sm:text-base md:text-lg transition duration-300 ease-in-out transform hover:scale-105" data-lang-key="cta_button_contact">Liên hệ Hợp tác</a>
                </div>
            </div>
        </section>
    </main>

    <div id="fab-container-placeholder"></div>
    <div id="footer-placeholder" data-loading-text="Đang tải chân trang..."></div>
    
    <button id="scrollToTopBtn" class="hidden fixed bottom-4 right-4 sm:bottom-5 sm:right-5 z-[90] items-center justify-center w-10 h-10 md:w-12 md:h-12 rounded-full bg-ivs-neutral-700 text-white shadow-lg hover:bg-ivs-neutral-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ivs-neutral-500 focus:ring-offset-2 dark:bg-ivs-neutral-600 dark:hover:bg-ivs-neutral-500" aria-label="Scroll to top">
        <i class="fas fa-arrow-up text-lg md:text-xl" aria-hidden="true"></i>
    </button>

    <div class="chatbot-container">
        <div id="chatbot-window" class="chatbot-window">
            <div class="chatbot-header">
                <span data-lang-key="chatbot_title">IVS AI Assistant</span>
                <button id="chatbot-close-button" class="close-button" aria-label="Đóng chatbot">&times;</button>
            </div>
            <div id="chatbot-messages" class="chatbot-messages flex flex-col space-y-3">
                <div class="message bot" data-lang-key="chatbot_welcome">Welcome to IVS JSC! How can I help you today?</div>
            </div>
            <div class="chatbot-input-area">
                <input type="text" id="chatbot-input" placeholder="Nhập tin nhắn..." data-lang-key="chatbot_placeholder">
                <button id="chatbot-send-button" aria-label="Gửi tin nhắn"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        <button id="chatbot-open-button" class="chatbot-button" aria-label="Mở chatbot">
            <i class="fas fa-robot"></i>
        </button>
    </div>

    <script src="/js/language.js"></script>
    <script src="/js/loadComponents.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/posts-loader.js"></script> 
    <script src="/js/chatbot.js"></script> 
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        
        let app;
        let auth;
        let isAuthReady = false;
        let userId = 'Đang tải...';

        const loadingSpinner = document.getElementById('loading-spinner');
        const customModal = document.getElementById('custom-modal');
        const modalMessage = document.getElementById('modal-message');
        const modalCloseButton = document.getElementById('modal-close-button');

        function showModal(message, isError = true) {
            if (modalMessage) {
                 modalMessage.innerHTML = message;
                 if(isError) modalMessage.classList.add('text-red-600', 'dark:text-red-400');
                 else modalMessage.classList.remove('text-red-600', 'dark:text-red-400');
            }
            if (customModal) customModal.classList.add('show');
        }

        function hideModal() {
            if (customModal) customModal.classList.remove('show');
        }

        if (modalCloseButton) modalCloseButton.addEventListener('click', hideModal);

        function showLoadingSpinner() {
            if (loadingSpinner) loadingSpinner.classList.remove('hidden');
        }

        function hideLoadingSpinner() {
            if (loadingSpinner) loadingSpinner.classList.add('hidden');
        }
        
        window.onload = async function() {
            showLoadingSpinner();
            let firebaseConfigObject = {};
            let parsedSuccessfully = false;

            if (typeof __firebase_config !== 'undefined' && __firebase_config !== null && String(__firebase_config).trim() !== '') {
                try {
                    firebaseConfigObject = JSON.parse(__firebase_config);
                    parsedSuccessfully = true;
                } catch (e) {
                    console.error("Lỗi phân tích cấu hình Firebase:", e);
                    showModal("Cấu hình Firebase không hợp lệ. Vui lòng liên hệ bộ phận hỗ trợ. (Lỗi Parse)");
                }
            } else {
                 console.warn("Biến cấu hình Firebase (__firebase_config) không được cung cấp hoặc trống.");
            }

            if (!parsedSuccessfully || !firebaseConfigObject.apiKey || !firebaseConfigObject.authDomain || !firebaseConfigObject.projectId) {
                console.error("Cấu hình Firebase bị thiếu các trường quan trọng (apiKey, authDomain, projectId) hoặc không hợp lệ.");
                if (parsedSuccessfully && (!firebaseConfigObject.apiKey || !firebaseConfigObject.authDomain || !firebaseConfigObject.projectId)) { 
                  showModal("Lỗi cấu hình hệ thống Firebase. Vui lòng thử lại sau hoặc liên hệ bộ phận hỗ trợ. (Thiếu trường quan trọng)");
                } else if (typeof __firebase_config === 'undefined' || String(__firebase_config).trim() === '') {
                     console.warn("Firebase config not provided by the environment. Skipping Firebase initialization for now.");
                }
                hideLoadingSpinner();
                finalizePageLoad(); 
                return; 
            }

            try {
                app = initializeApp(firebaseConfigObject);
                auth = getAuth(app);
                
                const currentInitialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

                if (currentInitialAuthToken) {
                    try {
                        await signInWithCustomToken(auth, currentInitialAuthToken);
                    } catch (error) {
                        console.warn("Đăng nhập bằng custom token thất bại, thử đăng nhập ẩn danh:", error);
                        await signInAnonymously(auth);
                    }
                } else {
                    await signInAnonymously(auth);
                }

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("User authenticated with UID:", userId);
                        isAuthReady = true;
                    } else {
                        userId = 'N/A (chưa đăng nhập)';
                        isAuthReady = false;
                        console.warn("Người dùng chưa được xác thực.");
                    }
                    hideLoadingSpinner();
                    finalizePageLoad();
                });

            } catch (error) {
                console.error("Lỗi khởi tạo Firebase hoặc xác thực:", error);
                showModal("Không thể khởi tạo ứng dụng Firebase. Vui lòng kiểm tra kết nối mạng và cấu hình.");
                hideLoadingSpinner();
                finalizePageLoad();
            }
        };

        function finalizePageLoad() {
            AOS.init({
                duration: 800,
                once: true,
                offset: 50,
            });
            initializeScrollToTop();
            // Initialize embedded game if its container exists
            if (document.getElementById('ivs-memory-game-container')) {
                if (typeof initIVSMemoryGame === 'function') {
                    initIVSMemoryGame();
                } else {
                    console.error("Hàm initIVSMemoryGame không tìm thấy để khởi tạo trò chơi.");
                }
            }
        }

        function initializeScrollToTop(){
            const scrollToTopBtn = document.getElementById('scrollToTopBtn');
            if (scrollToTopBtn) {
                window.addEventListener('scroll', () => {
                    if (window.pageYOffset > 200) {
                        scrollToTopBtn.classList.remove('hidden');
                        scrollToTopBtn.classList.add('flex');
                    } else {
                        scrollToTopBtn.classList.remove('flex');
                        scrollToTopBtn.classList.add('hidden');
                    }
                }, { passive: true });

                scrollToTopBtn.addEventListener('click', () => {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
                if (window.pageYOffset <= 200) { 
                    scrollToTopBtn.classList.add('hidden');
                } else {
                    scrollToTopBtn.classList.remove('hidden');
                     scrollToTopBtn.classList.add('flex');
                }
            }
        }
    </script>

    <!-- Embedded IVS Memory Match Game Script -->
    <script>
        const gameTranslations = {
            en: {
                pageTitle: "IVS Memory Match - Enhanced",
                headerTitle: "IVS Memory Match: Eng-Vie",
                selectDifficulty: "Select Difficulty:",
                easy: "Easy",
                medium: "Medium",
                hard: "Hard",
                level: "Level",
                time: "Time",
                flips: "Flips",
                totalScore: "Total Score",
                pause: "Pause",
                resume: "Resume",
                restartLevel: "Restart Level",
                copyright: '<i class="fa-solid fa-copyright"></i> 2025 IVS JSC. All rights reserved.',
                top5Scoreboard: "Top 5 Scoreboard",
                levelScore: "Level Score",
                totalFlips: "Total Flips",
                timeBonus: "Time Bonus",
                messageTitleCongrats: "Congratulations!",
                messageTextLevelComplete: "You've completed the level!",
                messageTitleExcellent: "Excellent!",
                messageTextNextChallenge: "You've completed Level {level}! Ready for the next challenge?",
                messageTitleAwesome: "Awesome!",
                messageTextAllLevelsComplete: "You've completed all levels!",
                messageTitleTimesUp: "Time's Up!",
                messageTextTimesUpLevel: "You ran out of time for Level {level}.",
                levelScoreTimeOut: "0 (Time Out)",
                nextActionNextLevel: "Next Level",
                nextActionRestartLevel: "Restart Level",
                nextActionPlayAgain: "Play Again From Start",
                highScoreTitle: "<i class=\"fas fa-medal text-yellow-400\"></i> High Score! <i class=\"fas fa-medal text-yellow-400\"></i>",
                highScorePrompt: "You've made it to the Top 5! Please enter your name (1-10 characters):",
                enterNamePlaceholder: "Enter name",
                saveScore: "Save Score",
                gamePausedTitle: "<i class=\"fas fa-pause-circle text-blue-500\"></i> Game Paused",
                gamePausedText: "Take a moment. Press Resume to continue.",
                noHighScores: "No high scores yet.",
                alertNameLength: "Name must be between 1 and 10 characters."
            },
            vi: {
                pageTitle: "IVS Memory Match - Nâng cao",
                headerTitle: "IVS Memory Match: Anh-Việt",
                selectDifficulty: "Chọn Độ Khó:",
                easy: "Dễ",
                medium: "Trung Bình",
                hard: "Khó",
                level: "Màn",
                time: "Thời Gian",
                flips: "Lật",
                totalScore: "Tổng Điểm",
                pause: "Tạm Dừng",
                resume: "Tiếp Tục",
                restartLevel: "Chơi Lại Màn",
                copyright: '<i class="fa-solid fa-copyright"></i> 2025 IVS JSC. Mọi quyền được bảo lưu.',
                top5Scoreboard: "Top 5 Bảng Điểm",
                levelScore: "Điểm Màn",
                totalFlips: "Tổng Lượt Lật",
                timeBonus: "Thưởng Thời Gian",
                messageTitleCongrats: "Chúc Mừng!",
                messageTextLevelComplete: "Bạn đã hoàn thành màn chơi!",
                messageTitleExcellent: "Tuyệt Vời!",
                messageTextNextChallenge: "Bạn đã hoàn thành Màn {level}! Sẵn sàng cho thử thách tiếp theo?",
                messageTitleAwesome: "Xuất Sắc!",
                messageTextAllLevelsComplete: "Bạn đã hoàn thành tất cả các màn!",
                messageTitleTimesUp: "Hết Giờ!",
                messageTextTimesUpLevel: "Bạn đã hết thời gian cho Màn {level}.",
                levelScoreTimeOut: "0 (Hết Giờ)",
                nextActionNextLevel: "Màn Tiếp Theo",
                nextActionRestartLevel: "Chơi Lại Màn",
                nextActionPlayAgain: "Chơi Lại Từ Đầu",
                highScoreTitle: "<i class=\"fas fa-medal text-yellow-400\"></i> Điểm Cao! <i class=\"fas fa-medal text-yellow-400\"></i>",
                highScorePrompt: "Bạn đã lọt vào Top 5! Vui lòng nhập tên của bạn (1-10 ký tự):",
                enterNamePlaceholder: "Nhập tên",
                saveScore: "Lưu Điểm",
                gamePausedTitle: "<i class=\"fas fa-pause-circle text-blue-500\"></i> Game Tạm Dừng",
                gamePausedText: "Hãy nghỉ ngơi một chút. Nhấn Tiếp Tục để chơi tiếp.",
                noHighScores: "Chưa có điểm cao nào.",
                alertNameLength: "Tên phải từ 1 đến 10 ký tự."
            }
        };

        let gameCurrentLanguage = localStorage.getItem('ivsMemoryMatchLanguage_v1') || 'en';

        function applyMemoryGameTranslations(lang) {
            const gameContainer = document.getElementById('ivs-memory-game-container');
            if (!gameContainer || !gameTranslations[lang]) return;

            gameContainer.querySelectorAll('[data-translate-game]').forEach(el => {
                const key = el.dataset.translateGame;
                if (gameTranslations[lang][key]) {
                    if (el.tagName === 'INPUT' && el.dataset.translatePlaceholderGame) {
                        el.placeholder = gameTranslations[lang][key];
                    } else if (key === 'highScoreTitle' || key === 'gamePausedTitle' || key === 'copyright') {
                        el.innerHTML = gameTranslations[lang][key];
                    } else {
                         const icon = el.querySelector('i.fas, i.fa-solid');
                        if (icon && el.firstChild === icon && (el.childNodes.length === 1 || (el.childNodes.length > 1 && el.childNodes[1].nodeType === Node.TEXT_NODE))) {
                             let textContent = " " + gameTranslations[lang][key];
                             while(icon.nextSibling && icon.nextSibling.nodeType === Node.TEXT_NODE) {
                                 el.removeChild(icon.nextSibling);
                             }
                             if(icon.nextSibling) {
                                el.insertBefore(document.createTextNode(textContent), icon.nextSibling);
                             } else {
                                el.appendChild(document.createTextNode(textContent));
                             }
                        } else {
                            el.textContent = gameTranslations[lang][key];
                        }
                    }
                }
            });
             const gamePauseResumeButtonSpan = gamePauseResumeButton.querySelector('span');
            if (gamePauseResumeButtonSpan) {
                const iconHTML = gamePauseResumeButton.querySelector('i')?.outerHTML || "";
                gamePauseResumeButtonSpan.textContent = gameIsPaused ? gameTranslations[lang].resume : gameTranslations[lang].pause;
                 if(iconHTML) gamePauseResumeButton.innerHTML = iconHTML + " " + gamePauseResumeButtonSpan.outerHTML;
            }
        }
        
        const gameBoard = document.getElementById('game-board');
        const gameFlipsCountDisplay = document.getElementById('game-flips-count');
        const gameLevelDisplay = document.getElementById('game-level-display');
        const gameTotalScoreDisplay = document.getElementById('game-total-score-display');
        const gameTimeDisplay = document.getElementById('game-time-display');
        const gameResetLevelButton = document.getElementById('game-reset-level-button');
        const gamePauseResumeButton = document.getElementById('game-pause-resume-button');
        const gameLanguageSwitcherButton = document.getElementById('game-language-switcher-button');

        const gameMessageOverlay = document.createElement('div');
        gameMessageOverlay.id = 'game-message-overlay';
        gameMessageOverlay.className = 'game-message-overlay hidden';
        
        const gameMessageContent = document.createElement('div');
        gameMessageContent.className = 'game-message-content';
        gameMessageContent.innerHTML = `
            <h2 id="game-message-title" data-translate-dynamic-game="messageTitle"></h2>
            <p id="game-message-text" data-translate-dynamic-game="messageText"></p>
            <p><span data-translate-game="levelScore">Level Score</span>: <span id="game-level-score-message">0</span></p>
            <p><span data-translate-game="totalFlips">Total Flips</span>: <span id="game-final-flips">0</span></p>
            <p><span data-translate-game="timeBonus">Time Bonus</span>: <span id="game-time-bonus-message">0</span></p>
            <button id="game-next-action-button" class="game-btn-action" data-translate-dynamic-game="nextAction"></button>
        `;
        gameMessageOverlay.appendChild(gameMessageContent);
        document.body.appendChild(gameMessageOverlay);

        const gameNameInputOverlay = document.createElement('div');
        gameNameInputOverlay.id = 'game-name-input-overlay';
        gameNameInputOverlay.className = 'game-name-input-overlay hidden';
        const gameNameInputContent = document.createElement('div');
        gameNameInputContent.className = 'game-name-input-content';
        gameNameInputContent.innerHTML = `
            <h2 data-translate-game="highScoreTitle"><i class="fas fa-medal text-yellow-400"></i> High Score! <i class="fas fa-medal text-yellow-400"></i></h2>
            <p data-translate-game="highScorePrompt">You've made it to the Top 5! Please enter your name (1-10 characters):</p>
            <input type="text" id="game-player-name-input" maxlength="10" data-translate-placeholder-game="enterNamePlaceholder" placeholder="Enter name">
            <button id="game-submit-name-button" class="game-btn-action" data-translate-game="saveScore">Save Score</button>
        `;
        gameNameInputOverlay.appendChild(gameNameInputContent);
        document.body.appendChild(gameNameInputOverlay);
        
        const gamePauseOverlay = document.createElement('div');
        gamePauseOverlay.id = 'game-pause-overlay';
        gamePauseOverlay.className = 'game-pause-overlay hidden';
        const gamePauseContent = document.createElement('div');
        gamePauseContent.className = 'game-pause-content';
        gamePauseContent.innerHTML = `
            <h2 data-translate-game="gamePausedTitle"><i class="fas fa-pause-circle text-blue-500"></i> Game Paused</h2>
            <p data-translate-game="gamePausedText">Take a moment. Press Resume to continue.</p>
            <button id="game-resume-game-button-modal" class="game-btn-action"><i class="fas fa-play mr-1"></i><span data-translate-game="resume">Resume</span></button>
        `;
        gamePauseOverlay.appendChild(gamePauseContent);
        document.body.appendChild(gamePauseOverlay);

        const gameScoreboardList = document.getElementById('game-scoreboard-list');
        const gamePlayerNameInput = document.getElementById('game-player-name-input');
        const gameSubmitNameButton = document.getElementById('game-submit-name-button');
        const gameResumeGameButtonModal = document.getElementById('game-resume-game-button-modal');
        const gameNextActionButton = document.getElementById('game-next-action-button');
        const gameDifficultyButtons = [
            document.getElementById('game-difficulty-easy'),
            document.getElementById('game-difficulty-medium'),
            document.getElementById('game-difficulty-hard')
        ];


        const gameAllLevelsData = [ /* Same as your game data */ 
            { level: 1, pairs: [ {en: "Hello", vi: "Xin chào"}, {en: "Cat", vi: "Con mèo"}, {en: "Dog", vi: "Con chó"} ], columns: 3, basePointsPerMatch: 50, efficiencyBonusBase: 50, timeLimitMedium: 45 },
            { level: 2, pairs: [ {en: "Goodbye", vi: "Tạm biệt"}, {en: "Thank you", vi: "Cảm ơn"}, {en: "Yes", vi: "Có"}, {en: "No", vi: "Không"} ], columns: 4, basePointsPerMatch: 60, efficiencyBonusBase: 80, timeLimitMedium: 70 },
            { level: 3, pairs: [ {en: "Good morning", vi: "Chào buổi sáng"}, {en: "How are you?", vi: "Bạn khỏe không?"}, {en: "I am fine", vi: "Tôi khỏe"}, {en: "What is this?", vi: "Đây là cái gì?"}, {en: "Red", vi: "Màu đỏ"}, {en: "Blue", vi: "Màu xanh dương"} ], columns: 4, basePointsPerMatch: 70, efficiencyBonusBase: 120, timeLimitMedium: 100 },
            { level: 4, pairs: [ {en: "Water", vi: "Nước"}, {en: "Fire", vi: "Lửa"}, {en: "Earth", vi: "Đất"}, {en: "Air", vi: "Không khí"}, {en: "Sun", vi: "Mặt trời"}, {en: "Moon", vi: "Mặt trăng"}, {en: "Star", vi: "Ngôi sao"}, {en: "Tree", vi: "Cây"} ], columns: 4, basePointsPerMatch: 75, efficiencyBonusBase: 150, timeLimitMedium: 120 },
            { level: 5, pairs: [ {en: "Computer", vi: "Máy tính"}, {en: "Keyboard", vi: "Bàn phím"}, {en: "Mouse", vi: "Chuột (máy tính)"}, {en: "Screen", vi: "Màn hình"}, {en: "Software", vi: "Phần mềm"}, {en: "Hardware", vi: "Phần cứng"}, {en: "Internet", vi: "Mạng Internet"}, {en: "Website", vi: "Trang web"}, {en: "Programming", vi: "Lập trình"}, {en: "Developer", vi: "Lập trình viên"} ], columns: 5, basePointsPerMatch: 80, efficiencyBonusBase: 200, timeLimitMedium: 150 },
        ]; 
        const gameDifficultySettings = { /* Same */ 
            easy:   { flipTimeout: 1800, scoreMultiplier: 0.8, timeBonusFactor: 0.5, timerMultiplier: 1.5,  name: "Easy" },
            medium: { flipTimeout: 1000, scoreMultiplier: 1.0, timeBonusFactor: 1.0, timerMultiplier: 1.0,  name: "Medium" },
            hard:   { flipTimeout: 600,  scoreMultiplier: 1.5, timeBonusFactor: 1.5, timerMultiplier: 0.75, name: "Hard" }
        };
        let gameCurrentDifficulty = 'medium';
        let gameCurrentLevelIndex = 0;
        let gameCardsArray = [];
        let gameCardDataList = [];
        let gameFlippedCards = [];
        let gameMatchedPairs = 0;
        let gameFlipsThisLevel = 0;
        let gameLockBoard = false;
        let gameTotalGameScore = 0;
        let gameTopScores = [];
        let gameTimerInterval;
        let gameTimeLeft;
        let gameCurrentLevelTimeLimit;
        let gameTimeBonus = 0;
        let gameIsPaused = false; // Renamed from gamePaused
        const GAME_PENALTY_PER_EXTRA_FLIP = 5;
        const GAME_TIME_BONUS_BASE_POINTS = 50;
        const GAME_TOP_SCORE_COUNT = 5;
        const GAME_LOCAL_STORAGE_TOP_SCORES_KEY = 'ivsMemoryMatchTopScores_v5_multiLang_embed'; // Different key for embedded version
        const GAME_LOCAL_STORAGE_DIFFICULTY_KEY = 'ivsMemoryMatchDifficulty_v5_multiLang_embed';
        const GAME_LOCAL_STORAGE_LANGUAGE_KEY = 'ivsMemoryMatchLanguage_v1_embed'; // Use a different key for language if needed, or share

        // All game functions (formatTime, startTimer, etc.) need to be prefixed with "game" or made local to initIVSMemoryGame
        // For brevity, I will assume you'll refactor them like: gameFormatTime, gameStartTimer, etc.
        // And they will use game-prefixed global variables.
        
        function gameFormatTime(seconds) { /* ... */ return `${Math.floor(seconds / 60).toString().padStart(2, '0')}:${(seconds % 60).toString().padStart(2, '0')}`; }

        function gameStartTimer() {
            if (gameIsPaused) return;
            gameTimeLeft = gameCurrentLevelTimeLimit;
            if(gameTimeDisplay) gameTimeDisplay.textContent = gameFormatTime(gameTimeLeft);
            clearInterval(gameTimerInterval);
            gameTimerInterval = setInterval(() => {
                if (gameIsPaused) return;
                gameTimeLeft--;
                if(gameTimeDisplay) gameTimeDisplay.textContent = gameFormatTime(gameTimeLeft);
                if (gameTimeLeft <= 0) {
                    clearInterval(gameTimerInterval);
                    gameHandleTimeUp();
                }
            }, 1000);
        }
        function gameStopTimer() { clearInterval(gameTimerInterval); }

        function gameTogglePauseGame() {
            gameIsPaused = !gameIsPaused;
            const pauseResumeButtonSpan = gamePauseResumeButton.querySelector('span');
            if (gameIsPaused) {
                gameStopTimer();
                gameLockBoard = true;
                if(pauseResumeButtonSpan) pauseResumeButtonSpan.textContent = gameTranslations[gameCurrentLanguage].resume;
                if(gamePauseOverlay) gamePauseOverlay.classList.remove('hidden');
            } else {
                gameLockBoard = false;
                gameStartTimer();
                if(pauseResumeButtonSpan) pauseResumeButtonSpan.textContent = gameTranslations[gameCurrentLanguage].pause;
                if(gamePauseOverlay) gamePauseOverlay.classList.add('hidden');
            }
             if (gamePauseOverlay && !gamePauseOverlay.classList.contains('hidden')) {
                gamePauseOverlay.querySelector('[data-translate-game="gamePausedTitle"]').innerHTML = gameTranslations[gameCurrentLanguage].gamePausedTitle;
                gamePauseOverlay.querySelector('[data-translate-game="gamePausedText"]').textContent = gameTranslations[gameCurrentLanguage].gamePausedText;
                if(gameResumeGameButtonModal) gameResumeGameButtonModal.querySelector('span').textContent = gameTranslations[gameCurrentLanguage].resume;
            }
        }
        
        function gameHandleTimeUp() {
             if (gameIsPaused) return;
            gameLockBoard = true;
            const titleEl = document.getElementById('game-message-title');
            const textEl = document.getElementById('game-message-text');
            const scoreEl = document.getElementById('game-level-score-message');
            const flipsEl = document.getElementById('game-final-flips');
            const bonusEl = document.getElementById('game-time-bonus-message');
            const nextBtn = document.getElementById('game-next-action-button');

            if(titleEl) titleEl.innerHTML = gameTranslations[gameCurrentLanguage].messageTitleTimesUp;
            if(textEl) textEl.textContent = gameTranslations[gameCurrentLanguage].messageTextTimesUpLevel.replace('{level}', gameAllLevelsData[gameCurrentLevelIndex].level);
            if(scoreEl) scoreEl.textContent = gameTranslations[gameCurrentLanguage].levelScoreTimeOut;
            if(flipsEl) flipsEl.textContent = gameFlipsThisLevel;
            if(bonusEl) bonusEl.textContent = "0";
            if(gameMessageOverlay) gameMessageOverlay.classList.remove('hidden');

            if(nextBtn) {
                nextBtn.textContent = gameTranslations[gameCurrentLanguage].nextActionRestartLevel;
                nextBtn.onclick = () => {
                    if (gameCurrentLevelIndex === 0) gameTotalGameScore = 0;
                    gameSetupLevel(gameCurrentLevelIndex);
                };
            }
        }

        function gameLoadDifficulty() { /* uses GAME_LOCAL_STORAGE_DIFFICULTY_KEY */ 
            const savedDifficulty = localStorage.getItem(GAME_LOCAL_STORAGE_DIFFICULTY_KEY);
            if (savedDifficulty && gameDifficultySettings[savedDifficulty]) {
                gameCurrentDifficulty = savedDifficulty;
            }
            gameUpdateDifficultyButtonsUI();
        }
        function gameSaveDifficulty() { /* uses GAME_LOCAL_STORAGE_DIFFICULTY_KEY */ localStorage.setItem(GAME_LOCAL_STORAGE_DIFFICULTY_KEY, gameCurrentDifficulty); }
        function gameUpdateDifficultyButtonsUI() {
             gameDifficultyButtons.forEach(button => {
                if(button) button.classList.toggle('active', button.dataset.difficulty === gameCurrentDifficulty);
            });
        }

        function gameLoadTopScores() { /* uses GAME_LOCAL_STORAGE_TOP_SCORES_KEY */ 
            const storedScores = localStorage.getItem(GAME_LOCAL_STORAGE_TOP_SCORES_KEY);
            gameTopScores = storedScores ? JSON.parse(storedScores) : [];
            gameRenderTopScores();
        }
        function gameSaveTopScores() { /* uses GAME_LOCAL_STORAGE_TOP_SCORES_KEY */ localStorage.setItem(GAME_LOCAL_STORAGE_TOP_SCORES_KEY, JSON.stringify(gameTopScores)); }
        
        function gameAddScoreToBoard(name, score) {
            gameTopScores.push({ name, score, difficulty: gameCurrentDifficulty }); // Store difficulty with score
            gameTopScores.sort((a, b) => b.score - a.score);
            gameTopScores = gameTopScores.slice(0, GAME_TOP_SCORE_COUNT);
            gameSaveTopScores();
            gameRenderTopScores();
        }

        function gameRenderTopScores() {
            if(!gameScoreboardList) return;
            gameScoreboardList.innerHTML = '';
            if (gameTopScores.length === 0) {
                const li = document.createElement('li');
                li.textContent = gameTranslations[gameCurrentLanguage]?.noHighScores || "No high scores yet.";
                li.className = 'text-center text-gray-500 py-2 text-xs sm:text-sm';
                gameScoreboardList.appendChild(li);
                return;
            }
            gameTopScores.forEach((entry, index) => {
                const li = document.createElement('li');
                const difficultyText = gameTranslations[gameCurrentLanguage]?.[entry.difficulty] || entry.difficulty;
                li.innerHTML = `
                    <span class="rank">${index + 1}.</span>
                    <span class="name">${escapeHtml(entry.name)} (${difficultyText})</span>
                    <span class="score">${entry.score}</span>
                `;
                gameScoreboardList.appendChild(li);
            });
        }


        function gameSetupLevel(levelIndex) {
             gameIsPaused = false;
             const gamePauseResumeButtonSpan = gamePauseResumeButton.querySelector('span');
             if(gamePauseResumeButtonSpan) gamePauseResumeButtonSpan.textContent = gameTranslations[gameCurrentLanguage].pause;
             if(gamePauseOverlay) gamePauseOverlay.classList.add('hidden');


            gameCurrentLevelIndex = levelIndex;
            const levelData = gameAllLevelsData[levelIndex];
            if (!levelData || !gameBoard || !gameFlipsCountDisplay || !gameLevelDisplay) {
                console.error("Lỗi thiết lập màn chơi: Thiếu dữ liệu hoặc phần tử DOM.");
                return;
            }
            gameBoard.innerHTML = '';
            gameMatchedPairs = 0;
            gameFlipsThisLevel = 0;
            gameFlipsCountDisplay.textContent = gameFlipsThisLevel;
            gameLevelDisplay.textContent = levelData.level;
            gameLockBoard = false;
            if(gameMessageOverlay) gameMessageOverlay.classList.add('hidden');
            if(gameNameInputOverlay) gameNameInputOverlay.classList.add('hidden');
            gameTimeBonus = 0;
            gameCurrentLevelTimeLimit = Math.round(levelData.timeLimitMedium * gameDifficultySettings[gameCurrentDifficulty].timerMultiplier);

            gameCardDataList = [];
            levelData.pairs.forEach(pair => {
                const pairId = `${pair.en}-${pair.vi}`;
                gameCardDataList.push({ id: pairId, display: pair.en, type: 'en' });
                gameCardDataList.push({ id: pairId, display: pair.vi, type: 'vi' });
            });
            gameCardDataList.sort(() => 0.5 - Math.random());
            gameBoard.style.gridTemplateColumns = `repeat(${levelData.columns}, 1fr)`;
            gameCardsArray = [];
            gameCardDataList.forEach(cardData => {
                const card = document.createElement('div');
                card.classList.add('game-card');
                card.dataset.id = cardData.id;
                card.innerHTML = `
                    <div class="card-face card-front"></div>
                    <div class="card-face card-back">${escapeHtml(cardData.display)}</div>`;
                card.addEventListener('click', gameHandleCardClick);
                gameBoard.appendChild(card);
                gameCardsArray.push(card);
            });
            if(gameTotalScoreDisplay) gameTotalScoreDisplay.textContent = gameTotalGameScore;
            gameStartTimer();
            applyMemoryGameTranslations(gameCurrentLanguage); // Apply translations to game elements
        }

        function gameHandleCardClick(event) {
            if (gameLockBoard || gameTimeLeft <= 0 || gameIsPaused) return;
            const clickedCard = event.currentTarget;
            if (clickedCard.classList.contains('is-flipped') || clickedCard.classList.contains('is-matched')) return;
            
            clickedCard.classList.add('is-flipped'); // gameFlipCard
            gameFlippedCards.push(clickedCard);

            if (gameFlippedCards.length === 1 && gameFlipsThisLevel === 0 && gameCurrentLevelIndex === 0 && gameTotalGameScore === 0) {
                 gameTotalGameScore = 0;
                 if(gameTotalScoreDisplay) gameTotalScoreDisplay.textContent = gameTotalGameScore;
            }

            if (gameFlippedCards.length === 2) {
                gameFlipsThisLevel++;
                if(gameFlipsCountDisplay) gameFlipsCountDisplay.textContent = gameFlipsThisLevel;
                gameLockBoard = true;
                gameCheckForMatch();
            }
        }
        
        function gameUnflipCards() {
             setTimeout(() => {
                if (gameTimeLeft > 0 && !gameIsPaused) {
                    gameFlippedCards.forEach(card => card.classList.remove('is-flipped'));
                }
                gameFlippedCards = [];
                if (!gameIsPaused) gameLockBoard = false;
            }, gameDifficultySettings[gameCurrentDifficulty].flipTimeout);
        }

        function gameCheckForMatch() {
            const [card1, card2] = gameFlippedCards;
            if (card1.dataset.id === card2.dataset.id) {
                card1.classList.add('is-matched');
                card2.classList.add('is-matched');
                gameMatchedPairs++;
                gameFlippedCards = [];
                if (!gameIsPaused) gameLockBoard = false;
                if (gameMatchedPairs === gameAllLevelsData[gameCurrentLevelIndex].pairs.length) {
                    gameStopTimer();
                    setTimeout(() => gameShowLevelCompleteMessage(gameAllLevelsData[gameCurrentLevelIndex]), 300);
                }
            } else {
                gameUnflipCards();
            }
        }

        function gameShowLevelCompleteMessage(levelData) {
            if (gameIsPaused) return;
            let scoreFromMatches = levelData.basePointsPerMatch * levelData.pairs.length;
            const idealFlips = levelData.pairs.length;
            let efficiencyBonus = 0;
            if (gameFlipsThisLevel <= idealFlips) {
                efficiencyBonus = levelData.efficiencyBonusBase;
            } else {
                const extraFlips = gameFlipsThisLevel - idealFlips;
                efficiencyBonus = Math.max(0, levelData.efficiencyBonusBase - (extraFlips * GAME_PENALTY_PER_EXTRA_FLIP));
            }
            if (gameTimeLeft > 0) {
                 gameTimeBonus = Math.round((gameTimeLeft / gameCurrentLevelTimeLimit) * GAME_TIME_BONUS_BASE_POINTS * gameDifficultySettings[gameCurrentDifficulty].timeBonusFactor);
            } else {
                gameTimeBonus = 0;
            }
            const calculatedLevelScore = Math.round((scoreFromMatches + efficiencyBonus + gameTimeBonus) * gameDifficultySettings[gameCurrentDifficulty].scoreMultiplier);
            gameTotalGameScore += calculatedLevelScore;

            const titleEl = document.getElementById('game-message-title');
            const textEl = document.getElementById('game-message-text');
            const scoreEl = document.getElementById('game-level-score-message');
            const flipsEl = document.getElementById('game-final-flips');
            const bonusEl = document.getElementById('game-time-bonus-message');
            
            if(flipsEl) flipsEl.textContent = gameFlipsThisLevel;
            if(scoreEl) scoreEl.textContent = calculatedLevelScore;
            if(bonusEl) bonusEl.textContent = gameTimeBonus;
            if(gameTotalScoreDisplay) gameTotalScoreDisplay.textContent = gameTotalGameScore;
            if(gameMessageOverlay) gameMessageOverlay.classList.remove('hidden');

            if (gameCurrentLevelIndex < gameAllLevelsData.length - 1) {
                if(titleEl) titleEl.innerHTML = gameTranslations[gameCurrentLanguage].messageTitleExcellent;
                if(textEl) textEl.textContent = gameTranslations[gameCurrentLanguage].messageTextNextChallenge.replace('{level}', levelData.level);
                if(gameNextActionButton) gameNextActionButton.textContent = gameTranslations[gameCurrentLanguage].nextActionNextLevel;
                if(gameNextActionButton) gameNextActionButton.onclick = () => gameSetupLevel(gameCurrentLevelIndex + 1);
            } else {
                if(titleEl) titleEl.innerHTML = gameTranslations[gameCurrentLanguage].messageTitleAwesome;
                if(textEl) textEl.textContent = gameTranslations[gameCurrentLanguage].messageTextAllLevelsComplete;
                if(gameNextActionButton) gameNextActionButton.textContent = gameTranslations[gameCurrentLanguage].nextActionPlayAgain;
                if(gameNextActionButton) gameNextActionButton.onclick = () => gameCheckAndPromptForHighScore();
                gameCheckAndPromptForHighScore();
            }
        }

        function gameCheckAndPromptForHighScore() {
            if(gameMessageOverlay) gameMessageOverlay.classList.add('hidden');
            const lowestTopScore = gameTopScores.length < GAME_TOP_SCORE_COUNT ? 0 : gameTopScores[GAME_TOP_SCORE_COUNT - 1].score;
            if (gameTotalGameScore > 0 && (gameTopScores.length < GAME_TOP_SCORE_COUNT || gameTotalGameScore > lowestTopScore)) {
                if(gameNameInputOverlay) gameNameInputOverlay.classList.remove('hidden');
                if(gamePlayerNameInput) {
                    gamePlayerNameInput.value = '';
                    gamePlayerNameInput.focus();
                }
                // Update dynamic text for name input overlay
                const nameTitle = gameNameInputOverlay.querySelector('[data-translate-game="highScoreTitle"]');
                const namePrompt = gameNameInputOverlay.querySelector('[data-translate-game="highScorePrompt"]');
                const namePlaceholder = gameNameInputOverlay.querySelector('[data-translate-placeholder-game="enterNamePlaceholder"]');
                const saveBtn = gameNameInputOverlay.querySelector('[data-translate-game="saveScore"]');

                if(nameTitle) nameTitle.innerHTML = gameTranslations[gameCurrentLanguage].highScoreTitle;
                if(namePrompt) namePrompt.textContent = gameTranslations[gameCurrentLanguage].highScorePrompt;
                if(namePlaceholder) namePlaceholder.placeholder = gameTranslations[gameCurrentLanguage].enterNamePlaceholder;
                if(saveBtn) saveBtn.textContent = gameTranslations[gameCurrentLanguage].saveScore;


            } else {
                gameTotalGameScore = 0;
                gameSetupLevel(0);
            }
        }

        function initIVSMemoryGame() {
            console.log("Khởi tạo IVS Memory Match...");
            gameCurrentLanguage = localStorage.getItem(GAME_LOCAL_STORAGE_LANGUAGE_KEY) || 'en';
            applyMemoryGameTranslations(gameCurrentLanguage);
            gameLoadDifficulty();
            gameLoadTopScores();
            gameTotalGameScore = 0;
            gameSetupLevel(0);

            if(gameLanguageSwitcherButton) {
                gameLanguageSwitcherButton.addEventListener('click', () => {
                    gameCurrentLanguage = gameCurrentLanguage === 'en' ? 'vi' : 'en';
                    localStorage.setItem(GAME_LOCAL_STORAGE_LANGUAGE_KEY, gameCurrentLanguage);
                    applyMemoryGameTranslations(gameCurrentLanguage);
                     // Re-render messages if overlays are visible
                    if(gameMessageOverlay && !gameMessageOverlay.classList.contains('hidden')) gameShowLevelCompleteMessage(gameAllLevelsData[gameCurrentLevelIndex]); // Re-render with current state
                    if(gameNameInputOverlay && !gameNameInputOverlay.classList.contains('hidden')) gameCheckAndPromptForHighScore(); // Re-render prompt
                    if(gamePauseOverlay && !gamePauseOverlay.classList.contains('hidden')) gameTogglePauseGame(); gameTogglePauseGame(); // Toggle twice to refresh text
                    if(gameScoreboardList) gameRenderTopScores(); // Re-render scoreboard
                });
            }

            gameDifficultyButtons.forEach(button => {
                if(button) button.addEventListener('click', () => {
                    gameCurrentDifficulty = button.dataset.difficulty;
                    gameSaveDifficulty();
                    gameUpdateDifficultyButtonsUI();
                    if (gameCurrentLevelIndex === 0 && gameFlipsThisLevel === 0) gameTotalGameScore = 0;
                    gameSetupLevel(gameCurrentLevelIndex);
                });
            });
            
            if(gamePauseResumeButton) gamePauseResumeButton.addEventListener('click', gameTogglePauseGame);
            if(gameResumeGameButtonModal) gameResumeGameButtonModal.addEventListener('click', gameTogglePauseGame);
            if(gameResetLevelButton) gameResetLevelButton.addEventListener('click', () => {
                gameStopTimer();
                if(gameCurrentLevelIndex === 0) gameTotalGameScore = 0;
                if (gameIsPaused) gameTogglePauseGame(); // Resume if paused
                gameSetupLevel(gameCurrentLevelIndex);
            });
            if(gameSubmitNameButton && gamePlayerNameInput) {
                gameSubmitNameButton.addEventListener('click', () => {
                    const playerName = gamePlayerNameInput.value.trim();
                    if (playerName.length >= 1 && playerName.length <= 10) {
                        gameAddScoreToBoard(playerName, gameTotalGameScore);
                        if(gameNameInputOverlay) gameNameInputOverlay.classList.add('hidden');
                        gameTotalGameScore = 0;
                        gameSetupLevel(0);
                    } else {
                        // Simple alert for now, can be replaced with a more styled message
                        const tempMsg = document.createElement('div');
                        tempMsg.textContent = gameTranslations[gameCurrentLanguage].alertNameLength;
                        tempMsg.style.cssText = 'position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background-color:var(--secondary-color); color:var(--primary-dark-color); padding:10px 20px; border-radius:8px; z-index:2000; box-shadow: 0 2px 5px rgba(0,0,0,0.2);';
                        document.body.appendChild(tempMsg);
                        setTimeout(() => { if (document.body.contains(tempMsg)) document.body.removeChild(tempMsg);}, 3000);
                    }
                });
            }
        }
    </script>
</body>
</html>
