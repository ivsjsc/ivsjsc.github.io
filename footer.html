<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IVS JSC Footer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* CSS tùy chỉnh cho submenu của FABs */
        .hidden { /* Tailwind class, good to have a fallback if main CSS hasn't loaded */
            display: none !important;
        }
        #contact-options:not(.hidden),
        #share-options:not(.hidden) {
            display: flex; /* Ensure they display as flex when not hidden */
        }
        #contact-options,
        #share-options {
            /* z-index: 1000; */ /* These popups will appear above elements with lower z-index. */
                               /* If header z-index is >=1000, header will be on top. */
                               /* Consider if 1000 is needed or if it can be lower, relative to other page modals/popups. */
                               /* For now, kept at 1000 as per original. Header z-index is now 1001. */
             z-index: 1000;
        }
        footer {
            font-family: 'Inter', Arial, sans-serif; /* Consistent font stack */
        }
    </style>
</head>
<body>
    <div id="footer_content_wrapper">
        <footer class="relative bg-gray-900 text-gray-400 pt-16 pb-8 overflow-hidden">
            <div class="absolute inset-0 z-0 opacity-[0.07]">
                <img src="/images/pages/footer.png" alt="Footer Background Pattern" class="w-full h-full object-cover" onerror="this.style.display='none'; this.src='https://placehold.co/1920x400/1f2937/9CA3AF?text=Footer+Background';">
            </div>

            <div class="relative z-[1] container mx-auto px-4 sm:px-6 lg:px-8"> {/* Changed z-10 to z-[1] for clarity, still local to footer */}
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12 mb-12">
                    <div class="sm:col-span-2 lg:col-span-1 space-y-6">
                        <a href="/index.html" class="inline-block mb-2">
                            <img src="/images/logo/logo1.png" alt="IVS JSC Logo White" class="h-10 md:h-12 w-auto" onerror="this.onerror=null; this.src='https://placehold.co/180x48/ffffff/9CA3AF?text=IVS+Logo';">
                            <span class="sr-only" data-lang-key="logo_alt">Logo IVS JSC</span>
                        </a>
                        <p class="text-sm leading-relaxed" data-lang-key="footer_desc_full">
                            CÔNG TY CP DỊCH VỤ THƯƠNG MẠI<br>
                            <strong>INTEGRATE VISION SYNERGY</strong><br>
                            MST: 3603960189
                        </p>
                        <div class="space-y-3 text-sm">
                            <div class="flex items-start">
                                <i class="fas fa-map-marker-alt w-4 h-4 mr-3 mt-1 flex-shrink-0 text-orange-500" aria-hidden="true"></i>
                                <span data-lang-key="address">Số 1104, Tổ 6, Ấp Đất Mới, Xã Long Phước, Huyện Long Thành, Tỉnh Đồng Nai, Việt Nam, 76213.</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-envelope w-4 h-4 mr-3 text-orange-500" aria-hidden="true"></i>
                                <a href="mailto:ivscorp.vn@gmail.com" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="email_address">ivscorp.vn@gmail.com</a>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-phone-alt w-4 h-4 mr-3 text-orange-500" aria-hidden="true"></i>
                                <a href="tel:+84795555789" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="phone_number_1">Công ty: +84 795 555 789</a>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-mobile-alt w-4 h-4 mr-3 text-orange-500" aria-hidden="true"></i>
                                <a href="tel:+84896920547" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="phone_number_2">Tư vấn: +84 896 920 547</a>
                            </div>
                        </div>
                    </div>

                    <div class="sm:col-span-1">
                        <h3 class="text-base font-semibold text-white mb-5 uppercase tracking-wider" data-lang-key="quick_links">Liên Kết Nhanh</h3>
                        <ul class="space-y-3 text-sm">
                            <li><a href="/about.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_about_us">Về chúng tôi</a></li>
                            <li><a href="/contact.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_contact">Liên hệ</a></li>
                            <li><a href="/careervn.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_careers">Tuyển Dụng</a></li>
                            <li><a href="/terms.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_terms">Điều khoản dịch vụ</a></li>
                            <li><a href="/privacy.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_privacy">Chính sách bảo mật</a></li>
                            <li><a href="/readnovel.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_read_novel">Đọc truyện</a></li>
                            <li><a href="/news-archive.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="blog">Tin tức</a></li> {/* Changed tuvan.html to news-archive.html assuming it's the blog/news page */}
                        </ul>
                    </div>

                    <div class="sm:col-span-1">
                        <h3 class="text-base font-semibold text-white mb-5 uppercase tracking-wider" data-lang-key="footer_services">Dịch vụ</h3>
                        <ul class="space-y-3 text-sm">
                            <li><a href="/ivslanguages.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_service_languages">IVS Languages</a></li>
                            <li><a href="/ivslifeminds.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_service_lifeminds">IVS LifeMinds</a></li>
                            <li><a href="/ivsmedia.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_service_media">IVS Media</a></li>
                            <li><a href="/ivscelestech.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_service_celestech">IVS Celestech</a></li>
                            <li><a href="/rnd-curriculum.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="footer_service_rnd">R&D Chương trình</a></li>
                            <li><a href="/tuvan.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="menu_edu_consulting">Tư vấn Giáo dục</a></li>
                            <li><a href="/thanhlaptrungtam.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="menu_center_establishment">Thành lập Trung tâm</a></li>
                            <li><a href="/webdesign.html" class="hover:text-orange-400 transition-colors duration-200" data-lang-key="menu_web_design">Thiết kế Web</a></li>
                        </ul>
                    </div>

                    <div class="sm:col-span-2 lg:col-span-1">
                        <h3 class="text-base font-semibold text-white mb-5 uppercase tracking-wider" data-lang-key="footer_newsletter_title">Đăng ký nhận bản tin</h3>
                        <p class="text-sm text-gray-400 mb-4" data-lang-key="footer_newsletter_desc">Nhập Email của bạn để nhận thông tin cập nhật mới nhất từ IVS JSC.</p>
                        <form id="newsletterForm" action="https://formspree.io/f/mqaqqrkz" method="POST" class="flex flex-col sm:flex-row gap-3">
                            <input type="email" id="newsletterEmail" name="email" placeholder="Nhập Email của bạn" aria-label="Nhập Email của bạn" required class="flex-grow px-4 py-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors duration-200">
                            <button type="submit" class="px-6 py-2 bg-orange-600 text-white font-semibold rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-colors duration-200" data-lang-key="footer_newsletter_button">Đăng ký</button>
                        </form>
                        <div id="newsletterMessage" class="text-sm mt-3"></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 mb-12">
                    <div class="lg:col-span-1">
                        <h3 class="text-base font-semibold text-white mb-5 uppercase tracking-wider" data-lang-key="footer_connect">Kết nối</h3>
                        <div class="flex space-x-5 mb-6">
                            <a href="https://www.youtube.com/@integratevisionsynergy" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-400 transition-colors duration-200" aria-label="YouTube IVS JSC" data-lang-key="footer_youtube">
                                <i class="fab fa-youtube fa-lg" aria-hidden="true"></i>
                            </a>
                            <a href="https://www.tiktok.com/@congty.ivsjsc" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-400 transition-colors duration-200" aria-label="TikTok IVS JSC" data-lang-key="footer_tiktok">
                                <i class="fab fa-tiktok fa-lg" aria-hidden="true"></i>
                            </a>
                            <a href="https://instagram.com/ivs.jsc/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-400 transition-colors duration-200" aria-label="Instagram IVS JSC" data-lang-key="footer_instagram">
                                <i class="fab fa-instagram fa-lg" aria-hidden="true"></i>
                            </a>
                             <a href="https://zalo.me/ivsjsc/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-400 transition-colors duration-200" aria-label="Zalo IVS JSC (OA)" data-lang-key="footer_zalo_oa">
                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24" height="24" viewBox="0 0 50 50" fill="currentColor">
                                    <path d="M 9 4 C 6.2504839 4 4 6.2504839 4 9 L 4 41 C 4 43.749516 6.2504839 46 9 46 L 41 46 C 43.749516 46 46 43.749516 46 41 L 46 9 C 46 6.2504839 43.749516 4 41 4 L 9 4 z M 9 6 L 15.580078 6 C 12.00899 9.7156859 10 14.518083 10 19.5 C 10 24.66 12.110156 29.599844 15.910156 33.339844 C 16.030156 33.549844 16.129922 34.579531 15.669922 35.769531 C 15.379922 36.519531 14.799687 37.499141 13.679688 37.869141 C 13.249688 38.009141 12.97 38.430859 13 38.880859 C 13.03 39.330859 13.360781 39.710781 13.800781 39.800781 C 16.670781 40.370781 18.529297 39.510078 20.029297 38.830078 C 21.379297 38.210078 22.270625 37.789609 23.640625 38.349609 C 26.440625 39.439609 29.42 40 32.5 40 C 36.593685 40 40.531459 39.000731 44 37.113281 L 44 41 C 44 42.668484 42.668484 44 41 44 L 9 44 C 7.3315161 44 6 42.668484 6 41 L 6 9 C 6 7.3315161 7.3315161 6 9 6 z M 33 15 C 33.55 15 34 15.45 34 16 L 34 25 C 34 25.55 33.55 26 33 26 C 32.45 26 32 25.55 32 25 L 32 16 C 32 15.45 32.45 15 33 15 z M 18 16 L 23 16 C 23.36 16 23.700859 16.199531 23.880859 16.519531 C 24.050859 16.829531 24.039609 17.219297 23.849609 17.529297 L 19.800781 24 L 23 24 C 23.55 24 24 24.45 24 25 C 24 25.55 23.55 26 23 26 L 18 26 C 17.64 26 17.299141 25.800469 17.119141 25.480469 C 16.949141 25.170469 16.960391 24.780703 17.150391 24.470703 L 21.199219 18 L 18 18 C 17.45 18 17 17.55 17 17 C 17 16.45 17.45 16 18 16 z"></path>
                                </svg>
                            </a>
                            <a href="https://www.facebook.com/ivsmastery" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-400 transition-colors duration-200" aria-label="Facebook IVS JSC (Công ty)" data-lang-key="footer_facebook_company">
                                <i class="fab fa-facebook-f fa-lg" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>

                    <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gray-800/50 p-4 rounded-md">
                            <h4 class="text-sm font-semibold mb-2 text-white" data-lang-key="footer_ivs_academy_title">IVS Academy</h4>
                            <iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fhr.ivsacademy%2F&tabs=&width=340&height=70&small_header=true&adapt_container_width=true&hide_cover=false&show_facepile=false&appId" width="340" height="70" style="border:none;overflow:hidden;max-width:100%;" scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" title="IVS Academy - Liên kết Giáo dục Facebook Page Embed Small" loading="lazy"></iframe>
                            <noscript>
                                <a href="https://www.facebook.com/hr.ivsacademy/" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-400 hover:text-blue-300 block mt-1" data-lang-key="footer_visit_page_academy">Truy cập Fanpage</a>
                            </noscript>
                        </div>
                        <div class="bg-gray-800/50 p-4 rounded-md">
                            <h4 class="text-sm font-semibold mb-2 text-white" data-lang-key="footer_ivs_mastery_title">IVS Trading Services JSC</h4>
                            <iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fivsmastery%2F&tabs=&width=340&height=70&small_header=true&adapt_container_width=true&hide_cover=false&show_facepile=false&appId" width="340" height="70" style="border:none;overflow:hidden;max-width:100%;" scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" title="Công ty IVS JSC Facebook Page Embed Small" loading="lazy"></iframe>
                            <noscript>
                                <a href="https://www.facebook.com/ivsmastery/" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-400 hover:text-blue-300 block mt-1" data-lang-key="footer_visit_page_mastery">Truy cập Fanpage</a>
                            </noscript>
                        </div>
                    </div>
                </div>

                <div class="mt-12 pt-8 border-t border-gray-700 text-center">
                    <p class="text-sm" data-lang-key="copyright_text">
                        © <span id="current-year">2024</span> IVS JSC. Đã đăng ký Bản quyền số: 6207/2024/QTG. Thiết kế bởi IVS Celestech.
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <div class="fixed bottom-6 right-6 z-50 flex flex-col items-end space-y-2">
        <div id="contact-options" class="hidden flex flex-col items-end space-y-2 mb-1">
            <a href="https://m.me/hr.ivsacademy" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center w-12 h-12 rounded-full bg-blue-600 text-white shadow-lg hover:bg-blue-700 transition-colors duration-200" aria-label="Chat on Messenger" title="Chat on Messenger">
                <i class="fab fa-facebook-messenger text-xl" aria-hidden="true"></i>
            </a>
            <a href="tel:+84896920547" class="flex items-center justify-center w-12 h-12 rounded-full bg-green-600 text-white shadow-lg hover:bg-green-700 transition-colors duration-200" aria-label="Call Consultation Phone" title="Call (+84) 89 692 0547">
                <i class="fas fa-phone-alt text-xl" aria-hidden="true"></i>
            </a>
            <a href="https://zalo.me/nmt5555789" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center w-12 h-12 rounded-full bg-blue-500 text-white shadow-lg hover:bg-blue-600 transition-colors duration-200" aria-label="Chat on Zalo (Mr. Triet)" title="Chat on Zalo (Mr. Triet)">
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="26" height="26" viewBox="0 0 50 50" fill="currentColor">
                    <path d="M39.103,10.938h-5.223c-0.341,0-0.673,0.109-0.953,0.313c-0.281,0.204-0.498,0.49-0.623,0.824l-2.475,6.984l-0.572-0.015 c-0.071-0.002-0.143-0.002-0.214-0.002c-2.668,0-5.28,0.715-7.604,2.051c-0.002,0.001-0.003,0.002-0.005,0.003 c-1.056,0.609-1.988,1.377-2.76,2.28L18.51,23.4l-3.849-3.849c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414L17.096,24.81 l-4.145,4.145c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293l4.145-4.145 l0.117,0.117c0.778,0.788,1.678,1.457,2.67,1.982c0.001,0-0.001,0.001,0,0.001c2.248,1.199,4.761,1.801,7.336,1.801 c0.04,0,0.079-0.001,0.119-0.001l0.318-0.008l2.407,6.359c0.14,0.37,0.4,0.673,0.732,0.852c0.332,0.179,0.718,0.201,1.068,0.061 l5.222-2.116c0.358-0.145,0.635-0.423,0.779-0.781s0.128-0.753-0.057-1.086l-3.105-5.655c0.509-0.612,0.951-1.291,1.312-2.021 c0.001-0.002,0.002-0.003,0.003-0.005c1.196-2.328,1.801-4.896,1.801-7.504c0-0.096-0.002-0.192-0.005-0.288l-0.026-0.811 l3.093-5.634c0.186-0.334,0.204-0.729,0.058-1.086C39.738,11.361,39.46,11.083,39.103,10.938z M34.321,32.311l2.237,4.074 l-3.693,1.498l-1.735-4.584L34.321,32.311z M28.955,33.199c-2.202,0-4.359-0.545-6.273-1.576 c-0.898-0.48-1.702-1.096-2.383-1.822l10.391-10.391c0.689,0.772,1.251,1.641,1.664,2.586c0.873,1.998,1.323,4.176,1.323,6.394 C33.677,30.677,31.616,32.739,28.955,33.199z M32.48,21.591l-10.39,10.39c-0.616-0.667-1.123-1.418-1.499-2.239 c-0.863-1.923-1.303-4.017-1.303-6.184c0-2.632,0.773-5.143,2.168-7.286l0.158-0.247l10.708-0.277L32.48,21.591z M29.167,18.917 c0.299-0.239,0.589-0.486,0.87-0.739l-0.165,0.041L29.167,18.917z M31.729,17.897c-0.292,0.252-0.591,0.496-0.896,0.731 l0.144-0.032L31.729,17.897z M32.367,16.165l-0.713,0.018c-0.263-0.217-0.53-0.428-0.802-0.633l0.008-0.005 c-0.271-0.204-0.547-0.401-0.827-0.591l0.462-0.012c0.062,0,0.123,0,0.185,0C30.867,14.936,31.66,15.431,32.367,16.165z M36.882,12.938l-2.23,4.061l-0.713,0.018c-0.009-0.008-0.019-0.015-0.028-0.023c-0.866-0.729-1.846-1.244-2.903-1.503l-0.462,0.012 l-0.013-0.001c-0.183-0.034-0.367-0.064-0.552-0.091L29.52,15.4c0.233,0.162,0.462,0.33,0.685,0.505l0.008,0.005 c0.248,0.187,0.491,0.378,0.728,0.574l0.713-0.018l0.001,0.005c0.21,0.186,0.416,0.377,0.617,0.571l0.049,0.047 l0.895-0.022L30.47,19.97c-0.242-0.211-0.49-0.414-0.743-0.609l-0.895,0.022l-0.001-0.005 c-0.195-0.173-0.395-0.341-0.599-0.503l-0.019-0.014l-0.685-0.505l0.461-0.012c0.18,0.026,0.358,0.055,0.538,0.087 l0.013,0.001l0.001,0c1.021,0.251,1.962,0.742,2.795,1.44l0.028,0.023l0.713-0.018l2.229-4.059h3.693L36.882,12.938z"/>
                </svg>
            </a>
        </div>
        <button id="contact-main-btn" title="Liên hệ" aria-expanded="false" class="flex items-center justify-center w-14 h-14 rounded-full bg-purple-600 hover:bg-purple-700 text-white shadow-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transition-all duration-300 ease-in-out">
            <i class="fas fa-headset text-2xl"></i>
        </button>

        <div id="share-options" class="hidden flex flex-col items-end space-y-2 mb-1">
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://ivs.id.vn/" target="_blank" rel="noopener noreferrer" aria-label="Share on Facebook" title="Chia sẻ lên Facebook" class="flex items-center justify-center w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg transition-all duration-300 ease-in-out">
                <i class="fab fa-facebook-f text-xl"></i>
            </a>
            <a href="https://twitter.com/intent/tweet?url=https://ivs.id.vn/&text=Website IVS JSC, mọi thông tin đều có ở đây" target="_blank" rel="noopener noreferrer" aria-label="Share on Twitter" title="Chia sẻ lên Twitter" class="flex items-center justify-center w-12 h-12 bg-blue-400 hover:bg-blue-500 text-white rounded-full shadow-lg transition-all duration-300 ease-in-out">
                <i class="fab fa-twitter text-xl"></i>
            </a>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ivs.id.vn/&title=Website IVS JSC, mọi thông tin đều có ở đây" target="_blank" rel="noopener noreferrer" aria-label="Share on LinkedIn" title="Chia sẻ lên LinkedIn" class="flex items-center justify-center w-12 h-12 bg-blue-700 hover:bg-blue-800 text-white rounded-full shadow-lg transition-all duration-300 ease-in-out">
                <i class="fab fa-linkedin-in text-xl"></i>
            </a>
            <a href="mailto:?subject=Website IVS JSC, mọi thông tin đều có ở đây&body=Check out this page: https://ivs.id.vn/" target="_blank" rel="noopener noreferrer" aria-label="Share via Email" title="Chia sẻ qua Email" class="flex items-center justify-center w-12 h-12 bg-gray-600 hover:bg-gray-700 text-white rounded-full shadow-lg transition-all duration-300 ease-in-out">
                <i class="fas fa-envelope text-xl"></i>
            </a>
        </div>
        <button id="share-main-btn" title="Chia sẻ trang" aria-expanded="false" class="flex items-center justify-center w-14 h-14 rounded-full bg-teal-500 hover:bg-teal-600 text-white shadow-lg focus:outline-none focus:ring-2 focus:ring-teal-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out">
            <i class="fas fa-share-alt text-2xl"></i>
        </button>

        <button id="scroll-to-top-btn" title="Lên đầu trang" class="hidden items-center justify-center w-14 h-14 rounded-full bg-sky-600 hover:bg-sky-700 text-white shadow-lg focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-opacity-50 transition-opacity duration-300 ease-in-out">
            <i class="fas fa-arrow-up text-2xl"></i>
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const contactMainBtn = document.getElementById('contact-main-btn');
            const contactOptions = document.getElementById('contact-options');
            const shareMainBtn = document.getElementById('share-main-btn');
            const shareOptions = document.getElementById('share-options');
            const scrollToTopBtn = document.getElementById('scroll-to-top-btn');

            if (!contactMainBtn || !contactOptions || !shareMainBtn || !shareOptions || !scrollToTopBtn) {
                console.error('Một hoặc nhiều phần tử FAB không được tìm thấy.');
                return;
            }

            function toggleSubmenu(button, submenuToToggle) {
                const allSubmenus = [
                    { btn: contactMainBtn, menu: contactOptions },
                    { btn: shareMainBtn, menu: shareOptions }
                ];

                allSubmenus.forEach(item => {
                    if (item.menu !== submenuToToggle && !item.menu.classList.contains('hidden')) {
                        item.menu.classList.add('hidden');
                        item.btn.setAttribute('aria-expanded', 'false');
                    }
                });

                const isHidden = submenuToToggle.classList.toggle('hidden');
                button.setAttribute('aria-expanded', String(!isHidden));
            }

            contactMainBtn.addEventListener('click', (event) => {
                event.stopPropagation();
                toggleSubmenu(contactMainBtn, contactOptions);
            });

            shareMainBtn.addEventListener('click', (event) => {
                event.stopPropagation();
                toggleSubmenu(shareMainBtn, shareOptions);
            });

            document.addEventListener('click', (event) => {
                if (!contactMainBtn.contains(event.target) && !contactOptions.contains(event.target) && !contactOptions.classList.contains('hidden')) {
                    contactOptions.classList.add('hidden');
                    contactMainBtn.setAttribute('aria-expanded', 'false');
                }
                if (!shareMainBtn.contains(event.target) && !shareOptions.contains(event.target) && !shareOptions.classList.contains('hidden')) {
                    shareOptions.classList.add('hidden');
                    shareMainBtn.setAttribute('aria-expanded', 'false');
                }
            });

            window.addEventListener('scroll', () => {
                if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                    scrollToTopBtn.classList.remove('hidden');
                    scrollToTopBtn.classList.add('flex'); 
                } else {
                    scrollToTopBtn.classList.add('hidden');
                    scrollToTopBtn.classList.remove('flex');
                }
            }, { passive: true });

            scrollToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            const yearSpan = document.getElementById('current-year');
            if (yearSpan) {
                yearSpan.textContent = new Date().getFullYear();
            }

            const newsletterForm = document.getElementById('newsletterForm');
            if (newsletterForm) {
                newsletterForm.addEventListener('submit', async function(event) {
                    event.preventDefault();
                    const emailInput = document.getElementById('newsletterEmail');
                    const messageDiv = document.getElementById('newsletterMessage');
                    const submitButton = newsletterForm.querySelector('button[type="submit"]');
                    const originalButtonText = submitButton.textContent;
                    const processingText = submitButton.dataset.processingText || 'Đang xử lý...';
                    const successText = submitButton.dataset.successText || 'Cảm ơn bạn đã đăng ký! Vui lòng kiểm tra email để xác nhận.';
                    const errorText = submitButton.dataset.errorText || 'Đã có lỗi xảy ra. Vui lòng thử lại sau.';
                    const invalidEmailText = submitButton.dataset.invalidEmailText || 'Vui lòng nhập một địa chỉ email hợp lệ.';


                    messageDiv.textContent = '';
                    messageDiv.className = 'text-sm mt-3';

                    if (!emailInput.value || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
                        messageDiv.textContent = invalidEmailText;
                        messageDiv.className = 'text-sm mt-3 text-red-400';
                        return;
                    }

                    submitButton.disabled = true;
                    submitButton.textContent = processingText;

                    try {
                        const response = await fetch(newsletterForm.action, {
                            method: 'POST',
                            body: new FormData(newsletterForm),
                            headers: { 'Accept': 'application/json' }
                        });
                        if (response.ok) {
                            messageDiv.textContent = successText;
                            messageDiv.className = 'text-sm mt-3 text-green-400';
                            emailInput.value = '';
                        } else {
                            const data = await response.json().catch(() => ({})); // Gracefully handle non-JSON error responses
                            messageDiv.textContent = data.error || errorText;
                            messageDiv.className = 'text-sm mt-3 text-red-400';
                        }
                    } catch (error) {
                        console.error('Error submitting newsletter:', error);
                        messageDiv.textContent = errorText;
                        messageDiv.className = 'text-sm mt-3 text-red-400';
                    } finally {
                        submitButton.disabled = false;
                        submitButton.textContent = originalButtonText;
                    }
                });
            }
        });
    </script>
</body>
</html>