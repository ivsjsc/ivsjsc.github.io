<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEGNAXE: The Secret of Great Heaven War - ENGLISH</title>
    <meta name="description" content="LEGNAXE Part 1: The Secret of Great Heaven War - ENGLISH. Explore the origins of the conflict between angels, the creation of humankind, and fateful choices.">
    <meta property="og:title" content="LEGNAXE: The Secret of Great Heaven War - ENGLISH (Part 1)">
    <meta property="og:description" content="Read LEGNAXE Part 1, and discover the events leading to the great war in Heaven.">
    <meta property="og:image" content="images/pages/novels/legnaxe1.png">
    <meta property="og:url" content="https://ivs.id.vn/legnaxe_part1_en.html">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Long Story">
    <meta property="article:author" content="Nguyen Minh Triet">

    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        'primary': '#3b82f6', 'primary-dark': '#2563eb',
                        'blue-400': '#60a5fa', 'blue-600': '#2563eb', 'blue-700': '#1d4ed8',
                        'gray-50': '#f9fafb', 'gray-100': '#f3f4f6', 'gray-200': '#e5e7eb',
                        'gray-300': '#d1d5db', 'gray-400': '#9ca3af', 'gray-500': '#6b7280',
                        'gray-600': '#4b5563', 'gray-700': '#374151', 'gray-800': '#1f2937',
                        'gray-900': '#111827', 'red-400': '#f87171', 'red-600': '#dc2626',
                        'neutral-800': '#1f2937', 'neutral-900': '#111827',
                        'white': '#ffffff', 'black': '#000000',
                        'purple-accent': '#8b5cf6',
                    },
                    animation: { 'slide-up': 'slideUp 0.5s ease-out', },
                    keyframes: { slideUp: { '0%': { transform: 'translateY(20px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } }, },
                },
            },
            darkMode: 'class',
        }
    </script>
    <style>
        .chapter { transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; opacity: 0; transform: translateY(15px); display: none; }
        .chapter.active { opacity: 1; transform: translateY(0); display: block; }
        html { scroll-behavior: smooth; }
        #chapter-modal { transition: opacity 0.3s ease-in-out; display: none; }
        #chapter-modal .modal-content { transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out; transform: scale(0.95); opacity: 0; }
        #chapter-modal.modal-active { opacity: 1 !important; pointer-events: auto; display: flex; }
        #chapter-modal.modal-active .modal-content { transform: scale(1); opacity: 1; }
        body::-webkit-scrollbar { width: 10px; }
        body::-webkit-scrollbar-track { background: #f3f4f6; }
        body::-webkit-scrollbar-thumb { background-color: #9ca3af; border-radius: 20px; border: 2px solid #f3f4f6; }
        body::-webkit-scrollbar-thumb:hover { background-color: #6b7280; }
        .dark body::-webkit-scrollbar-track { background: #111827; }
        .dark body::-webkit-scrollbar-thumb { background-color: #4b5563; border: 2px solid #111827; }
        .dark body::-webkit-scrollbar-thumb:hover { background-color: #6b7280; }
        #chapter-modal .modal-content ul::-webkit-scrollbar { width: 8px; }
        #chapter-modal .modal-content ul::-webkit-scrollbar-track { background: #f3f4f6; }
        #chapter-modal .modal-content ul::-webkit-scrollbar-thumb { background: #9ca3af; border-radius: 4px; }
        #chapter-modal .modal-content ul::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        .dark #chapter-modal .modal-content ul::-webkit-scrollbar-track { background: #1f2937; }
        .dark #chapter-modal .modal-content ul::-webkit-scrollbar-thumb { background: #4b5563; }
        .dark #chapter-modal .modal-content ul::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        .prose { @apply max-w-none font-serif text-gray-800 dark:text-gray-100; }
        .prose p { @apply mb-4 leading-relaxed text-justify text-gray-800 dark:text-gray-100; }
        .prose strong { @apply font-semibold text-gray-800 dark:text-gray-100; }
        .prose h4 { @apply text-lg font-semibold mt-5 mb-2 text-gray-800 dark:text-gray-100; }
        .chapter > h3 { @apply text-2xl sm:text-3xl font-semibold mb-6 mt-4 text-gray-800 dark:text-gray-100 border-b pb-3 border-gray-200 dark:border-gray-700; }
        #scroll-to-top-btn { transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out; pointer-events: auto; }
        #scroll-to-top-btn.hidden { opacity: 0; transform: translateY(10px); pointer-events: none; }
        body { @apply bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 transition-colors duration-300 ease-in-out font-sans antialiased; }
        .navigation { @apply sticky bottom-0 bg-gray-50 dark:bg-gray-800 p-4 shadow-lg z-40 transition-colors duration-300; }
        .progress-bar { transition: width 0.3s ease-in-out; }
        .font-size-sm { font-size: 0.875rem; line-height: 1.5rem; }
        .font-size-md { font-size: 1rem; line-height: 1.75rem; }
        .font-size-lg { font-size: 1.125rem; line-height: 2rem; }
        /* Ensure no black text in dark mode */
        .dark * { color: inherit; }
        .dark .text-black { @apply text-gray-100; }
    </style>
</head>
<body>
    <a href="#main CONTENT" class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-blue-600 text-white px-4 py-2">Skip to content</a>
    <header id="navbar" class="bg-gray-50 dark:bg-gray-800 shadow-lg sticky top-0 z-50 transition-colors duration-300 ease-in-out">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20">
            <div class="logo">
                <a href="index.html" aria-label="LEGNAXE Homepage">
                    <img src="images/logo/logo.png" alt="LEGNAXE Logo" class="h-10 sm:h-12 w-auto transition-all duration-300 ease-in-out hover:opacity-80"
                         onerror="this.style.display='none'; const newText = document.createElement('span'); newText.className='text-xl font-bold text-blue-600 dark:text-blue-400'; newText.textContent='LEGNAXE'; this.parentNode.appendChild(newText);">
                </a>
            </div>
            <nav class="flex items-center space-x-2 sm:space-x-4 md:space-x-6">
                <a href="index.html" class="text-gray-800 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 px-3 py-2 rounded-md text-sm sm:text-base font-medium transition-colors">Home</a>
                <a href="readnovel.html" class="text-gray-800 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 px-3 py-2 rounded-md text-sm sm:text-base font-medium transition-colors">Novel List</a>
                <button id="theme-toggle" aria-label="Toggle light/dark mode" class="text-gray-800 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 focus:outline-none p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 ease-in-out">
                    <i class="fas fa-moon text-xl"></i>
                </button>
                <div class="relative">
                    <button id="font-size-toggle" aria-label="Adjust font size" class="text-gray-800 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 focus:outline-none p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 ease-in-out">
                        <i class="fas fa-text-height text-xl"></i>
                    </button>
                    <div id="font-size-menu" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-50">
                        <button data-size="sm" class="block w-full text-left px-4 py-2 text-sm text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700">Small</button>
                        <button data-size="md" class="block w-full text-left px-4 py-2 text-sm text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700">Medium</button>
                        <button data-size="lg" class="block w-full text-left px-4 py-2 text-sm text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700">Large</button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main id="main-content" class="max-w-4xl mx-auto px-4 py-8 sm:px-6 lg:px-12">
        <h1 class="text-4xl sm:text-5xl font-bold text-center mb-2 text-gray-800 dark:text-gray-100 animate-slide-up">LEGNAXE</h1>
        <h2 class="text-2xl sm:text-3xl font-semibold text-center mb-10 text-blue-600 dark:text-blue-400 animate-slide-up">Part 1: The Secret of Great Heaven War</ cautions
        <div class="story-content-wrapper bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-xl shadow-xl transition-colors duration-300 ease-in-out">
            <img src="images/pages/novels/legnaxe1.png" alt="LEGNAXE Part 1 Banner" class="mb-8 rounded-lg shadow-md w-full max-h-[300px] sm:max-h-[400px] object-cover">
            <div class="progress-bar h-1 bg-blue-600 dark:bg-blue-400 mb-6" style="width: 0%"></div>

            <div class="chapter active font-size-md" id="chapter-1">
                <h3>Chapter 1: The Eternal Harmony</h3>
                <div class="prose prose-lg max-w-none">
                    <p>Heaven, before the dawn of humankind, was a breathtakingly perfect picture.</p>
                    <p>Imagine rivers of shimmering gold, sparkling like soft silk ribbons, winding through valleys of transparent crystal. The gentle murmur of flowing water was like a melodious symphony, capable of soothing even the most tormented souls. Yet, within this endless beauty, a sense of repetitive monotony crept in – an immutable perfection, unchanging, as if it had imprisoned itself in a gilded cage. High above, towers of pure light stretched towards the infinite azure sky. The light emanating from them shifted subtly, blending with the eternal celestial symphony. Vibrant, ever-changing patterns danced upon the towers, creating a mesmerizing yet monotonous ballet in its eternity. Sometimes, at the farthest fringes of Heaven, where the light seemed thinner, a few guardian angels whispered of strange ripples in the fabric of reality, "silences" where the eternal melody seemed to miss a beat, but no one dared discuss it openly.</p>
                    <p>There was no day or night here, for time was but a fleeting concept. Heaven was not measured by hours, but by the eternal heartbeat of creation. Angels moved with grace, as fluid as light itself, radiant and ethereal. They knew no fear, pain, or doubt. Duty and devotion were ingrained in their very being, as natural as a mortal's breath.</p>
                    <p>But amidst this seemingly perfect harmony, there was a solitary figure.</p>
                    <h4>Lucifer's Contemplation</h4>
                    <p>Lucifer stood on a marble balcony, his deep eyes gazing at the glistening gold of the river below. Outwardly serene, a storm was silently brewing within him. He tried to feel joy in the familiar symphony, but instead, there was only a vast emptiness, a silence no melody could fill. He watched the other angels move in absolute unison, and a question pierced him: Was this free will, or merely perfect programming?</p>
                    <p>"If everything is perfect," he whispered to himself, his voice a dissonant note in the celestial symphony that now sounded more like shackles than a song, "why do I feel so empty?"</p>
                    <p>Below him, countless angels moved in perfect synchrony, their songs of praise echoing in harmony. Lucifer's vast, golden wings shimmered with an otherworldly radiance, seeming to draw in all the light of Heaven. But they twitched subtly, betraying a vague unease. His gaze remained fixed on the distant horizon, where a faint, fragile glimmer of a new entity hung upon the starry tapestry. Earth. A world of imperfection, of change. A fleeting thought: Was imperfection the price of meaning?</p>
                    <p>Lucifer's mind was a tempest hidden behind a calm facade. There was a time when he found joy in Heaven's endless songs. But as time flowed on, century after century, the melody gradually became hollow, its meaning fading like an echo in a deserted hall. He wondered, was it truly joy, or merely obedience cloaked in the guise of harmony?</p>
                    <h4>Michael's Warning</h4>
                    <p>"Lucifer," a deep, steady voice resonated, shattering his thoughts.</p>
                    <p>Lucifer slowly turned, his golden wings folding behind him. He recognized the familiar voice – it was Michael. Clad in gleaming silver armor under the eternal light, Michael approached. His face was resolute, unyielding, yet held a hidden warmth for his brother.</p>
                    <p>"You have stood here too long," Michael said. "Why not join the others in song?"</p>
                    <p>Lucifer's voice, when it finally came, was soft yet sharp as a razor. "Have you never wondered, Michael? Why must we sing? What is the purpose?"</p>
                    <p>Michael paused for a moment, a flicker of unease crossing his features before being replaced by his usual resolve. "The purpose is to serve the Creator, Lucifer. It is the highest honor."</p>
                    <p>"Honor," Lucifer repeated, a faint smile on his lips. "Or merely habit?"</p>
                    <p>(To be continued...)</p>
                </div>
            </div>

            <div class="navigation flex flex-col sm:flex-row justify-between items-center mt-10 mb-6 space-y-4 sm:space-y-0">
                <button id="list-chapter-btn" class="w-full sm:w-auto px-6 py-3 rounded-lg font-semibold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center">
                    <i class="fas fa-list-ul mr-2"></i>List of Chapters
                </button>
                <button id="prev-chapter-btn" class="w-full sm:w-auto px-6 py-3 rounded-lg font-semibold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center" disabled>
                    <i class="fas fa-arrow-left mr-2"></i>Previous Chapter
                </button>
                <button id="next-chapter-btn" class="w-full sm:w-auto px-6 py-3 rounded-lg font-semibold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center">
                    Next Chapter<i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
    </main>

    <button id="scroll-to-top-btn" title="Go to top" class="hidden fixed bottom-5 right-5 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 z-50 transition-opacity duration-300 ease-in-out">
        <i class="fas fa-arrow-up"></i>
    </button>

    <div id="chapter-modal" class="modal fixed inset-0 bg-gray-900 bg-opacity-60 dark:bg-opacity-75 flex items-center justify-center p-4 transition-opacity duration-300 ease-in-out opacity-0 pointer-events-none">
        <div class="modal-content bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-lg shadow-2xl w-full max-w-md relative transform transition-all duration-300 ease-in-out scale-95 opacity-0">
            <span id="close-modal-btn" class="close absolute top-3 right-4 text-gray-500 dark:text-gray-100 hover:text-red-600 dark:hover:text-red-400 text-3xl cursor-pointer transition-colors leading-none">×</span>
            <h3 class="text-2xl font-semibold mb-6 text-gray-800 dark:text-gray-100">List of Chapters</h3>
            <ul id="modal-chapter-list" class="space-y-1 max-h-80 sm:max-h-96 overflow-y-auto pr-2">
                <li><a href="#chapter-1" data-chapter-id="chapter-1" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 1: The Eternal Harmony</a></li>
                <li><a href="#chapter-2" data-chapter-id="chapter-2" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 2: The Decree from Heaven</a></li>
                <li><a href="#chapter-3" data-chapter-id="chapter-3" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 3: Sparks of Rebellion</a></li>
                <li><a href="#chapter-4" data-chapter-id="chapter-4" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 4: The First Creations</a></li>
                <li><a href="#chapter-5" data-chapter-id="chapter-5" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 5: Light and Shadow</a></li>
                <li><a href="#chapter-6" data-chapter-id="chapter-6" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 6: The Serpent's Whisper</a></li>
                <li><a href="#chapter-7" data-chapter-id="chapter-7" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 7: The Fracture</a></li>
                <li><a href="#chapter-8" data-chapter-id="chapter-8" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 8: The Creation of Eve</a></li>
                <li><a href="#chapter-9" data-chapter-id="chapter-9" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 9: Whispers of Darkness</a></li>
                <li><a href="#chapter-10" data-chapter-id="chapter-10" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 10: The First Taste</a></li>
                <li><a href="#chapter-11" data-chapter-id="chapter-11" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 11: The Fall</a></li>
                <li><a href="#chapter-12" data-chapter-id="chapter-12" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 12: The First Birth</a></li>
                <li><a href="#chapter-13" data-chapter-id="chapter-13" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 13: The First Crack</a></li>
                <li><a href="#chapter-14" data-chapter-id="chapter-14" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 14: The Mark of Cain</a></li>
                <li><a href="#chapter-15" data-chapter-id="chapter-15" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 15: Cain's Legacy</a></li>
                <li><a href="#chapter-16" data-chapter-id="chapter-16" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 16: The First Judgment</a></li>
                <li><a href="#chapter-17" data-chapter-id="chapter-17" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 17: The Floodgates Open</a></li>
                <li><a href="#chapter-18" data-chapter-id="chapter-18" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 18: The War of Eternal Light</a></li>
                <li><a href="#chapter-19" data-chapter-id="chapter-19" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 19: Seeds of Rebellion</a></li>
                <li><a href="#chapter-20" data-chapter-id="chapter-20" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 20: Echoes of Choice</a></li>
                <li><a href="#chapter-21" data-chapter-id="chapter-21" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 21: The Shattering of the Veil</a></li>
                <li><a href="#chapter-22" data-chapter-id="chapter-22" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 22: Beyond the Veil</a></li>
                <li><a href="#chapter-23" data-chapter-id="chapter-23" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 23: The Truth Beyond the Veil</a></li>
                <li><a href="#chapter-24" data-chapter-id="chapter-24" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 24: The Cost of Light</a></li>
                <li><a href="#chapter-25" data-chapter-id="chapter-25" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 25: Judgment and Eternal Division</a></li>
                <li><a href="#chapter-26" data-chapter-id="chapter-26" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 26: The Final Dawn</a></li>
                <li><a href="#chapter-27" data-chapter-id="chapter-27" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 27: The Eternal Boundary</a></li>
                <li><a href="#chapter-28" data-chapter-id="chapter-28" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 28: The Eternal Crossroads</a></li>
                <li><a href="#chapter-29" data-chapter-id="chapter-29" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 29: Whispers of Withdrawal</a></li>
                <li><a href="#chapter-30" data-chapter-id="chapter-30" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Chapter 30: The Unspoken Question</a></li>
                <li><a href="#epilogue" data-chapter-id="epilogue" class="modal-chapter-link block p-3 rounded-md text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Epilogue: The Soul Meteor Shower</a></li>
            </ul>
        </div>
    </div>

    <footer id="footer" class="bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 transition-colors duration-300 ease-in-out">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center">
            <div class="footer-links mb-6 space-x-2 sm:space-x-4">
                <a href="readnovel.html" class="text-gray-800 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 text-sm sm:text-base transition-colors">Back to List</a>
                <a href="legnaxe_part1_vi.html" class="text-gray-800 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 text-sm sm:text-base transition-colors">Tiếng Việt</a>
                <a href="author-about.html" class="text-gray-800 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 text-sm sm:text-base transition-colors">About Author</a>
            </div>
            <p class="text-sm text-gray-500 dark:text-gray-400">© <span id="current-year">2025</span> LEGNAXE. All rights reserved. Author: Nguyen Minh Triet</p>
            <p class="text-xs text-gray-400 dark:text-gray-100 mt-2">A product of IVS JSC. Website: <a href="https://ivs.id.vn" target="_blank" rel="noopener noreferrer" class="hover:underline text-gray-400 dark:text-gray-100">ivs.id.vn</a></p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const chapters = Array.from(document.querySelectorAll('.chapter'));
        let currentChapterIndex = 0;

        const prevButton = document.getElementById('prev-chapter-btn');
        const nextButton = document.getElementById('next-chapter-btn');
        const listChapterButton = document.getElementById('list-chapter-btn');
        const scrollToTopBtn = document.getElementById('scroll-to-top-btn');

        const chapterModal = document.getElementById('chapter-modal');
        const closeModalButton = document.getElementById('close-modal-btn');
        const modalChapterLinks = document.querySelectorAll('.modal-chapter-link');

        const themeToggle = document.getElementById('theme-toggle');
        const fontSizeToggle = document.getElementById('font-size-toggle');
        const fontSizeMenu = document.getElementById('font-size-menu');
        const htmlElement = document.documentElement;
        const bodyElement = document.body;
        const themeIcon = themeToggle?.querySelector('i');
        const currentYearSpan = document.getElementById('current-year');
        const progressBar = document.querySelector('.progress-bar');

        function showChapter(index, isInitialLoad = false) {
            if (index < 0 || index >= chapters.length) {
                console.warn("Invalid chapter index:", index);
                if (isInitialLoad && chapters.length > 0) { index = 0; }
                else { return; }
            }

            chapters.forEach((chapter, i) => {
                chapter.classList.toggle('active', i === index);
            });

            prevButton.disabled = index === 0;
            nextButton.disabled = index === chapters.length - 1;

            currentChapterIndex = index;

            if (!isInitialLoad) {
                const storyContentWrapper = document.querySelector('.story-content-wrapper');
                const navbarHeight = document.getElementById('navbar')?.offsetHeight || 0;
                window.scrollTo({
                    top: storyContentWrapper.offsetTop - navbarHeight - 20,
                    behavior: 'smooth'
                });
            }

            if (chapters[currentChapterIndex] && !isInitialLoad) {
                if (window.location.hash !== `#${chapters[currentChapterIndex].id}`) {
                    history.pushState(null, null, `#${chapters[currentChapterIndex].id}`);
                }
            }

            updateProgressBar();
        }

        function showChapterFromHash(isInitialLoad = false) {
            const hash = window.location.hash.substring(1);
            if (hash) {
                const targetIndex = chapters.findIndex(chap => chap.id === hash);
                if (targetIndex !== -1) {
                    showChapter(targetIndex, isInitialLoad);
                    if (isInitialLoad) {
                        setTimeout(() => {
                            const targetElement = document.getElementById(hash);
                            if (targetElement) {
                                const navbarHeight = document.getElementById('navbar')?.offsetHeight || 0;
                                const elementTop = targetElement.getBoundingClientRect().top + window.pageYOffset;
                                window.scrollTo({
                                    top: elementTop - navbarHeight - 20,
                                    behavior: 'auto'
                                });
                            }
                        }, 50);
                    }
                    return true;
                }
            }
            if (isInitialLoad && chapters.length > 0) {
                showChapter(0, true);
                window.scrollTo({ top: 0, behavior: 'auto' });
            }
            return false;
        }

        let initialActiveChapterIndex = chapters.findIndex(chap => chap.classList.contains('active'));
        if (initialActiveChapterIndex === -1 && chapters.length > 0) {
            chapters[0].classList.add('active');
            initialActiveChapterIndex = 0;
        }

        if (!showChapterFromHash(true) && initialActiveChapterIndex !== -1) {
            showChapter(initialActiveChapterIndex, true);
        } else if (chapters.length === 0) {
            prevButton.disabled = true;
            nextButton.disabled = true;
            listChapterButton.disabled = true;
        }

        prevButton?.addEventListener('click', () => {
            if (currentChapterIndex > 0) {
                showChapter(currentChapterIndex - 1);
            }
        });

        nextButton?.addEventListener('click', () => {
            if (currentChapterIndex < chapters.length - 1) {
                showChapter(currentChapterIndex + 1);
            }
        });

        listChapterButton?.addEventListener('click', () => {
            chapterModal.style.display = 'flex';
            setTimeout(() => {
                chapterModal.classList.add('modal-active');
            }, 10);
            bodyElement.style.overflow = 'hidden';
        });

        function closeModal() {
            chapterModal.classList.remove('modal-active');
            setTimeout(() => {
                if (!chapterModal.classList.contains('modal-active')) {
                    chapterModal.style.display = 'none';
                }
            }, 300);
            bodyElement.style.overflow = '';
        }

        closeModalButton?.addEventListener('click', closeModal);

        chapterModal?.addEventListener('click', (event) => {
            if (event.target === chapterModal) {
                closeModal();
            }
        });

        modalChapterLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                event.preventDefault();
                const chapterId = link.getAttribute('href')?.substring(1) || link.dataset.chapterId;
                if (!chapterId) return;

                const targetIndex = chapters.findIndex(chap => chap.id === chapterId);
                if (targetIndex !== -1) {
                    showChapter(targetIndex);
                }
                closeModal();
            });
        });

        function applyTheme(isDark) {
            htmlElement.classList.toggle('dark', isDark);
            if (themeIcon) {
                themeIcon.classList.toggle('fa-moon', !isDark);
                themeIcon.classList.toggle('fa-sun', isDark);
            }
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const savedTheme = localStorage.getItem('theme');
        let currentIsDarkMode = savedTheme === 'dark' || (savedTheme === null && prefersDarkScheme);

        applyTheme(currentIsDarkMode);

        themeToggle?.addEventListener('click', () => {
            currentIsDarkMode = !htmlElement.classList.contains('dark');
            applyTheme(currentIsDarkMode);
        });

        fontSizeToggle?.addEventListener('click', () => {
            fontSizeMenu.classList.toggle('hidden');
        });

        document.querySelectorAll('#font-size-menu button').forEach(button => {
            button.addEventListener('click', () => {
                const size = button.dataset.size;
                chapters.forEach(chapter => {
                    chapter.classList.remove('font-size-sm', 'font-size-md', 'font-size-lg');
                    chapter.classList.add(`font-size-${size}`);
                });
                fontSizeMenu.classList.add('hidden');
                localStorage.setItem('fontSize', size);
            });
        });

        const savedFontSize = localStorage.getItem('fontSize') || 'md';
        chapters.forEach(chapter => {
            chapter.classList.add(`font-size-${savedFontSize}`);
        });

        function updateProgressBar() {
            const chapter = chapters[currentChapterIndex];
            if (!chapter) return;

            const chapterTop = chapter.getBoundingClientRect().top + window.pageYOffset;
            const chapterHeight = chapter.offsetHeight;
            const windowHeight = window.innerHeight;
            const scrollPosition = window.pageYOffset;
            const progress = Math.min(100, Math.max(0, ((scrollPosition - chapterTop + windowHeight) / chapterHeight) * 100));
            progressBar.style.width = `${progress}%`;
        }

        scrollToTopBtn?.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.classList.remove('hidden');
            } else {
                scrollToTopBtn.classList.add('hidden');
            }
            updateProgressBar();
        });

        window.addEventListener('resize', updateProgressBar);

        if (currentYearSpan) {
            currentYearSpan.textContent = new Date().getFullYear();
        }

        window.addEventListener('hashchange', () => showChapterFromHash(false));

        document.addEventListener('click', (event) => {
            if (!fontSizeMenu.contains(event.target) && !fontSizeToggle.contains(event.target)) {
                fontSizeMenu.classList.add('hidden');
            }
        });
    });
    </script>
</body>
</html>